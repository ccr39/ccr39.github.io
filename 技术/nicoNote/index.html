<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="referrer" content="no-referrer" />
  
  <title itemprop="name">从零开始编写一个浏览器笔记脚本 | CCR39のLazyNest</title>
  
    <link rel="shortcut icon" href="https://s2.loli.net/2022/12/11/jWa7P4GsMQfVheS.png">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "CCR39のLazyNest";
  mashiro_option.author_name = "LazyNest";
  mashiro_option.site_url = "https://ccr39.github.io";
  mashiro_option.v_appId = "nJIfytgko1rH9zkhJaosZRZ3-MdYXbMMI";
  mashiro_option.v_appKey = "fAj8OKoTBsGObZsLQJmP66FJ";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/ce9f1ad5f1b707f7c7b60494f6b2cc5961e5f5ea.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/d7192ee38f7eb115191e9f5b0a4f509bf99d42e1.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/24b1b913657051385bff6e6d02b045dd1d4386de.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/79b185e5f154d68567781860634a771de108c576.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/cc3a4805be9e05064f7d7415ce986d16120f1da2.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/23d3ff258de91a555b8e4b157dc4a859c49e0f87.jpg,https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/565ec92ba5851f2234982c36cb073be685e68671.jpg".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://ccr39.github.io">
          <img src="https://i0.hdslb.com/bfs/album/31885206e51d953c6cdd9e7fcc4e65e31d884f2e.jpg">
        </a>
      </div>
      <div class="header-info">
        <p>I am ordinary yet unique.</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/ccr39" target="_blank" class="social-github" title="Github">
                    <img src="https://i0.hdslb.com/bfs/album/e888d386110facbb6f1b89eb8f0286a62037dcf3.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://tieba.baidu.com/home/main?id=tb.1.a7b0366d.--5hf2tGrWRobqEsaC6y_g&amp;fr=userbar" target="_blank" class="social-github" title="百度贴吧">
                    <img src="https://i0.hdslb.com/bfs/album/562ff95749f16be6198f56e30d3620092432219b.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://space.bilibili.com/1865926893?spm_id_from=333.1007.0.0" target="_blank" class="social-github" title="bilibili">
                    <img src="https://i0.hdslb.com/bfs/album/52e627467a171d7f31862439719ed2889c930289.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://twitter.com/ccr393" target="_blank" class="social-github" title="twitter">
                    <img src="https://i0.hdslb.com/bfs/album/29b58f5d6aeced815222d463e329deb5920ba363.png">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="">
                    <img src="https://i0.hdslb.com/bfs/album/7bbf8cf2456008da338d226a63bcb8ca0eececf8.jpg">
                  </a>
                  <div class="wechatInner">
                    <img src="https://i0.hdslb.com/bfs/album/8b777d213ab0a2b1e895c3a8ff8af829700cbd69.jpg">
                  </div>
                </li>
              
            
              
                <li class="wechat">
                  <a href="">
                    <img src="https://s2.loli.net/2022/12/11/BkTgL3IMJCG2vn5.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://i0.hdslb.com/bfs/album/ad042223925bbb8c86d546211c7d48cf2513ff60.jpg">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">CCR39の</span>
            <span class="shironeko">LazyNest</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    首页
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    归档
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/%E6%8A%80%E6%9C%AF/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          技术
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E7%94%9F%E6%B4%BB/">
                          <i class="fa fa-file-text-o" aria-hidden="true"></i>
                          生活
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E8%B5%84%E6%BA%90/">
                          <i class="fa fa-cloud-download" aria-hidden="true"></i>
                          资源
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          转载
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    清单
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/%E6%82%A6%E8%AF%BB/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          书单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          番组
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          歌单
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/%E5%9B%BE%E9%9B%86/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          图集
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    留言板
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    友人帐
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/donate/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
                    赞赏
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    关于
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          我？
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          主题
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://images.weserv.nl/?url=https://article.biliimg.com/bfs/new_dyn/c83f4868b2abab30096713bce439bea51865926893.jpg);" src="https://i0.hdslb.com/bfs/album/f6df0a683b73352e3b78523dbe9ccc07e5560899.png" data-src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/new_dyn/c83f4868b2abab30096713bce439bea51865926893.jpg">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      从零开始编写一个浏览器笔记脚本</h1>
      <p class="entry-census">
        <span>
          <a href="https://ccr39.github.io/">
            <img src="https://i0.hdslb.com/bfs/album/31885206e51d953c6cdd9e7fcc4e65e31d884f2e.jpg">
          </a>
        </span>
        <span>
          <a href="https://ccr39.github.io/">ccr39</a>
        </span>
        <span class="bull">
        ·</span>
        2024-12-14<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <p>项目地址：<a target="_blank" rel="noopener" href="https://github.com/ccr39/NicoNote/">ccr39&#x2F;NicoNote: 从零开始编写的浏览器笔记脚本</a></p>
<blockquote>
<p>故事的开始：</p>
<p>在浏览器上学习时时常要记笔记。</p>
<p>在预览网络上已有的各类插件后本人发现，这类插件往往已经长时间失去维护，或需要付费使用。</p>
<p>为什么不自己制作一个有类似功能的脚本呢？</p>
<p>在几乎没有任何理论知识的前提下本人决定实施这个构想。</p>
</blockquote>
<h2 id="一、开始前的准备"><a href="#一、开始前的准备" class="headerlink" title="一、开始前的准备"></a>一、开始前的准备</h2><h3 id="希望实现的功能"><a href="#希望实现的功能" class="headerlink" title="希望实现的功能"></a>希望实现的功能</h3><p>基本功能：</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> <del>能够在网页上编写笔记，并保存在本地。可以在打开网页后显示对应笔记。</del></li>
<li><input checked="" disabled="" type="checkbox"> <del>能够使用 Markdown 语法并实现实时渲染 $\LaTeX$ 。</del></li>
<li><input checked="" disabled="" type="checkbox"> <del>能够导出与导入 Markdown 笔记。</del></li>
<li><input checked="" disabled="" type="checkbox"> <del>能够调整笔记框的大小。</del></li>
</ul>
<p>进阶功能：</p>
<ul>
<li><input disabled="" type="checkbox"> 美化笔记框背景。</li>
<li><input disabled="" type="checkbox"> 可以根据网页中的某条内容链接到笔记的某一部分。</li>
<li><input disabled="" type="checkbox"> 可以根据视频的进度链接到笔记。</li>
<li><input disabled="" type="checkbox"> 自定义笔记框。</li>
<li><input disabled="" type="checkbox"> （待思考）</li>
</ul>
<h3 id="实现方案"><a href="#实现方案" class="headerlink" title="实现方案"></a>实现方案</h3><p>1、使用 <strong>Tampermonkey</strong> 编写基本主体脚本。这需要学习一部分网页前端知识。</p>
<p>2、使用开源的纯前端 Markdown 文字编辑器。</p>
<p>3、利用 <strong>Git</strong> 进行版本控制与脚本的发布。</p>
<h2 id="二、让我们开始吧"><a href="#二、让我们开始吧" class="headerlink" title="二、让我们开始吧"></a>二、让我们开始吧</h2><p>尝试了解 <strong>Tampermonkey</strong>，发现官方文档没有进行汉化，因此翻阅了中文的<a target="_blank" rel="noopener" href="https://learn.scriptcat.org/%E7%AE%80%E4%BB%8B/">油猴开发指南</a>。</p>
<h3 id="1、对头部元数据的理解"><a href="#1、对头部元数据的理解" class="headerlink" title="1、对头部元数据的理解"></a>1、对头部元数据的理解</h3><table>
<thead>
<tr>
<th>元数据</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td><code>@name( :zh-CN :zh-TW :en )</code></td>
<td>脚本的名字(简中，繁中，英文)。</td>
</tr>
<tr>
<td><code>@namespace</code></td>
<td>一般为一个 URL 或自定义的内容，用于脚本管理器在<code>@name</code>相同的情况下识别唯一的脚本</td>
</tr>
<tr>
<td><code>@version</code></td>
<td>脚本的版本。</td>
</tr>
<tr>
<td><code>@author </code></td>
<td>脚本作者。</td>
</tr>
<tr>
<td><code>@description( :zh-CN :zh-YW :en )</code></td>
<td>脚本的描述(简中，繁中，英文)。</td>
</tr>
<tr>
<td><code>@include</code></td>
<td>脚本应该运行的页面， 可以使用<strong>通配符</strong>， 允许多个标签。</td>
</tr>
<tr>
<td><code>@match</code></td>
<td>与@include相似，区别是不可以用通配符，更精确因此更为常用，允许多个标签。</td>
</tr>
<tr>
<td><code>@exclude</code></td>
<td>排除URL，即使它们包含在@include或@match中 ，允许多个标签。</td>
</tr>
<tr>
<td><code>@icon  @iconURL</code> <code>@defaulticon</code></td>
<td>脚本的图标的 URL，会在脚本管理列表上显示。</td>
</tr>
<tr>
<td><code>@icon64</code> <code>@icon64URL</code></td>
<td>64*64 的图标文件的 URL ，可能会在选项中缩放。</td>
</tr>
<tr>
<td><code>@updateURL</code></td>
<td>更新脚本的地址，该URL应该指向一个脚本文件，只需要定期更新该文件即可实现对脚本的更新。注意：只有存在@version标签才会去更新。</td>
</tr>
<tr>
<td><code>@downloadURL</code></td>
<td>定义脚本的下载地址（一般指的是手动安装脚本时的文件）通常和 <code>@updateURL</code> 指向同一文件较常见。</td>
</tr>
<tr>
<td><code>@license</code></td>
<td>用于声明脚本的<strong>许可证类型</strong>。许可证定义了其他人如何使用、修改和分发你的脚本。</td>
</tr>
<tr>
<td><code>@grant</code></td>
<td>声明脚本会用到的<strong>特殊权限或功能</strong>。它决定了脚本是否可以使用某些特定的 API，或者是否可以访问用户脚本管理器提供的功能。可以存在多条</td>
</tr>
<tr>
<td><code>@require</code></td>
<td>指向一个脚本文件，会在本脚本运行前加载并执行</td>
</tr>
<tr>
<td><code>@run-at</code></td>
<td>定义脚本被注入的时间，与其他脚本处理相反，<code>@run-at</code> 定义了脚本要运行的第一可能时间。这意味着，使用<code>@require</code>标记的脚本可能会在文档已加载后执行，因为获取所需脚本花费了很长时间。</td>
</tr>
<tr>
<td><code>@supportURL</code></td>
<td>插件个人支持的地址，用于提交 issue 。</td>
</tr>
<tr>
<td><code>@homepage</code> <code>@homepageURL</code> <code>@website</code>  <code>@source</code></td>
<td>在“选项”页上用于从脚本名链接到给定页的作者主页。请注意，如果@namespace标记以“http:&#x2F;&#x2F;”开头，则其内容也将用于此操作。</td>
</tr>
<tr>
<td><code>@connect</code></td>
<td>用于声明可以与那些外部的域名进行跨域通信，未声明的域名在脚本中将被禁止访问，允许多个标签。可以使用<code>@connect *</code>允许所有域名（不推荐，可能带来安全风险）。</td>
</tr>
</tbody></table>
<p><strong>部分元数据的常用值</strong></p>
<p>①关于<code>@license</code>常见的许可证类型：</p>
<table>
<thead>
<tr>
<th><strong>许可证</strong></th>
<th><strong>作用&#x2F;特点</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>MIT</strong></td>
<td>允许几乎任何使用，包括修改、分发和商业用途，只需保留原作者声明。</td>
</tr>
<tr>
<td><strong>GNU GPL-3.0</strong></td>
<td>允许修改和分发，但要求开源修改后的版本，适合需要保持自由传播的软件。</td>
</tr>
<tr>
<td><strong>Apache-2.0</strong></td>
<td>类似于 MIT，但要求保留通知文件，并保护专利权。</td>
</tr>
<tr>
<td><strong>CC-BY-4.0</strong></td>
<td>允许分享和修改，只需署名原作者，常用于非软件内容。</td>
</tr>
<tr>
<td><strong>Unlicense</strong></td>
<td>放弃所有版权，允许任何用途。</td>
</tr>
<tr>
<td><strong>WTFPL</strong></td>
<td><code>Do What The Fuck You Want To Public License</code>中文译：你他妈的想干嘛就干嘛公共许可证。是一种不太常用的、极度放任的自由软件许可证。它的条款基本等同于贡献到公有领域。</td>
</tr>
<tr>
<td><strong>Custom</strong></td>
<td>自定义声明，允许作者明确指定特殊的版权声明，例如：<code>仅供个人使用，禁止修改传播</code>。</td>
</tr>
</tbody></table>
<p>②<code>@grant</code> 的常用值</p>
<table>
<thead>
<tr>
<th><strong>@grant 值</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>none</code></td>
<td>不授予任何特殊权限，脚本与页面共享相同的全局作用域。</td>
</tr>
<tr>
<td><code>GM_addStyle</code></td>
<td>向页面动态添加 CSS 样式。</td>
</tr>
<tr>
<td><code>GM_getValue</code></td>
<td>从脚本的本地存储中获取数据。</td>
</tr>
<tr>
<td><code>GM_setValue</code></td>
<td>将数据存储到脚本的本地存储中。</td>
</tr>
<tr>
<td><code>GM_deleteValue</code></td>
<td>删除脚本本地存储中的数据。</td>
</tr>
<tr>
<td><code>GM_listValues</code></td>
<td>获取所有存储值的键名列表。</td>
</tr>
<tr>
<td><code>GM_xmlhttpRequest</code></td>
<td>发起跨域的 HTTP 请求（比原生的 <code>XMLHttpRequest</code> 更强大）。</td>
</tr>
<tr>
<td><code>GM_download</code></td>
<td>下载文件到本地。</td>
</tr>
<tr>
<td><code>GM_notification</code></td>
<td>在桌面弹出通知。</td>
</tr>
<tr>
<td><code>GM_openInTab</code></td>
<td>在新标签页中打开一个链接。</td>
</tr>
<tr>
<td><code>GM_registerMenuCommand</code></td>
<td>向用户脚本菜单添加自定义选项。</td>
</tr>
<tr>
<td><code>GM_unregisterMenuCommand</code></td>
<td>删除自定义的菜单选项。</td>
</tr>
<tr>
<td><code>GM_setClipboard</code></td>
<td>将内容复制到系统剪贴板。</td>
</tr>
<tr>
<td><code>GM_info</code></td>
<td>提供有关用户脚本的信息（只读）。</td>
</tr>
</tbody></table>
<p>③<code>@run-at</code>的常用值</p>
<table>
<thead>
<tr>
<th><strong>@run-at 值</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>document-start</code></td>
<td>脚本会被尽可能快地注入</td>
</tr>
<tr>
<td><code>document-body</code></td>
<td>当body元素存在是被注入</td>
</tr>
<tr>
<td><code>document-end</code></td>
<td>当 DOMContentLoaded 事件被触发时或者之后注入</td>
</tr>
<tr>
<td><code>document-idle</code></td>
<td>当 DOMContentLoaded 事件被触发后被注入 如果没有@run-at标签也是在此时注入</td>
</tr>
</tbody></table>
<h3 id="2、目前产生的问题（ChatGPT-解答）"><a href="#2、目前产生的问题（ChatGPT-解答）" class="headerlink" title="2、目前产生的问题（ChatGPT 解答）"></a>2、目前产生的问题（ChatGPT 解答）</h3><h5 id="Q-1：-downloadURL和-updateURL的区别"><a href="#Q-1：-downloadURL和-updateURL的区别" class="headerlink" title="Q.1：@downloadURL和@updateURL的区别"></a><strong>Q.1：@downloadURL和@updateURL的区别</strong></h5><blockquote>
<p>在编写油猴（Tampermonkey 或 Greasemonkey）脚本时，<code>@include</code> 和 <code>@match</code> 是用来定义脚本作用范围的元数据注释。它们的作用类似，但有一些关键区别：</p>
<p><strong>@include</strong></p>
<ul>
<li><p><strong>用途</strong>：匹配指定的 URL 模式，让脚本在符合模式的页面上运行。</p>
</li>
<li><p><strong>语法</strong>：支持通配符（*），简单易用。</p>
<ul>
<li><p><code>*</code>：匹配任意字符。</p>
</li>
<li><p>示例：</p>
<pre><code class="javascript"> // 脚本会在所有以 &quot;https://example.com/&quot; 开头的页面上运行
@include https://example.com/*
</code></pre>
</li>
</ul>
</li>
<li><p>匹配示例：</p>
<ul>
<li><pre><code>https://example.com/*
</code></pre>
<p> 可以匹配：</p>
<ul>
<li><code>https://example.com/page1</code></li>
</ul>
</li>
<li><p><code>https://example.com/page2</code></p>
</li>
<li><p>通配符 *也可以放在中间或末尾，如：</p>
<ul>
<li><code>https://*.example.com/*</code> 匹配所有子域名。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>@match</strong></p>
<ul>
<li><p><strong>用途</strong>：更严格地匹配 URL 模式，符合 URL 模式规范。</p>
</li>
<li><p><strong>语法</strong>：不支持简单的 * 通配符定义所有，而是更精确的匹配规则。</p>
<ul>
<li><p>但可以使用通配符 <code>*</code> 匹配子域名或协议。</p>
</li>
<li><p>示例：</p>
<pre><code> javascript复制代码// 脚本会在 https://example.com 的所有页面运行
@match https://example.com/*
</code></pre>
</li>
</ul>
<pre><code>
</code></pre>
</li>
<li><p>匹配示例：</p>
<ul>
<li><pre><code>https://*.example.com/*
</code></pre>
<p> 可以匹配：</p>
<ul>
<li><code>https://sub.example.com/page</code></li>
</ul>
</li>
<li><p><code>https://another.example.com/page</code></p>
</li>
</ul>
</li>
<li><p>但不会匹配：</p>
<ul>
<li><code>http://example.com</code>（因为协议不同）。</li>
</ul>
</li>
</ul>
<p><strong>关键区别</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th><code>@include</code></th>
<th><code>@match</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>灵活性</strong></td>
<td>支持简单通配符，较宽松</td>
<td>严格匹配 URL，符合标准规范</td>
</tr>
<tr>
<td><strong>安全性</strong></td>
<td>容易出现误匹配</td>
<td>更严格，减少误匹配的风险</td>
</tr>
<tr>
<td><strong>协议要求</strong></td>
<td>可以省略协议</td>
<td>必须指定协议（<code>http://</code> 或 <code>https://</code>）</td>
</tr>
<tr>
<td><strong>兼容性</strong></td>
<td>旧版脚本可能使用更多</td>
<td>推荐使用，符合现代浏览器扩展规范</td>
</tr>
</tbody></table>
<p><strong>使用建议</strong></p>
<ol>
<li>如果需要快速定义作用域，且 URL 规则较简单，可以使用 <code>@include</code>。</li>
<li>如果需要更安全、更准确的匹配，建议使用 <code>@match</code>，特别是在现代浏览器扩展环境下。</li>
</ol>
<blockquote>
<p>现代浏览器和 Tampermonkey 都更推荐使用 <code>@match</code>，因为它的匹配规则符合浏览器扩展的标准。</p>
</blockquote>
<p><strong>个人总结</strong></p>
<p>两者用来将脚本应用到所有的页面，应分别如下写：</p>
<p><code>@match        *://*/*</code></p>
<p><code>@include	   *</code></p>
</blockquote>
<h5 id="Q-2：什么是-DOMContentLoaded-事件？"><a href="#Q-2：什么是-DOMContentLoaded-事件？" class="headerlink" title="Q.2：什么是 DOMContentLoaded 事件？"></a>Q.2：什么是 DOMContentLoaded 事件？</h5><blockquote>
<p><code>DOMContentLoaded</code> 是一个常见的 JavaScript 事件，用于监听 HTML 文档的加载状态。当浏览器解析完所有的 HTML 并构建完成 DOM 树时，就会触发 <code>DOMContentLoaded</code> 事件，而无需等待其他资源（如图片、样式表和脚本文件）的加载完成。</p>
<p><strong>特点</strong></p>
<ol>
<li><strong>触发时机</strong>：当 HTML 文档被完全加载和解析完成时（即 DOM 树构建完成）。</li>
<li><strong>不等待其他资源</strong>：与 <code>window.onload</code> 不同，<code>DOMContentLoaded</code> 不需要等待图片、样式表、iframe 等资源加载完成后才触发。</li>
<li><strong>适用于操作 DOM</strong>：在该事件触发时，DOM 已经可用，因此适合初始化页面内容或操作 DOM 元素。</li>
</ol>
<p><strong>用法</strong></p>
<p>监听 <code>DOMContentLoaded</code> 的方法有以下几种：</p>
<p><strong>1. 使用 <code>addEventListener</code></strong></p>
<pre><code class="javascript">document.addEventListener(&quot;DOMContentLoaded&quot;, function() &#123;
    console.log(&quot;DOM 已完全加载并解析&quot;);
   // 可以安全地操作 DOM 元素
    document.body.style.backgroundColor = &quot;lightblue&quot;;
&#125;);
</code></pre>
<p><strong>2. 使用旧的 <code>onreadystatechange</code></strong></p>
<p>早期浏览器中，可以通过 <code>readyState</code> 属性判断文档是否加载完成：</p>
<pre><code class="javascript">document.onreadystatechange = function() &#123;
    if (document.readyState === &quot;interactive&quot;) &#123;
       console.log(&quot;DOM 已完全加载并解析&quot;);
    &#125;
&#125;;
</code></pre>
<p><strong>3. 直接在脚本末尾执行</strong></p>
<p>如果你的脚本放在文档的底部（<code>&lt;/body&gt;</code>标签之前），可以不显式监听 <code>DOMContentLoaded</code>，因为此时 DOM 已经解析完成：</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello, World!&lt;/h1&gt;
    &lt;script&gt;
        console.log(document.querySelector(&quot;h1&quot;).textContent); // &quot;Hello, World!&quot;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong><code>DOMContentLoaded</code> 和 <code>window.onload</code> 的区别</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th><code>DOMContentLoaded</code></th>
<th><code>window.onload</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>触发时机</strong></td>
<td>DOM 树构建完成（HTML 已加载并解析）。</td>
<td>页面所有资源（包括图片、样式等）加载完成。</td>
</tr>
<tr>
<td><strong>是否等待外部资源</strong></td>
<td>不等待外部资源加载完成。</td>
<td>等待所有外部资源加载完成。</td>
</tr>
<tr>
<td><strong>使用场景</strong></td>
<td>初始化 DOM 操作或页面功能。</td>
<td>确保所有资源可用（如图片尺寸）。</td>
</tr>
</tbody></table>
<p><strong>示例：两者对比</strong></p>
<pre><code class="javascript">document.addEventListener(&quot;DOMContentLoaded&quot;, function() &#123;
    console.log(&quot;DOM 已加载完成，但图片可能还在加载中&quot;);
&#125;);

window.addEventListener(&quot;load&quot;, function() &#123;
    console.log(&quot;页面所有资源加载完成，包括图片和样式&quot;);
&#125;);
</code></pre>
<p><strong>浏览器支持</strong></p>
<p><code>DOMContentLoaded</code> 是一个标准事件，现代浏览器（包括 IE9+）都完全支持。</p>
<p><strong>使用建议</strong></p>
<ul>
<li><strong>推荐场景</strong>：如果你的脚本只需要操作 DOM 元素（如添加事件监听器或修改内容），优先使用 <code>DOMContentLoaded</code>，因为它比 <code>window.onload</code> 更早触发。</li>
<li><strong>性能优化</strong>：通过监听 <code>DOMContentLoaded</code>，可以更快地响应用户交互，而无需等待所有资源加载完成。</li>
</ul>
</blockquote>
<h5 id="Q-3：什么是DOM树？"><a href="#Q-3：什么是DOM树？" class="headerlink" title="Q.3：什么是DOM树？"></a><strong>Q.3：什么是DOM树？</strong></h5><p><strong>DOM 树</strong>（Document Object Model Tree）是浏览器在加载和解析 HTML 文档时，根据 HTML 的层级结构生成的一种<strong>树形数据结构</strong>。它表示了文档的结构以及每个节点之间的关系，使得 JavaScript 可以通过 DOM API 操作页面内容和结构。</p>
<blockquote>
<p><strong>DOM 树的组成</strong></p>
<p>DOM 树由以下几种节点组成，每个节点代表 HTML 文档的一部分：</p>
<ol>
<li><strong>文档节点（Document Node）</strong>：<ul>
<li>表示整个 HTML 文档的根节点。</li>
<li>通过 JavaScript 的 <code>document</code> 对象访问。</li>
</ul>
</li>
<li><strong>元素节点（Element Nodes）</strong>：<ul>
<li>表示 HTML 的元素标签，例如 <code>&lt;div&gt;</code>、<code>&lt;p&gt;</code>。</li>
<li>元素节点可以嵌套形成层级结构。</li>
</ul>
</li>
<li><strong>属性节点（Attribute Nodes）</strong>：<ul>
<li>表示 HTML 元素的属性，例如 <code>id=&quot;example&quot;</code>。</li>
<li>属性是元素节点的一部分，但在 DOM 树中不是子节点，而是直接附属于对应的元素节点。</li>
</ul>
</li>
<li><strong>文本节点（Text Nodes）</strong>：<ul>
<li>表示元素或属性中的文本内容。</li>
<li>文本节点始终是叶节点，没有子节点。</li>
</ul>
</li>
<li><strong>注释节点（Comment Nodes）</strong>：<ul>
<li>表示 HTML 文档中的注释内容。</li>
</ul>
</li>
</ol>
<p><strong>DOM 树的结构</strong></p>
<p>以以下 HTML 代码为例：</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Example&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1 id=&quot;header&quot;&gt;Hello, World!&lt;/h1&gt;
    &lt;p&gt;Welcome to DOM.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>对应的 DOM 树结构如下：</p>
<pre><code class="bash">Document
 └── html
      ├── head
      │     └── title
      │           └── &quot;Example&quot;
      └── body
            ├── h1
            │     ├── Attribute: id=&quot;header&quot;
            │     └── &quot;Hello, World!&quot;
            └── p
                  └── &quot;Welcome to DOM.&quot;
</code></pre>
<p><strong>DOM 树的特点</strong></p>
<ol>
<li><strong>层级关系</strong>：</li>
</ol>
<ul>
<li>HTML 文档的嵌套结构会在 DOM 树中反映为父子关系。</li>
<li>每个 HTML 元素是一个节点，嵌套关系形成了树状层级。</li>
</ul>
<ol start="2">
<li><strong>节点类型</strong>：<ul>
<li>可以通过 <code>nodeType</code> 属性查看节点类型，例如：<ul>
<li><code>1</code>：元素节点</li>
<li><code>3</code>：文本节点</li>
<li><code>8</code>：注释节点</li>
</ul>
</li>
</ul>
</li>
<li><strong>可遍历</strong>：<ul>
<li>DOM 树中的节点可以通过 JavaScript 遍历，例如 <code>parentNode</code>、<code>childNodes</code>、<code>nextSibling</code> 等。</li>
</ul>
</li>
</ol>
<p><strong>常见操作</strong></p>
<ol>
<li><p><strong>获取节点</strong>：</p>
<pre><code class="javascript"> const header = document.getElementById(&quot;header&quot;); // 获取 h1 元素
const paragraphs = document.getElementsByTagName(&quot;p&quot;); // 获取所有 &lt;p&gt; 元素
</code></pre>
</li>
</ol>
<pre><code>2. **修改节点内容**：

 ```javascript
const header = document.getElementById(&quot;header&quot;);
 header.textContent = &quot;Hello, DOM!&quot;;
</code></pre>
<ol start="3">
<li><p><strong>添加新节点</strong>：</p>
<pre><code class="javascript"> const newDiv = document.createElement(&quot;div&quot;);
newDiv.textContent = &quot;This is a new div.&quot;;
 document.body.appendChild(newDiv);
</code></pre>
</li>
<li><p><strong>删除节点</strong>：</p>
<pre><code class="javascript"> const header = document.getElementById(&quot;header&quot;);
header.remove();
</code></pre>
</li>
</ol>
<pre><code>**DOM 树的作用**

1. **页面动态交互**：通过操作 DOM 树，可以动态修改页面的结构和内容。
2. **事件绑定**：JavaScript 事件处理器通过 DOM 树关联 HTML 元素。
3. **样式动态调整**：通过修改 DOM 节点的样式属性实现动态效果。

**总结**

DOM 树是 HTML 文档在浏览器中的表示形式，它将 HTML 结构化为可以用 JavaScript 操作的对象模型。熟练掌握 DOM 树和相关操作是前端开发的基础。
</code></pre>
</blockquote>
<p>2024&#x2F;12&#x2F;8</p>
<hr>
<h3 id="3、Hello-World"><a href="#3、Hello-World" class="headerlink" title="3、Hello World"></a>3、Hello World</h3><p>在头部元数据下方标注了书写代码的地方。</p>
<pre><code class="javascript">(function() &#123;
    &#39;use strict&#39;;

// Your code here...

&#125;)();
</code></pre>
<p>根据文档描述，脚本的书写应该使用<code>JavaScript</code>。</p>
<p>利用<code>alert()</code>弹出一个对话框，并输出 HelloWorld，并使用<code>@include *</code>将其应用到所有页面。</p>
<pre><code class="javascript">// ==UserScript==
//@name    a_simple_test
//@include *
// ==/UserScript==
(function() &#123;
    &#39;use strict&#39;;
    alert(&#39;HelloWorld&#39;)
// Your code here...

&#125;)();
</code></pre>
<p>这样，在打开任意网站后，都会弹出一个 HelloWorld 的对话框。</p>
<h3 id="4、熟悉-JavaScript-的语法"><a href="#4、熟悉-JavaScript-的语法" class="headerlink" title="4、熟悉  JavaScript  的语法"></a>4、熟悉  JavaScript  的语法</h3><p>在<a target="_blank" rel="noopener" href="https://www.runoob.com/js/js-howto.html">JavaScript 用法 | 菜鸟教程</a>中了解JS的基本用法。</p>
<p>在此出现的问题：</p>
<h5 id="Q-4：之前-HelloWorld-脚本中的alert-39-HelloWorld-39-末尾没有分号，这种写法是否合法？"><a href="#Q-4：之前-HelloWorld-脚本中的alert-39-HelloWorld-39-末尾没有分号，这种写法是否合法？" class="headerlink" title="Q.4：之前 HelloWorld 脚本中的alert(&#39;HelloWorld&#39;)末尾没有分号，这种写法是否合法？"></a><strong>Q.4：之前 HelloWorld 脚本中的<code>alert(&#39;HelloWorld&#39;)</code>末尾没有分号，这种写法是否合法？</strong></h5><blockquote>
<p>是合法的！在 JavaScript 中，分号（<code>;</code>）是<strong>可选的</strong>，因为 JavaScript 有一个<strong>自动分号插入（Automatic Semicolon Insertion, ASI）</strong>的机制。在大多数情况下，即使你省略了分号，JavaScript 引擎也会根据上下文自动插入。</p>
<p><strong>解释代码中的 <code>alert(&#39;HelloWorld&#39;)</code></strong></p>
<p>在以下代码中：</p>
<pre><code class="javascript">alert(&#39;HelloWorld&#39;)
</code></pre>
<p>即使没有写分号，JavaScript 引擎仍然能正确解析，因为：</p>
<ol>
<li><p><code>alert(&#39;HelloWorld&#39;)</code> 是一个独立的语句。</p>
</li>
<li><p>ASI 机制会在行末自动插入分号，等效于：</p>
<pre><code class="javascript"> alert(&#39;HelloWorld&#39;);
</code></pre>
</li>
</ol>
<p>因此，这种省略分号的写法是合法的。</p>
<p><strong>什么时候分号是必要的？</strong></p>
<p>尽管 ASI 机制可以避免大部分语法错误，但在某些特定情况下，<strong>省略分号可能导致意外行为</strong>。例如：</p>
<p>情况 1：行首是 <code>[</code> 或 <code>(</code> 的表达式</p>
<pre><code class="javascript">let a = 5
[1, 2, 3].forEach(x =&gt; console.log(x))
</code></pre>
<p>在这种情况下，JavaScript 会将 <code>[1, 2, 3]</code> 视为数组访问器，而不是独立的数组字面量。</p>
<p>解决方法：</p>
<pre><code class="javascript">let a = 5;
[1, 2, 3].forEach(x =&gt; console.log(x));
</code></pre>
<p>情况 2：返回值与表达式在不同行</p>
<pre><code class="javascript">function test() &#123;
    return
   &#123;
        value: 42
    &#125;
&#125;
console.log(test()) // undefined
</code></pre>
<p>在这种情况下，<code>return</code> 语句后自动插入了分号，因此实际返回的是 <code>undefined</code>。</p>
<p>解决方法：</p>
<pre><code class="javascript">function test() &#123;
    return &#123;
       value: 42
    &#125;;
&#125;
</code></pre>
<p><strong>建议</strong></p>
<ol>
<li><strong>始终使用分号</strong>：虽然 JavaScript 的 ASI 机制可以省略分号，但为了代码的可读性和避免潜在的错误，建议显式添加分号。</li>
<li><strong>遵循团队规范</strong>：如果项目使用了某种代码风格（如 Airbnb 或 Standard），遵循其规范（例如 Standard JS 就不使用分号）。</li>
<li><strong>工具辅助</strong>：使用代码检查工具（如 ESLint）和格式化工具（如 Prettier）来统一代码风格。</li>
</ol>
<p><strong>结论</strong></p>
<p>在你的脚本中，省略 <code>alert(&#39;HelloWorld&#39;)</code> 的分号是合法的，且能正确运行。不过，养成显式添加分号的习惯会更安全、更规范。</p>
</blockquote>
<h3 id="5、（番外）为插件创作一个图标"><a href="#5、（番外）为插件创作一个图标" class="headerlink" title="5、（番外）为插件创作一个图标"></a>5、（番外）为插件创作一个图标</h3><p>使用 ChatGPT 绘制一个笔记本的图标，将其转换为64*64大小。</p>
<p>使用 <a target="_blank" rel="noopener" href="https://www.jyshare.com/more/svgeditor/">SVG 在线编辑器 | 菜鸟工具</a> 将其转化为矢量图形，并使其可以用代码表示出来。</p>
<p>发现 ChatGPT 绘制的图形不是纯色图形，会导致代码过长，故放弃使用 ChatGPT 绘制的图形，转而使用网络上公开的资源，使用 SVG 工具将其稍加修改。</p>
<p>接下来，将其转换为可以直接在<code>@icon</code>后使用的格式，即 <strong>Data URI</strong> 格式。使用在线工具<a target="_blank" rel="noopener" href="https://uutool.cn/svg2datauri/">在线SVG转DataURL - UU在线工具</a>自动转化。</p>
<h3 id="6、创建一个唤出笔记本的标识"><a href="#6、创建一个唤出笔记本的标识" class="headerlink" title="6、创建一个唤出笔记本的标识"></a>6、创建一个唤出笔记本的标识</h3><p>我们需要一个拥有以下功能的标识：</p>
<ul>
<li>在浏览器页面的边框处，并始终位于页面最上方。</li>
<li>点击后会唤出笔记本。</li>
<li>拥有一些简单的动画效果。</li>
<li>随页面滚动时不改变标识的位置。</li>
</ul>
<p>首先要知道如何使用 JavaScript 创建并插入 HTML 元素。</p>
<p>查阅了<a target="_blank" rel="noopener" href="https://www.cainiaojc.com/jsref/elem_insertadjacenthtml.html">HTML DOM insertAdjacentHTML() 方法 - 菜鸟教程</a>，<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-document-queryselector.html">HTML DOM querySelector() 方法 | 菜鸟教程</a>。</p>
<pre><code class="JS">document.querySelector(&quot;body&quot;).insertAdjacentHTML(&quot;afterend&quot;, &quot;&lt;div&gt;&lt;p&gt;Hello world&lt;/p&gt;&lt;/div&gt;&quot;);
//表示在&lt;body&gt;元素后插入&lt;div&gt;元素。先用querySelector()获取&lt;body&gt;元素的document，再用insertAdjacentHTML(,)插入元素。
</code></pre>
<p>现在我们要将这个元素置于我们希望它存在的位置，为此，我们需要了解如何利用脚本改变元素的 CSS 样式，以及如何书写 CSS。</p>
<p>设置位置查阅的资料：<a target="_blank" rel="noopener" href="https://www.runoob.com/cssref/pr-class-position.html">CSS position 属性 | 菜鸟教程</a>、<a target="_blank" rel="noopener" href="https://www.runoob.com/cssref/pr-pos-bottom.html">CSS bottom 属性 | 菜鸟教程</a>、<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/f3ad7d0fa974c749c3345bff.html#">使用css，如何把div设置为圆形-百度经验</a>、<a target="_blank" rel="noopener" href="https://www.runoob.com/cssref/pr-border.html">CSS border 属性 | 菜鸟教程</a></p>
<pre><code class="JS">    document.querySelector(&quot;body&quot;).insertAdjacentHTML(&quot;afterbegin&quot;,&#39;&lt;div id=&quot;nicoBt&quot;&gt;&lt;p&gt;helloworld&lt;/&gt;&lt;/div&gt;&#39;);
    //表示在&lt;body&gt;元素后插入&lt;div&gt;元素
    var nicoButton = document.getElementById(&quot;nicoBt&quot;);
    //var 表示定义变量，根据getElementById()利用id找到&lt;div&gt;元素
    var nicoButtonStyle = &quot;\
    position: fixed;\
    right: 1%;\
    bottom:80%;\
    width: 44px;\
    height: 44px;\
    border: 2px solid #D3D3D3;\
    border-radius: 50%;\
    background: rgb(0, 127, 255);\
    z-index: 2147483647;\
    &quot;;
    //第一句表示依照浏览器边框定位，right与bottom定义位置，width与height定义长宽，border用于定义边框，border-radius用于实现圆形效果,z-index定义了元素的图层高度，设置一个很大的数字可以保证其置于其他图像上方。
    //定义&lt;div&gt;元素的CSS样式，输入字符串时进行换行操作,在每行末尾加上\
    //末尾的;可加可不加
    nicoButton.setAttribute(&quot;style&quot;,nicoButtonStyle);
    //setAttribute(,)可以改变元素属性，用来改变nicoButton的CSS样式
</code></pre>
<p>现在我们把这个<div>元素改写为一个按钮，把图标插入进去。</p>
<pre><code class="JS">var htmlNicoButton = &#39;\
&lt;div id=&quot;nicoBt&quot;&gt;\
        &lt;img src=&quot;图标URL&quot;&gt;\
&lt;/div&gt;\
&#39;;
document.querySelector(&quot;body&quot;).insertAdjacentHTML(&quot;afterbegin&quot;,htmlNicoButton);
//以下略
</code></pre>
<p>2024&#x2F;12&#x2F;9</p>
<hr>
<pre><code class="CSS">    position: absolute;/*使用相对位置*/
    top: 50%;/*竖直方向上一半*/
    left: 50%;/*水平方向上一半*/
    transform: translate(-50%, -50%);/*x,y方向上均往回移动自身的一般*/
</code></pre>
<p>使用上面的方法把图像居中，参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/cssref/css3-pr-transform.html">CSS3 transform 属性 | 菜鸟教程</a></p>
<p>发现存在<code>&lt;iframe&gt;</code>时会添加很多的标识，希望只在主页面添加，加上判断：</p>
<pre><code class="JS">    if (window.self === window.top) &#123;
        document.querySelector(&quot;body&quot;).insertAdjacentHTML(&quot;afterend&quot;,htmlNicoButton);
    &#125;
</code></pre>
<p>参考了<a target="_blank" rel="noopener" href="https://www.runoob.com/js/js-comparisons.html">JavaScript 比较和逻辑运算符 | 菜鸟教程</a>、<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/prop-win-self.html">Window self 属性 | 菜鸟教程</a></p>
<p>下面我们要让鼠标悬停在标识上方时有一定的反馈效果，这里利用了<code>addEventListener()</code>设置两个效果，参考了<a target="_blank" rel="noopener" href="https://www.runoob.com/jsref/met-document-addeventlistener.html">HTML DOM addEventListener() 方法 | 菜鸟教程</a>。</p>
<pre><code class="js">    nicoButton.addEventListener(&quot;mouseover&quot;, function () &#123; //光标移动到图标上，执行函数
        nicoButton.style.width = &quot;55px&quot;;
        nicoButton.style.height = &quot;55px&quot;;
        //大小改变
        nicoButton.style.cursor = &quot;pointer&quot;;
        //鼠标光标从箭头改编为小手
    &#125;);

    nicoButton.addEventListener(&quot;mouseout&quot;, function () &#123; //光标移开
        nicoButton.style.width = &quot;48px&quot;;
        nicoButton.style.height = &quot;48px&quot;;
        nicoButton.style.cursor = &quot;&quot;;
        //变回
    &#125;);
</code></pre>
<h3 id="7、创建一个容器"><a href="#7、创建一个容器" class="headerlink" title="7、创建一个容器"></a>7、创建一个容器</h3><p>创建一个<div>作为我们的笔记本的容器：</p>
<pre><code class="js">    var nicoNoteDiv = document.createElement(&quot;div&quot;);//这里用document.creatElement()创建元素。ps.比最开始进步了
    nicoNoteDiv.setAttribute(&quot;id&quot;,&quot;nicoNoteDiv&quot;);
</code></pre>
<p>用点击事件呼出编辑框，并让图标不透明度降低（参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43205326/article/details/110207160">css中让元素消失的方法_transition visibility 无效-CSDN博客</a>）：</p>
<pre><code class="js">    nicoButton.addEventListener(&quot;click&quot;, function () &#123;
     document.querySelector(&quot;html&quot;).appendChild(nicoNoteDiv);//用点击事件呼出编辑框,添加在 nicoBt 后面
     nicoButton.style.opacity=&quot;0.3&quot;; //图标不透明度降低
    &#125;);
//这里用 elementA.appendChild(elemenetB)：表明在A内最后添加B元素
</code></pre>
<p>下面我们来设计这个<code>nicoNoteDiv</code>除了最基本的长宽位置之外，我们希望它可以允许自己通过拖拽调节大小和位置（似乎略有些麻烦）。</p>
<p>2024&#x2F;12&#x2F;10</p>
<hr>
<p>2024&#x2F;12&#x2F;11 去医院了，还被坑了，详情请见：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/12090143389">只身陷入心理治疗骗局！！深扒“SCIO全科生物反馈测疗仪”与“心理AI智能检测”底裤。 - 知乎</a></p>
<hr>
<h4 id="①拖拽调节位置"><a href="#①拖拽调节位置" class="headerlink" title="①拖拽调节位置"></a>①拖拽调节位置</h4><p>为了使其可以调节自身位置和大小，我们应该从两方考虑：</p>
<ol>
<li>CSS 角度，在鼠标靠近<div>边缘时，光标应该发生变化。</li>
<li>JS 角度，根据鼠标光标的坐标改变<div>的大小。</li>
</ol>
<p>为了实现上述操作，我们考虑把存放笔记本主体的<div>和调整大小的<div>分开，外层仅仅实现拖拽功能，内层为主体。</p>
<h5 id="Q-5-在查询资料时发现的-gt-是什么意思"><a href="#Q-5-在查询资料时发现的-gt-是什么意思" class="headerlink" title="Q.5:在查询资料时发现的() =&gt; {}是什么意思?"></a><strong>Q.5:在查询资料时发现的<code>() =&gt; &#123;&#125;</code>是什么意思?</strong></h5><blockquote>
<p><code>(e) =&gt; &#123;&#125;</code> 是 JavaScript 中的箭头函数语法，是定义函数的一种简洁方式。它可以用来代替传统的 <code>function</code> 声明。</p>
<p><strong>语法</strong></p>
<pre><code>(param1, param2, ...) =&gt; &#123; // 函数体 &#125;
</code></pre>
<p><strong>分解理解 <code>(e) =&gt; &#123;&#125;</code></strong></p>
<ol>
<li><strong>箭头函数</strong>：<ul>
<li><code>=&gt;</code> 是箭头函数的核心，表示这是一个函数。</li>
</ul>
</li>
<li>**参数 <code>(e)</code>**：</li>
</ol>
<ul>
<li><code>e</code> 是箭头函数的参数。它通常代表事件对象，尤其是在事件处理程序中，比如 <code>addEventListener</code>。</li>
</ul>
<ol start="3">
<li>**函数体 <code>&#123;&#125;</code>**：</li>
</ol>
<ul>
<li><code>&#123;&#125;</code> 包含函数执行的代码。</li>
</ul>
<p><strong>完整例子</strong></p>
<p>以下是一个常见的使用场景：</p>
<p><strong>传统函数写法</strong></p>
<pre><code class="javascript">document.addEventListener(&quot;click&quot;, function(e) &#123;
    console.log(&quot;鼠标点击了页面&quot;, e);
&#125;);
</code></pre>
<p><strong>箭头函数写法</strong></p>
<pre><code class="javascript">document.addEventListener(&quot;click&quot;, (e) =&gt; &#123;
    console.log(&quot;鼠标点击了页面&quot;, e);
&#125;);
</code></pre>
<p><strong>简化规则</strong></p>
<ol>
<li><p><strong>参数简写</strong>：</p>
<ul>
<li><p>如果只有一个参数，可以省略括号 ()</p>
<pre><code class="JS">e =&gt; console.log(e);
</code></pre>
</li>
<li><p>如果没有参数或有多个参数，则必须使用括号。</p>
<pre><code class="javascript"> () =&gt; console.log(&quot;无参数&quot;);
(x, y) =&gt; console.log(x + y);
</code></pre>
</li>
</ul>
<pre><code>
</code></pre>
</li>
<li><p><strong>函数体简写</strong>：</p>
<ul>
<li>如果函数体只有一行代码，且直接返回值，可以省略 {} 和 return</li>
</ul>
<pre><code class="javascript">x =&gt; x * x; // 返回 x 的平方
</code></pre>
</li>
</ol>
<p><strong>优势</strong></p>
<ul>
<li><strong>简洁</strong>：语法更短，易读。</li>
<li><strong>自动绑定上下文</strong>：箭头函数不会创建自己的 <code>this</code>，而是继承自外层作用域。</li>
</ul>
<p><strong>例子：箭头函数绑定上下文</strong></p>
<pre><code class="javascript">function Example() &#123;
    this.name = &quot;箭头函数示例&quot;;
    document.addEventListener(&quot;click&quot;, () =&gt; &#123;
       console.log(this.name); // 指向 Example 实例
    &#125;);
&#125;
new Example();
</code></pre>
<p><strong>对比传统函数</strong></p>
<table>
<thead>
<tr>
<th>特性</th>
<th>箭头函数</th>
<th>普通函数</th>
</tr>
</thead>
<tbody><tr>
<td>语法简洁</td>
<td>是</td>
<td>否</td>
</tr>
<tr>
<td><code>this</code> 指向</td>
<td>继承外层作用域</td>
<td>动态绑定，取决于调用位置</td>
</tr>
<tr>
<td>使用场景</td>
<td>回调函数、简单逻辑</td>
<td>需要动态绑定 <code>this</code> 的复杂场景</td>
</tr>
</tbody></table>
<p>箭头函数非常适合在事件处理、数组操作等回调中使用，但如果需要灵活绑定 <code>this</code>，普通函数可能更适合。</p>
</blockquote>
<p><strong>先实现较简单的拖拽：</strong></p>
<p>首先我们应该想办法获取鼠标的光标坐标，可以利用<code>addEventListener</code>监听<code>mousemove</code>事件，再将生成的<code>MouseEvent</code> 对象传入参数，提取<code>clientX</code> 和 <code>clientY</code>的信息。</p>
<p>关于这一过程的具体原理 Chat GPT 回答如下：</p>
<blockquote>
<p>在以下代码中：</p>
<pre><code class="javascript">document.addEventListener(&#39;mousemove&#39;, (event) =&gt; &#123; 
const &#123; clientX, clientY &#125; = event;
console.log(`鼠标X坐标: $&#123;clientX&#125;, 鼠标Y坐标: $&#123;clientY&#125;`);//console.log（）用于把信息输出到工作台。$&#123;&#125;表示在字符串中插入函数或变量。
&#125;);
</code></pre>
<p>事件参数 <code>event</code> 的捕捉和传递机制：</p>
<ol>
<li><strong>事件监听器的注册</strong>：<ul>
<li><code>document.addEventListener(&#39;mousemove&#39;, callback)</code> 将事件监听器绑定到 <code>document</code> 上，用于监听 <code>mousemove</code> 事件。</li>
<li>当用户移动鼠标时，浏览器会触发 <code>mousemove</code> 事件。</li>
</ul>
</li>
<li><strong>事件对象的生成</strong>：<ul>
<li>浏览器在触发事件时，会生成一个 <code>Event</code> 对象。对于 <code>mousemove</code> 事件，生成的对象是一个 <code>MouseEvent</code> 实例，它继承了 <code>Event</code> 的所有属性和方法，同时还包含鼠标相关的属性，比如 <code>clientX</code> 和 <code>clientY</code>。</li>
</ul>
</li>
<li><strong>事件对象的传递</strong>：<ul>
<li>当事件触发时，浏览器会将生成的 <code>MouseEvent</code> 对象作为参数传递给监听器中定义的回调函数 <code>(event) =&gt; &#123; ... &#125;</code>。</li>
</ul>
</li>
<li><strong>解构赋值</strong>：<ul>
<li>在回调函数中，通过 <code>const &#123; clientX, clientY &#125; = event;</code> 使用了<strong>解构赋值</strong>，从 <code>event</code> 对象中提取 <code>clientX</code> 和 <code>clientY</code> 属性值，代表鼠标指针相对于视口左上角的 X 和 Y 坐标。</li>
</ul>
</li>
<li><strong>输出结果</strong>：<ul>
<li>提取到的坐标值会被插入到字符串中，并通过 <code>console.log</code> 输出到控制台。</li>
</ul>
</li>
</ol>
<p>总结： 浏览器自动生成事件对象并将其作为参数传递给事件回调函数。你只需定义回调函数的参数名称（这里是 <code>event</code>），浏览器会负责传递这个对象。</p>
<p>MouseEvent实例中还有那些属性？</p>
<p><code>MouseEvent</code> 是由浏览器生成的事件对象，专门用于表示与鼠标操作相关的事件（例如 <code>click</code>、<code>mousemove</code>、<code>mousedown</code> 等）。它继承自 <code>UIEvent</code>，并进一步继承自 <code>Event</code>。<code>MouseEvent</code> 实例包含许多有用的属性，用于描述鼠标事件的详细信息。</p>
<p>以下是 <code>MouseEvent</code> 的主要属性：</p>
<p><strong>鼠标位置信息</strong></p>
<ul>
<li>**<code>clientX</code>**：鼠标指针相对于浏览器视口（窗口）左边缘的 X 坐标。</li>
<li>**<code>clientY</code>**：鼠标指针相对于浏览器视口（窗口）顶部的 Y 坐标。</li>
<li>**<code>screenX</code>**：鼠标指针相对于屏幕左边缘的 X 坐标。</li>
<li>**<code>screenY</code>**：鼠标指针相对于屏幕顶部的 Y 坐标。</li>
<li>**<code>pageX</code>**：鼠标指针相对于整个文档左边缘的 X 坐标（包括页面滚动距离）。</li>
<li>**<code>pageY</code>**：鼠标指针相对于整个文档顶部的 Y 坐标（包括页面滚动距离）。</li>
<li>**<code>offsetX</code>**：鼠标指针相对于事件目标元素左边缘的 X 坐标。</li>
<li>**<code>offsetY</code>**：鼠标指针相对于事件目标元素顶部的 Y 坐标。</li>
</ul>
<p><strong>鼠标按键信息</strong></p>
<ul>
<li><code>button</code>：</li>
<li>触发事件的鼠标按键的代码：<ul>
<li><code>0</code>：主按钮（通常是左键）</li>
<li><code>1</code>：中间按钮（滚轮）</li>
<li><code>2</code>：次按钮（通常是右键）</li>
</ul>
</li>
<li><code>buttons</code>：<ul>
<li>一个按位标记的数字，表示当前按下的鼠标按钮：<ul>
<li><code>1</code>：左键</li>
<li><code>2</code>：右键</li>
<li><code>4</code>：中键 （可以组合，如同时按下左键和右键时值为 <code>3</code>）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>键盘修饰键状态</strong></p>
<p>这些属性表示事件发生时是否按下了修饰键：</p>
<ul>
<li>**<code>altKey</code>**：<code>true</code> 表示 <code>Alt</code> 键被按下。</li>
<li>**<code>ctrlKey</code>**：<code>true</code> 表示 <code>Ctrl</code> 键被按下。</li>
<li>**<code>metaKey</code>**：<code>true</code> 表示 <code>Meta</code> 键被按下（Mac 上为 <code>Command</code> 键）。</li>
<li>**<code>shiftKey</code>**：<code>true</code> 表示 <code>Shift</code> 键被按下。</li>
</ul>
<p><strong>拖放和相关元素</strong></p>
<ul>
<li><code>relatedTarget</code>：<ul>
<li>对于某些事件（如 <code>mouseover</code> 和 <code>mouseout</code>），表示鼠标从哪个元素移入&#x2F;移出。</li>
</ul>
</li>
<li><code>target</code>：</li>
<li>事件的目标元素。</li>
<li><code>currentTarget</code>：</li>
<li>当前正在处理事件的元素。</li>
</ul>
<p><strong>其他信息</strong></p>
<ul>
<li>**<code>movementX</code>**：自上一次 <code>mousemove</code> 事件以来，鼠标指针在 X 轴上的移动距离。</li>
<li>**<code>movementY</code>**：自上一次 <code>mousemove</code> 事件以来，鼠标指针在 Y 轴上的移动距离。</li>
<li>**<code>detail</code>**：事件的点击次数（适用于 <code>click</code> 和 <code>dblclick</code> 等事件）。</li>
</ul>
<p><strong>方法</strong></p>
<ul>
<li><code>getModifierState(key)</code>：检查指定的修饰键（如 <code>Alt</code>、<code>Shift</code>）是否被按下。</li>
</ul>
<p>继承自 <code>UIEvent</code> 和 <code>Event</code> 的属性</p>
<ul>
<li>**<code>type</code>**：事件类型（如 <code>&quot;click&quot;</code>、<code>&quot;mousemove&quot;</code>）。</li>
<li>**<code>target</code>**：事件触发的目标元素。</li>
<li>**<code>bubbles</code>**：<code>true</code> 表示事件会冒泡。</li>
<li>**<code>cancelable</code>**：<code>true</code> 表示事件可以被取消。</li>
<li>**<code>defaultPrevented</code>**：<code>true</code> 表示默认操作已被阻止。</li>
<li>**<code>timeStamp</code>**：事件触发时的时间戳。</li>
</ul>
<p>示例</p>
<pre><code class="javascript">document.addEventListener(&#39;mousemove&#39;, (event) =&gt; &#123;
 console.log(&#39;clientX:&#39;, event.clientX);
  console.log(&#39;clientY:&#39;, event.clientY);
 console.log(&#39;screenX:&#39;, event.screenX);
  console.log(&#39;button:&#39;, event.button); 
  console.log(&#39;altKey pressed:&#39;, event.altKey);
&#125;);
</code></pre>
<p>这些属性可以帮助开发者获取鼠标的位置信息、按键状态和修饰键等详细信息，以便实现复杂的鼠标交互功能。</p>
</blockquote>
<h5 id="Q-6-什么是解构赋值？"><a href="#Q-6-什么是解构赋值？" class="headerlink" title="Q.6:什么是解构赋值？"></a><strong>Q.6:什么是解构赋值？</strong></h5><blockquote>
<p>在 <code>const &#123; clientX &#125; = event;</code> 和 <code>const clientX = event.clientX;</code> 中，**<code>clientX</code>** 最终的效果是等价的，它们都会从 <code>event</code> 对象中提取 <code>clientX</code> 的值并赋值给一个同名变量。</p>
<p>但它们的语法和解构方式不同，具体区别如下：</p>
<p><strong>解构赋值 (<code>const &#123; clientX &#125; = event;</code>)</strong></p>
<p>这是 <strong>ES6 解构赋值</strong> 的语法，用于从对象中提取属性并赋值给同名变量。</p>
<pre><code class="javascript">const &#123; clientX &#125; = event;
</code></pre>
<p>等价于：</p>
<pre><code class="javascript">const clientX = event.clientX;
</code></pre>
<p>优点：</p>
<ul>
<li><p>可以同时提取多个属性：</p>
<pre><code class="javascript"> const &#123; clientX, clientY &#125; = event;
</code></pre>
<p>上述写法相当于：</p>
<pre><code class="javascript"> const clientX = event.clientX;
const clientY = event.clientY;
</code></pre>
</li>
<li><p>语法更加简洁，适合处理多个属性时使用。</p>
</li>
</ul>
<p><strong>普通赋值 (<code>const clientX = event.clientX;</code>)</strong></p>
<p>这是更传统的方式，逐个访问对象属性并赋值。</p>
<pre><code class="javascript">const clientX = event.clientX;
</code></pre>
<p>优点：</p>
<ul>
<li>更直观，适合只提取单个属性时。</li>
</ul>
<p><strong>总结</strong></p>
<p>两种写法最终效果是<strong>等价</strong>的，区别在于语法形式和适用场景：</p>
<ol>
<li>如果只需要提取单个属性，使用 <code>const clientX = event.clientX;</code> 和 <code>const &#123; clientX &#125; = event;</code> 都可以。</li>
<li>如果需要提取多个属性，解构赋值更简洁且可读性更好。</li>
</ol>
<p>例如：</p>
<pre><code class="javascript">// 解构赋值
const &#123; clientX, clientY &#125; = event;
// 传统方式
const clientX = event.clientX;
const clientY = event.clientY;
</code></pre>
</blockquote>
<p>这里遇到了新的问题，最初设置<div>依靠的是百分比作为位置信息，在js操作中利用的是px，导致操作繁琐。</p>
<p>现在尝试把之前的代码进行一定的修改，在一番折腾后写出了以下代码：</p>
<pre><code class="JS">    let offsetX = 0;
    let offsetY = 0;
    let nicoDivX =0;
    let nicoDivY =0;
    let ifDragging = false;
    //充当一个布尔变量，用于判断是否在抓取移动状态,let为局部变量
    nicoNoteDiv.addEventListener(&quot;mousedown&quot;,(e) =&gt; &#123;//&quot;mousedown&quot;即监测鼠标点下的事件。
        ifDragging = true;
        nicoNoteDiv.style.cursor = &quot;move&quot;;
        offsetX = e.clientX;
        offsetY = e.clientY;
        //记录初始鼠标坐标(相对于左上角)
        nicoDivY = parseInt(nicoNoteDiv.style.top);
        nicoDivX = parseInt(nicoNoteDiv.style.right);
        //获取div的位置parseInt（）会将字符串转化为数字（忽略最后的非数字部分）
        e.preventDefault();
        //用来禁止鼠标拖拽时选中的功能
        nicoNoteDiv.addEventListener(&#39;mousemove&#39;,(e)=&gt;&#123;if (ifDragging)&#123;nicoDragging(e)&#125;&#125;);
        //通过检测是否拖拽来启用拖拽函数
    &#125;);
    function nicoDragging(e) &#123;//定义一个Dragging函数 语法：function 函数名(参数) &#123;&#125;
        const &#123; clientX, clientY &#125; = e;
        //获取当前鼠标坐标
        nicoNoteDiv.style.top = `$&#123;nicoDivY+clientY-offsetY&#125;px`;
        //$&#123;&#125;表示在字符串中插入函数或变量，但要确保使用反引号`Code`
        nicoNoteDiv.addEventListener(&quot;mouseup&quot;,() =&gt;&#123;ifDragging = false;&#125;);
        //松开鼠标，停止拖拽
    &#125;;
</code></pre>
<p>但是事情并没有那么简单，在松开鼠标后这个玩意还在动，原因如下：</p>
<blockquote>
<p> JavaScript 中，监听器（事件监听器）只要没有被明确移除或停止，就会一直监听事件。</p>
<p> 当你使用诸如 <code>addEventListener</code> 方法在 DOM 元素上绑定一个事件监听器时，这个监听器会一直处于活动状态，直到满足以下条件之一：</p>
<ol>
<li><strong>手动移除监听器</strong>：<br>可以使用 <code>removeEventListener</code> 方法来移除监听器。例如：</li>
</ol>
<pre><code class="javascript">const button = document.getElementById(&#39;myButton&#39;);
function handleClick(event) &#123;
    console.log(&#39;Button clicked!&#39;);
&#125;
 
// 添加监听器
button.addEventListener(&#39;click&#39;, handleClick);
 
// 移除监听器
button.removeEventListener(&#39;click&#39;, handleClick);
</code></pre>
<ol start="2">
<li><p><strong>元素被移除</strong>：<br>如果绑定了监听器的 DOM 元素被从 DOM 中移除，监听器也会随之停止。</p>
</li>
<li><p><strong>一次性监听器</strong>：<br>如果在添加监听器时指定了 <code>&#123; once: true &#125;</code>，监听器会在首次触发后自动移除。例如：</p>
</li>
</ol>
<pre><code class="javascript"> button.addEventListener(&#39;click&#39;, handleClick, &#123; once: true &#125;);
</code></pre>
<p> 父监听器与子监听器的关系</p>
<p> 如果你指的是在父元素上添加的事件监听器（比如通过事件冒泡机制监听子元素的事件），这种父监听器也会一直监听，除非明确移除。事件冒泡意味着子元素触发的事件会逐层向上传递到父元素，因此父监听器会接收到事件。比如：</p>
<pre><code class="javascript">const parent = document.getElementById(&#39;parent&#39;);

// 父元素监听器
parent.addEventListener(&#39;click&#39;, (event) =&gt; &#123;
   console.log(&#39;Parent clicked!&#39;, event.target);
&#125;);
</code></pre>
<p> 无论是直接点击父元素，还是点击子元素，父元素的监听器都会被触发，除非：</p>
<ul>
<li>你使用 <code>stopPropagation()</code> 来阻止冒泡；</li>
<li>或者通过 <code>removeEventListener</code> 手动移除父监听器。</li>
</ul>
<p> 总结</p>
<ul>
<li>监听器会持续监听事件，直到手动移除或绑定的 DOM 元素被移除。</li>
<li>如果没有停止或移除，父监听器会一直监听其范围内的事件冒泡。</li>
</ul>
</blockquote>
<p>也就是说，由于<code>mousemove</code>在<code>mousedown</code>内导致<code>mousedmove</code>一直没法停止。把:</p>
<pre><code class="JS">nicoNoteDiv.addEventListener(&#39;mousemove&#39;,(e)=&gt;&#123;if (ifDragging)&#123;nicoDragging(e)&#125;&#125;);
 nicoNoteDiv.addEventListener(&quot;mouseup&quot;,() =&gt;&#123;ifDragging = false;&#125;);
</code></pre>
<p>插在外面就行了。</p>
<p>最终成品：</p>
<pre><code class="JS">        let offsetX = 0;
        let offsetY = 0;
        let nicoDivX =0;
        let nicoDivY =0;
        let ifDragging = false;
        //充当一个布尔变量，用于判断是否在抓取移动状态,let为局部变量
        nicoNoteDiv.addEventListener(&quot;mousedown&quot;,(e) =&gt; &#123;//&quot;mousedown&quot;即监测鼠标点下的事件。
            ifDragging = true;
            offsetX = e.clientX;
            offsetY = e.clientY;
            //记录初始鼠标坐标(相对于左上角)
            nicoDivY = parseInt(nicoNoteDiv.style.top);
            nicoDivX = parseInt(nicoNoteDiv.style.right);
            //获取div的位置parseInt（）会将字符串转化为数字（忽略最后的非数字部分）
            e.preventDefault();
            //用来禁止鼠标拖拽时选中的功能
        &#125;);
        nicoNoteDiv.addEventListener(&#39;mousemove&#39;,(e)=&gt;&#123;
            if(ifDragging)&#123;
                const &#123; clientX, clientY &#125; = e;
                //获取当前鼠标坐标
                nicoNoteDiv.style.top = `$&#123;nicoDivY+clientY-offsetY&#125;px`;
                nicoNoteDiv.style.right = `$&#123;nicoDivX-clientX+offsetX&#125;px`;
                //$&#123;&#125;表示在字符串中插入函数或变量，但要确保使用反引号`Code `
            &#125;
         &#125;);
        nicoNoteDiv.addEventListener(&quot;mouseup&quot;,() =&gt;&#123;ifDragging = false;&#125;);
        //松开鼠标，停止拖拽
</code></pre>
<p>考虑到这个玩意可以应用到之前那个图标上，我们把它封装成一个函数。</p>
<p>由于光标太快会划出<code>element</code>，有时候<code>mousedown</code>事件会停止监听，改变策略把<code>mousemove</code>和<code>mouseup</code>监听对象改为<code>document</code>，即：<code> document.addEventListener()</code>。</p>
<p>这里有个新问题：</p>
<h5 id="Q-7如何在拖拽的同时不触发点击？"><a href="#Q-7如何在拖拽的同时不触发点击？" class="headerlink" title="Q.7如何在拖拽的同时不触发点击？"></a><strong>Q.7如何在拖拽的同时不触发点击？</strong></h5><blockquote>
<p>方法一：通过 <code>mousemove</code> 判断是否发生拖拽</p>
<p>可以在 <code>mousedown</code> 和 <code>mousemove</code> 中记录鼠标的移动距离，并在 <code>mouseup</code> 时判断是否是一次有效的拖拽操作。如果移动的距离超过一定阈值，就认为是拖拽而非点击。</p>
<pre><code class="javascript">let isDragging = false;

const element = document.querySelector(&quot;#draggable&quot;);

element.addEventListener(&quot;mousedown&quot;, (e) =&gt; &#123;
 isDragging = false; // 重置拖拽状态
 const startX = e.clientX;
 const startY = e.clientY;

 const onMouseMove = (e) =&gt; &#123;
     if (Math.abs(e.clientX - startX) &gt; 5 || Math.abs(e.clientY - startY) &gt; 5) &#123;
         isDragging = true;
     &#125;
 &#125;;

 const onMouseUp = () =&gt; &#123;
     document.removeEventListener(&quot;mousemove&quot;, onMouseMove);
     document.removeEventListener(&quot;mouseup&quot;, onMouseUp);
 &#125;;

 document.addEventListener(&quot;mousemove&quot;, onMouseMove);
 document.addEventListener(&quot;mouseup&quot;, onMouseUp);
&#125;);

element.addEventListener(&quot;click&quot;, (e) =&gt; &#123;
 if (isDragging) &#123;
     e.preventDefault(); // 如果是拖拽，不触发点击
 &#125;
&#125;);
</code></pre>
<p>方法二：使用 <code>drag</code> 和 <code>dragstart</code> 事件</p>
<p>如果使用 HTML5 的拖放 API，可以利用 <code>drag</code> 和 <code>dragstart</code> 来区分拖拽和点击。</p>
<pre><code class="javascript">let isDragging = false;

const element = document.querySelector(&quot;#draggable&quot;);

element.addEventListener(&quot;dragstart&quot;, () =&gt; &#123;
 isDragging = true; // 标记为拖拽
&#125;);

element.addEventListener(&quot;click&quot;, (e) =&gt; &#123;
 if (isDragging) &#123;
     e.preventDefault(); // 阻止点击事件
     isDragging = false; // 重置状态
 &#125;
&#125;);
</code></pre>
<p>方法三：直接在 <code>click</code> 中判断拖拽状态</p>
<p>如果你的拖拽实现中没有其他复杂的状态，也可以简单地在 <code>click</code> 事件中检查。</p>
<pre><code class="javascript">let isDragging = false;

element.addEventListener(&quot;mousedown&quot;, () =&gt; &#123;
 isDragging = false;
&#125;);

element.addEventListener(&quot;mousemove&quot;, () =&gt; &#123;
 isDragging = true; // 如果发生移动，标记为拖拽
&#125;);

element.addEventListener(&quot;mouseup&quot;, () =&gt; &#123;
 setTimeout(() =&gt; (isDragging = false), 0); // 延迟重置状态
&#125;);

element.addEventListener(&quot;click&quot;, (e) =&gt; &#123;
 if (isDragging) &#123;
     e.preventDefault();
 &#125;
&#125;);
</code></pre>
<p>方法四：CSS <code>pointer-events</code> 阻止点击</p>
<p>如果拖拽操作是通过 CSS 结合 JavaScript 实现，可以在拖拽时临时禁用 <code>pointer-events</code>。</p>
<pre><code class="javascript">const element = document.querySelector(&quot;#draggable&quot;);

element.addEventListener(&quot;mousedown&quot;, () =&gt; &#123;
 element.style.pointerEvents = &quot;none&quot;; // 禁止点击
&#125;);

element.addEventListener(&quot;mouseup&quot;, () =&gt; &#123;
 setTimeout(() =&gt; &#123;
     element.style.pointerEvents = &quot;auto&quot;; // 恢复点击
 &#125;, 0);
&#125;);
</code></pre>
<p>总结</p>
<p>最推荐的方法是 <strong>方法一</strong>，结合鼠标的移动距离判断是否是拖拽，因为它适用于大多数拖拽实现场景，且与 HTML5 拖放 API 或 CSS 的依赖性较低。</p>
</blockquote>
<p>这里采用方法四，而 mouseup 的监听对象一定为 document 才有效，最后将right改为更易操作的的left，封装后的函数如下：</p>
<pre><code class="js">    function letWeDrag(dragDiv)&#123;
        let offsetX = 0;
        let offsetY = 0;
        let nicoDivX =0;
        let nicoDivY =0;
        let ifDragging = false;
        //充当一个布尔变量，用于判断是否在抓取移动状态,let为局部变量
        dragDiv.addEventListener(&quot;mousedown&quot;,(e) =&gt; &#123;//&quot;mousedown&quot;即监测鼠标点下的事件。
            ifDragging = true;
            offsetX = e.clientX;
            offsetY = e.clientY;
            //记录初始鼠标坐标(相对于左上角)
            nicoDivY = parseInt(dragDiv.style.top);
            nicoDivX = parseInt(dragDiv.style.left);
            //获取div的位置parseInt（）会将字符串转化为数字（忽略最后的非数字部分）
            e.preventDefault();
            //用来禁止鼠标拖拽时选中的功能
        &#125;);
        document.addEventListener(&#39;mousemove&#39;,(e)=&gt;&#123;
            if(ifDragging)&#123;
                const &#123; clientX, clientY &#125; = e;
                //获取当前鼠标坐标
                dragDiv.style.top = `$&#123;nicoDivY+clientY-offsetY&#125;px`;
                dragDiv.style.left = `$&#123;nicoDivX+clientX-offsetX&#125;px`;
                //$&#123;&#125;表示在字符串中插入函数或变量，但要确保使用反引号`Code`
                dragDiv.style.pointerEvents = &quot;none&quot;;
                //禁止单击，防止拖拽同时点击。
            &#125;
        &#125;);
        document.addEventListener(&quot;mouseup&quot;,() =&gt;&#123;
            ifDragging = false;
            dragDiv.style.pointerEvents = &quot;auto&quot;; // 恢复点击
        &#125;);
        //松开鼠标，停止拖拽
    &#125;
</code></pre>
<p>由于将right换用left，为了使图标继续在右侧，我们应该获取屏幕的宽度。</p>
<h5 id="Q-8：如何获取屏幕的宽度？"><a href="#Q-8：如何获取屏幕的宽度？" class="headerlink" title="Q.8：如何获取屏幕的宽度？"></a>Q.8：如何获取屏幕的宽度？</h5><p>在 JavaScript 中，可以使用以下方法获取屏幕的 <strong>像素信息</strong>：</p>
<blockquote>
<p><strong>1. 获取屏幕的宽度和高度（<code>window.screen</code>）</strong></p>
<p>通过 <code>window.screen</code> 对象，可以获取屏幕的物理分辨率：</p>
<pre><code class="javascript">console.log(&quot;屏幕宽度：&quot; + window.screen.width + &quot;px&quot;);
console.log(&quot;屏幕高度：&quot; + window.screen.height + &quot;px&quot;);
</code></pre>
<ul>
<li><code>window.screen.width</code>：屏幕的宽度（像素）。</li>
<li><code>window.screen.height</code>：屏幕的高度（像素）。</li>
</ul>
<p><strong>2. 获取可用工作区域的尺寸</strong></p>
<p><code>window.screen.availWidth</code> 和 <code>window.screen.availHeight</code> 用于获取屏幕除去任务栏或工具栏后的可用尺寸：</p>
<pre><code class="javascript">javascript复制代码console.log(&quot;可用宽度：&quot; + window.screen.availWidth + &quot;px&quot;);
console.log(&quot;可用高度：&quot; + window.screen.availHeight + &quot;px&quot;);
</code></pre>
<p><strong>3. 获取浏览器窗口的尺寸</strong></p>
<p>通过 <code>window.innerWidth</code> 和 <code>window.innerHeight</code> 可以获取浏览器窗口的内容区域大小（不包含工具栏或边框）：</p>
<pre><code class="javascript">javascript复制代码console.log(&quot;窗口宽度：&quot; + window.innerWidth + &quot;px&quot;);
console.log(&quot;窗口高度：&quot; + window.innerHeight + &quot;px&quot;);
</code></pre>
<p><strong>4. 获取设备像素比（<code>devicePixelRatio</code>）</strong></p>
<p><code>window.devicePixelRatio</code> 返回设备像素比（DPR），表示物理像素与 CSS 像素的比值：</p>
<pre><code class="javascript">console.log(&quot;设备像素比：&quot; + window.devicePixelRatio);
</code></pre>
<p>例如：</p>
<ul>
<li>如果 <code>devicePixelRatio = 2</code>，表示 1 个 CSS 像素对应 2 个物理像素。</li>
<li>通常高分辨率设备（如 Retina 屏幕）会有较高的 DPR 值。</li>
</ul>
<p><strong>5. 获取页面滚动的像素位置</strong></p>
<p>通过 <code>window.scrollX</code> 和 <code>window.scrollY</code> 可以获取页面的水平和垂直滚动位置：</p>
<pre><code class="javascript">console.log(&quot;水平滚动位置：&quot; + window.scrollX + &quot;px&quot;);
console.log(&quot;垂直滚动位置：&quot; + window.scrollY + &quot;px&quot;);
</code></pre>
<p><strong>6. 获取元素的大小和位置</strong></p>
<p>如果要获取某个 HTML 元素的宽度和高度，可以使用 <code>getBoundingClientRect()</code>：</p>
<pre><code class="javascript">const element = document.querySelector(&quot;#myElement&quot;);
const rect = element.getBoundingClientRect();
console.log(`元素宽度：$&#123;rect.width&#125;px, 高度：$&#123;rect.height&#125;px`);
console.log(`元素位置：左=$&#123;rect.left&#125;px, 上=$&#123;rect.top&#125;px`);
</code></pre>
<p><strong>总结</strong></p>
<ul>
<li>屏幕尺寸：<code>window.screen.width</code> 和 <code>window.screen.height</code></li>
<li>可用区域：<code>window.screen.availWidth</code> 和 <code>window.screen.availHeight</code></li>
<li>浏览器窗口：<code>window.innerWidth</code> 和 <code>window.innerHeight</code></li>
<li>DPR：<code>window.devicePixelRatio</code></li>
<li>滚动位置：<code>window.scrollX</code> 和 <code>window.scrollY</code></li>
</ul>
</blockquote>
<p>这里我们用到<code>window.innerWidth</code>就可以了。</p>
<p>这里我们还要保证窗口调节时，它的位置能一同调节，用以下函数，达到这一效果：</p>
<pre><code class="JS">window.top.addEventListener(&#39;resize&#39;, () =&gt; &#123;//监听顶层窗口调节大小事件
    const element = document.getElementById(&quot;nicoBt&quot;);
    const elementWidth = element.offsetWidth;
    const viewportWidth = window.innerWidth;
    element.style.left = (viewportWidth - elementWidth-10) + &quot;px&quot;;
    nicoNoteDiv.style.top = `$&#123;parseInt(nicoButton.style.top)&#125;px`;
    nicoNoteDiv.style.left = `$&#123;parseInt(nicoButton.style.left)-parseInt(nicoNoteDiv.style.width)&#125;px`;
&#125;);
</code></pre>
<p>2024&#x2F;12&#x2F;12</p>
<hr>
<h4 id="②拖拽调节大小"><a href="#②拖拽调节大小" class="headerlink" title="②拖拽调节大小"></a>②拖拽调节大小</h4><p>只需要在CSS中添加：</p>
<pre><code class="CSS">resize: both;/*允许元素在x、y两个方向上调整大小*/
overflow: auto;/*显示滚动条*/
</code></pre>
<p>就可以实现简单的调整大小,参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44327851/article/details/135040288#:">css resize-CSDN博客</a>。</p>
<p><strong>注意的是，能正常调整的条件是：CSS样式中，元素的位置描述使用 top 与 left。</strong></p>
<p>但是我们要让它有最大最小的限制，思路是通过监听鼠标，通过JS来限制大小。</p>
<pre><code class="js">document.addEventListener(&quot;mouseup&quot;,()=&gt;&#123;
    if(parseInt(nicoNoteDiv.style.width)&lt;200)&#123; nicoNoteDiv.style.width=&quot;200px&quot;;&#125;;
    if(parseInt(nicoNoteDiv.style.height)&lt;40)&#123; nicoNoteDiv.style.height=&quot;40px&quot;;&#125;
&#125;);
</code></pre>
<h4 id="③组合起来！"><a href="#③组合起来！" class="headerlink" title="③组合起来！"></a>③组合起来！</h4><p>由于这两者判定位置重合，因此我们应该使用一定的嵌套。</p>
<p>这时我们就要对 UI 进行一定的规划：也就是流出上方一条允许拖拽，其余部分无法拖拽。</p>
<p>让外层元素调节大小，内层元素负责拖动，这样一个东西就做好了！</p>
<h3 id="8、引入-Vditor"><a href="#8、引入-Vditor" class="headerlink" title="8、引入 Vditor"></a>8、引入 Vditor</h3><h4 id="JS-与-CSS-的引入"><a href="#JS-与-CSS-的引入" class="headerlink" title="JS 与 CSS 的引入"></a>JS 与 CSS 的引入</h4><p>终于捣鼓完这个框框了，接下来我们要在这个容器中引入文本编辑器。</p>
<p>使用开源项目 <a target="_blank" rel="noopener" href="https://github.com/Vanessa219/vditor">Vditor</a> 来作为文本编辑器 ,根据开发者文档尝试在 HTML 中引入 vditor 的 JS 与 CSS 。</p>
<pre><code class="html">&lt;!-- ⚠️生产环境请指定版本号，如 https://unpkg.com/vditor@x.x.x/dist... --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/vditor/dist/index.css&quot; /&gt;
&lt;script src=&quot;https://unpkg.com/vditor/dist/index.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>把这行代码写入<head>中：</p>
<pre><code class="js">    document.querySelector(&quot;head&quot;).insertAdjacentHTML(&quot;afterbegin&quot;,headVditorCode);
</code></pre>
<h5 id="Q-9：之前讲过用-require加载脚本，这里可以那样做吗？"><a href="#Q-9：之前讲过用-require加载脚本，这里可以那样做吗？" class="headerlink" title="Q.9：之前讲过用@require加载脚本，这里可以那样做吗？"></a><strong>Q.9：之前讲过用<code>@require</code>加载脚本，这里可以那样做吗？</strong></h5><blockquote>
<p>可以，且<strong>更推荐使用<code>@require</code>的方式</strong>，因为如果你在插入资源后立即使用 Vditor，可能会因为资源未加载完成而报错，并且动态插入 HTML 字符串不够直观，可能会增加代码阅读和维护的难度。</p>
<p>但是**<code>@require</code>只能用来加载 JS 而不能用于 CSS **使用<code>GM_addStyle</code>可以解决这一问题。</p>
<pre><code class="js">// ==UserScript==
// @name         Vditor Integration with CSS
// @namespace    http://tampermonkey.net/
// @version      1.0
// @description  Integrate Vditor
// @author       Your Name
// @match        *://*/*
// @require      https://cdn.jsdelivr.net/npm/vditor/dist/index.min.js
// @grant        GM_addStyle
// ==/UserScript==

// 使用 GM_addStyle 插入 CSS 样式
GM_addStyle(`
@import url(&#39;https://cdn.jsdelivr.net/npm/vditor/dist/index.css&#39;);
`);
</code></pre>
<p>如果你坚持使用动态插入方式，建议优化为分步加载，避免时序问题：</p>
<pre><code class="javascript">// 动态加载 CSS
var link = document.createElement(&#39;link&#39;);
link.rel = &#39;stylesheet&#39;;
link.href = &#39;https://unpkg.com/vditor/dist/index.css&#39;;
document.head.appendChild(link);

// 动态加载 JS
var script = document.createElement(&#39;script&#39;);
script.src = &#39;https://unpkg.com/vditor/dist/index.min.js&#39;;
script.onload = function () &#123;
// 确保 Vditor 加载完成后再初始化
new Vditor(&#39;editor&#39;, &#123;
  height: 300,
  placeholder: &#39;Write something...&#39;,
&#125;);
&#125;;
document.head.appendChild(script);
</code></pre>
<p>这种方式更易维护，且避免 HTML 字符串操作的潜在问题。</p>
</blockquote>
<h4 id="Vditor-的初始化"><a href="#Vditor-的初始化" class="headerlink" title="Vditor 的初始化"></a>Vditor 的初始化</h4><p>为了理解如何引入 Vditor ，我需要花一点时间来对文档进行理解：</p>
<blockquote>
<p>首先，Vditor 定义了一个名为 <code>Vditor</code> 的类。</p>
<p>这个类包含若干属性，最主要的是 id 和 options。</p>
<p>我们首先要创建一个这个”类“的”实例“，可以理解为所谓”实例“就是一个这个”类“的变量。</p>
<p>创建实例的语法为： <code>new  类名(参数1，参数2。。。)</code></p>
<p>在这个<code>Vditor</code>就应该写成：<code>new Vditor(id,options,....)</code></p>
<p>这个id是一个字符串，而这个 options 里面包含了许多属性，我们把这些属性用大括号括起来。</p>
<p>另外 options 还有诸如 <code>options.toolbar</code> <code>options.counter</code> 的子属性他们的书写方式文档中也有写。</p>
<p>此外，我们这个类中还有一些”方法“<code>methods</code>供我们操作这些实例。</p>
</blockquote>
<p>第一次尝试引入：</p>
<pre><code class="js">    const vditor = new Vditor(&quot;nicoVditor&quot;,&#123;
        placeholder: &#39;Write something here...&#39;,
        toolbar: [&#39;emoji&#39;, &#39;headings&#39;, &#39;bold&#39;, &#39;italic&#39;, &#39;strike&#39;, &#39;link&#39;, &#39;list&#39;],
    &#125;)
</code></pre>
<p>显示 nicoVditor Not found ，推断是初始化代码在 nicoVditor 被添加之前就已经运行，通过调整代码逻辑，成功解决该问题。</p>
<p>再次运行显示：<code>GET https://unpkg.com/vditor@3.10.8/dist/js/i18n/zh_CN.js net::ERR_ABORTED 404 (Not Found)</code></p>
<p>怀疑是脚本无权访问此文件，在元属性中添加<code>// @require      https://unpkg.com/vditor@3.10.8/dist/js/i18n/zh_CN.js</code>成功运行。</p>
<p>接下来就是简单的调试一下！</p>
<p>2024&#x2F;12&#x2F;13</p>
<hr>
<h3 id="9、尝试与修复-CDN-被-CSP-拦截的问题-待解决"><a href="#9、尝试与修复-CDN-被-CSP-拦截的问题-待解决" class="headerlink" title="9、尝试与修复 CDN 被 CSP 拦截的问题(待解决)"></a>9、尝试与修复 CDN 被 CSP 拦截的问题(待解决)</h3><p>发现无法在 Github 中初始化，询问AI后得到以下解答：</p>
<blockquote>
<p>这个错误消息表示，浏览器拒绝加载样式表 <code>https://cdn.jsdelivr.net/npm/vditor/dist/index.css</code>，因为它违反了当前页面的内容安全策略（Content Security Policy，CSP）指令。具体来说，CSP 指令 <code>style-src &#39;unsafe-inline&#39; github.githubassets.com</code> 限制了可以加载样式表的来源，而 <code>jsdelivr.net</code> 不在允许的来源列表中。</p>
<h3 id="可能导致该错误的原因"><a href="#可能导致该错误的原因" class="headerlink" title="可能导致该错误的原因"></a>可能导致该错误的原因</h3><ol>
<li><strong>严格的内容安全策略</strong>：GitHub 页面设置了严格的 CSP，限制了可以加载样式表的来源，以提高安全性。</li>
<li><strong>外部样式表来源不被允许</strong>：当前 CSP 只允许从 <code>github.githubassets.com</code> 加载样式表，而不允许从 <code>jsdelivr.net</code> 加载。</li>
</ol>
</blockquote>
<p>搜索方案，发现某些项目可以绕过这一限制：<a target="_blank" rel="noopener" href="https://github.com/guansss/webpack-monkey">guansss&#x2F;webpack-monkey：一个 webpack 插件，用于使用现代工作流程开发您的用户脚本，具有 HMR、元生成等功能。</a></p>
<h4 id="使用-webpack-monkey"><a href="#使用-webpack-monkey" class="headerlink" title="使用 webpack-monkey"></a>使用 webpack-monkey</h4><p>用 npm 或 yarn（install 替换为 add） 均可。（超时挂梯子，给命令台走代理）</p>
<h5 id="对该项目进行安装与初始化："><a href="#对该项目进行安装与初始化：" class="headerlink" title="对该项目进行安装与初始化："></a>对该项目进行安装与初始化：</h5><pre><code>npm init -y
npm install webpack webpack-cli webpack-dev-server webpack-monkey  --save-dev
</code></pre>
<h5 id="创建以下目录："><a href="#创建以下目录：" class="headerlink" title="创建以下目录："></a>创建以下目录：</h5><pre><code>.
├── dist
│   └── hello.user.js
├── src
│   ├── index.js
│   └── meta.js
├── webpack.config.js
└── package.json
</code></pre>
<h5 id="编写脚本："><a href="#编写脚本：" class="headerlink" title="编写脚本："></a>编写脚本：</h5><ul>
<li>在 <code>src/index.js</code> 中编写脚本逻辑（不包含元数据）</li>
</ul>
<pre><code class="js">GM_log(&quot;Hello world!&quot;);

if (module.hot) &#123;
  module.hot.monkeyReload();
&#125;
</code></pre>
<ul>
<li>在 <code>src/meta.js</code> 中定义脚本的元数据</li>
</ul>
<pre><code class="JS">module.exports = &#123;
  name: &quot;Hello world&quot;,
  version: &quot;1.0.0&quot;,
  match: [&quot;*://example.com/&quot;],
&#125;;
</code></pre>
<ul>
<li>在 <code>webpack.config.js</code> 中配置 <code>webpack-monkey</code></li>
</ul>
<pre><code class="JS">const path = require(&quot;path&quot;)
const &#123; monkey &#125; = require(&quot;webpack-monkey&quot;)
//
module.exports = monkey(&#123;
  entry: &#39;./src/index.js&#39;,//输入文件
  output: &#123;
    path: path.resolve(__dirname, &quot;dist&quot;),//输出目录
  &#125;,
&#125;)
</code></pre>
<h5 id="配置构建脚本"><a href="#配置构建脚本" class="headerlink" title="配置构建脚本"></a>配置构建脚本</h5><p>在 <code>package.json</code> 中添加构建脚本，相当于添加了命令台指令：</p>
<pre><code class="JS">&#123;
  &quot;scripts&quot;: &#123;
    &quot;dev&quot;: &quot;webpack serve --mode development&quot;,//调试工具
    &quot;build&quot;: &quot;webpack --mode production&quot;//生成工具
  &#125;
&#125;
</code></pre>
<h5 id="生成用户脚本"><a href="#生成用户脚本" class="headerlink" title="生成用户脚本"></a>生成用户脚本</h5><pre><code>npm build
</code></pre>
<p>会在 dist 中生成用户脚本。</p>
<h5 id="尝试绕过CSP"><a href="#尝试绕过CSP" class="headerlink" title="尝试绕过CSP"></a>尝试绕过CSP</h5><p>webpack-monkey 的原理是：通过将需要外部加载的脚本与CSS样表与油猴脚本一起打包到一个文件，从而解决了 CSP 的问题。</p>
<p>首先，安装用于打包 CSS 与 JS 的 loader：</p>
<pre><code class="powershell">npm install css-loader style-loader --save-dev#用于加载CSS
npm install script-loader --save-dev#用于加载JS
</code></pre>
<p>在 Webpack 配置中，添加相关配置：</p>
<pre><code class="JS">const path = require(&quot;path&quot;);
const &#123; monkey &#125; = require(&quot;webpack-monkey&quot;);
const TerserPlugin = require(&quot;terser-webpack-plugin&quot;); // 引入 terser-webpack-plugin

module.exports = monkey(&#123;
  entry: &#39;./src/index.js&#39;,//输入文件
  output: &#123;
    path: path.resolve(__dirname, &quot;dist&quot;),//输出目录
  &#125;,
  module: &#123;
    rules: [
      &#123;
        test: /\.css$/i, // 匹配所有 .css 文件
        use: [&quot;style-loader&quot;, &quot;css-loader&quot;], // 使用 style-loader 和 css-loader 处理
      &#125;,
      &#123;
        test: /external-script\.js$/,  // 匹配外部 JS 脚本
        use: &quot;script-loader&quot;,  // 使用 script-loader 打包
      &#125;,
    ],
  &#125;,
&#125;);
</code></pre>
<p>将脚本和CSS下载到本地后，在 index.js 文件中引入本地的脚本：</p>
<pre><code class="JS">import &quot;./CSS/index.css&quot;;
import &quot;./JS/index.min.js&quot;;
</code></pre>
<p>运行后生成了打包后的脚本，但无法运行，反思后认为原因如下：</p>
<blockquote>
<p>webpack打包的js中又通过字符串操作引用了新的URL，而新的URL仍然不能绕过CSP。</p>
<p>并且不同的 JS 之间的相互依赖限制了运行顺序，运行顺序不当也会出现这种情况。</p>
</blockquote>
<h4 id="替代的解决方案"><a href="#替代的解决方案" class="headerlink" title="替代的解决方案"></a>替代的解决方案</h4><ol>
<li>手动追踪所有的URL将他们修改并打包。缺点是耗时长且可维护性极低。（不可行）</li>
<li>使用拓展程序来手动禁用 CSP。</li>
</ol>
<h4 id="无法加载的其他未知原因与局限性分析"><a href="#无法加载的其他未知原因与局限性分析" class="headerlink" title="无法加载的其他未知原因与局限性分析"></a>无法加载的其他未知原因与局限性分析</h4><p>在某些页面不是因为 CSP 而无法初始化 Vditor (经过测试，所有搜索引擎的“搜索结果”页面都不能正常载入)原因暂时未知。</p>
<p>这类问题暴露出了油猴作为脚本运行器的局限性，或许我们可以开发<strong>浏览器插件，而不是油猴脚本。</strong></p>
<p>总结就是，关于这个问题：</p>
<div class="poem">
<p><span lang="ja"><big><big><big><big>失敗した失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した<br>
あたしは失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した<br>
失敗した失敗した失敗した失敗した失敗した</big></big></big></big></span>
</p>
</div>

<p>2024&#x2F;12&#x2F;13</p>
<hr>
<h3 id="10、储存编辑的文本"><a href="#10、储存编辑的文本" class="headerlink" title="10、储存编辑的文本"></a>10、储存编辑的文本</h3><p>参考：<a target="_blank" rel="noopener" href="https://www.runoob.com/html/html5-web-api-indexeddb.html">HTML5 Web IndexedDB 数据库 | 菜鸟教程</a></p>
<p>Vditor 提供了把文件导出到本地的功能，但不能实现将笔记保存在当前网页的功能。</p>
<p>由于浏览器的网页存在严格的沙箱机制，因此我们无法利用浏览器脚本操作本地文件，自然也就不能利用脚本把文件保存在本地。</p>
<p>但是浏览器提供了 IndexedDB 这一机制，允许我们储大量结构化数据。它是异步的，可以存储较大的数据对象，适合需要存储大量数据或进行复杂查询的场景。因此我们甚至可以实现自动保存，历史版本管理的功能。</p>
<h4 id="获取文本内容"><a href="#获取文本内容" class="headerlink" title="获取文本内容"></a>获取文本内容</h4><p>Vditor 提供的工具中为我们提供了获取文本内容的 API：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>exportJSON(markdown: string)</td>
<td>根据 Markdown 获取对应 JSON</td>
</tr>
<tr>
<td>getValue()</td>
<td>获取 Markdown 内容</td>
</tr>
<tr>
<td>getHTML()</td>
<td>获取 HTML 内容</td>
</tr>
</tbody></table>
<h4 id="创建-IndexedDB"><a href="#创建-IndexedDB" class="headerlink" title="创建 IndexedDB"></a>创建 IndexedDB</h4><pre><code class="js">const request = indexedDB.open(&quot;VditorHistoryDB&quot;, 1);//创建版本号为1的IndexedDB
let db;
</code></pre>
<p>初始化：</p>
<pre><code class="js">request.onupgradeneeded = e =&gt; &#123;
    db = e.target.result;
    //表示成功打开的数据库实例。
    if (!db.objectStoreNames.contains(&quot;history&quot;)) &#123;
        db.createObjectStore(&quot;history&quot;, &#123; keyPath: &quot;id&quot; &#125;);
        //如果没有创建对象储存，则创建一个&quot;history&quot;对象储存。
        //而每一条主字段的标识为id，也就是我们可以在之后给每个字段添加id，作为标识。IndexedDB 会根据这个属性对记录进行索引。
    &#125;
&#125;;
</code></pre>
<p>这里的<code>onupgradeneeded</code>代表数据库初次创建或版本号更新时执行函数。</p>
<p>**<code>db.objectStoreNames</code>**：一个类似数组的对象，列出了当前数据库中所有已存在的对象存储（表）。</p>
<p>而**<code>contains(&quot;history&quot;)</code>**：检查是否已存在名为 <code>&quot;history&quot;</code> 的对象存储。</p>
<p>如果数据库已经创建了，则：</p>
<pre><code class="JS">request.onsuccess = e =&gt; &#123;
    db = e.target.result;
&#125;;
</code></pre>
<p><code>onsuccess</code>表示成功加载执行函数。</p>
<p><strong>出现的问题：<code>onsuccess</code>无法正确触发</strong></p>
<p>既不出发<code>onsuccess</code>也不触发<code>onerror</code>，只能触发<code>onupgradeneeded</code>，且控制台没有输出，原因暂时未知，所以无法修复。</p>
<p>这里采用替代方案每次进入都改变版本号来触发<code>onupgradeneeded</code>。</p>
<h4 id="将内容保存至数据库"><a href="#将内容保存至数据库" class="headerlink" title="将内容保存至数据库"></a>将内容保存至数据库</h4><p>这里使用数据库实例的 <code>transaction()</code> 方法创建一个事务：</p>
<pre><code class="JS">const transaction = db.transaction(storeNames, mode);
</code></pre>
<p>**<code>storeNames</code>**：</p>
<ul>
<li>可以是一个字符串（单个对象存储的名称）或数组（多个对象存储的名称）。</li>
<li>决定事务可以操作哪些对象存储。例如，<code>&quot;history&quot;</code> 表示事务将操作名为 <code>&quot;history&quot;</code> 的存储。</li>
</ul>
<p>**<code>mode</code>**：</p>
<ul>
<li>事务的模式，定义了可以执行的操作：<ul>
<li><code>&quot;readonly&quot;</code>：只读事务，只允许读取数据。</li>
<li><code>&quot;readwrite&quot;</code>：读写事务，允许读取和修改数据。</li>
</ul>
</li>
</ul>
<p>通过 <code>transaction.objectStore()</code> 获取特定的存储，操作其中的数据。</p>
<pre><code class="js">function saveContent() &#123;
    const content = nicoVditor.getValue();//获取 Markdown 内容
    const timestamp = Date.now(); // 时间戳作为 ID
    const transaction = db.transaction(&quot;history&quot;, &quot;readwrite&quot;);//创建一个操作 &quot;history&quot; 存储的读写事务。
    const store = transaction.objectStore(&quot;history&quot;);// 获取 &quot;history&quot; 对象存储
    store.put(&#123; id: timestamp, content: content, savedAt: new Date().toLocaleString() &#125;);
//向&quot;history&quot; 存储中放入一个id为时间戳，内容为 Markdown 内容，保存的时间为当前时间的内容。
//savedAt 是一个字段，用于记录保存的时间。而new Date().toLocaleString() 是 JavaScript 的方法，返回当前时间的本地化格式（例如 2024/12/15 10:30:45）
    transaction.oncomplete = () =&gt; &#123;
        alert(&quot;内容已保存！&quot;);
    &#125;;
    transaction.onerror = (event) =&gt; &#123;
        console.error(&quot;保存失败&quot;, event.target.error);
    &#125;;
&#125;
</code></pre>
<p>最后在工具栏插入一个按钮：</p>
<pre><code class="js">&#123;
 name: &#39;nicoSave&#39;,
 tipPosition: &#39;s&#39;,
 tip: &#39;保存到浏览器&#39;,
 className: &#39;right&#39;,
 icon: ``,
 click () &#123;saveContent()&#125;,&#125;
</code></pre>
<p><strong>出现的问题：<code>getValue()</code>未定义（已解决）</strong></p>
<p>原因是无法引入<code>method</code>脚本文件，引入后问题依旧存在，替代方案：</p>
<pre><code class="js">document.querySelector(&quot;#nicoVditor &gt; div.vditor-content &gt; div.vditor-ir&quot;).innerHTML;//获取 HTML 内容
</code></pre>
<p><strong>出错原因：在 saveContent() 函数中 Vditor 未被定义</strong></p>
<p><strong>解决方法：将  Vditor 作为参数传入函数中</strong></p>
<h4 id="返回历史版本"><a href="#返回历史版本" class="headerlink" title="返回历史版本"></a>返回历史版本</h4><pre><code class="js">    function showHistory(ifFirst) &#123;
        const transaction = db.transaction(&quot;history&quot;, &quot;readonly&quot;);//创建读取事务的实例
        const store = transaction.objectStore(&quot;history&quot;);//获取对象储存的实例
        const request = store.getAll(); 
        request.onsuccess = (event) =&gt; &#123; 
            const history = event.target.result; // 确保在请求成功后访问 result 属性 
            &#125;;
        history.sort((a, b) =&gt; b.id - a.id);// 按 ID（即时间戳）降序排序
        if(ifFirst)&#123;document.querySelector(&quot;#nicoVditor &gt; div.vditor-content &gt; div.vditor-ir&quot;).innerHTML = history[0].content;ifFirst=true;&#125;
        else&#123;return history;&#125;
    &#125;
</code></pre>
<p><strong>这里直接使用修改<code>.innerHTML</code>导致返回保存后无法被继续编辑，改用<code>setValue()</code>重构代码</strong></p>
<p>点击之后呼出弹窗</p>
<pre><code class="JS">    function showHistoryDialog(history) &#123;
        // 如果已有弹窗，先移除
        //const existingDialog = document.querySelector(&quot;#history-dialog&quot;);
        //if (existingDialog) existingDialog.remove();

        // 创建弹窗容器
        const dialog = document.createElement(&quot;div&quot;);
        dialog.id = &quot;history-dialog&quot;;
        dialog.style.position = &quot;fixed&quot;;
        dialog.style.top = &quot;50%&quot;;
        dialog.style.left = &quot;50%&quot;;
        dialog.style.transform = &quot;translate(-50%, -50%)&quot;;
        dialog.style.background = &quot;#fff&quot;;
        dialog.style.border = &quot;1px solid #ddd&quot;;
        dialog.style.padding = &quot;15px&quot;;
        dialog.style.boxShadow = &quot;0px 2px 10px rgba(0, 0, 0, 0.3)&quot;;
        dialog.style.zIndex = &quot;1000&quot;;
        dialog.style.maxHeight = &quot;300px&quot;;
        dialog.style.overflowY = &quot;auto&quot;;

        // 弹窗标题
        const title = document.createElement(&quot;h3&quot;);
        title.innerText = &quot;历史记录&quot;;
        title.style.marginTop = &quot;0&quot;;
        dialog.appendChild(title);

        // 遍历历史记录，添加按钮
        history.forEach((item, index) =&gt; &#123;
            const button = document.createElement(&quot;button&quot;);
            button.innerText = `$&#123;index + 1&#125;. $&#123;item.savedAt&#125;`;
            button.style.display = &quot;block&quot;;
            button.style.marginBottom = &quot;10px&quot;;
            button.style.width = &quot;100%&quot;;

            // 点击按钮时写入内容
            button.onclick = () =&gt; &#123;
                document.querySelector(&quot;#nicoVditor &gt; div.vditor-content &gt; div.vditor-ir&quot;).innerHTML = item.content;
                console.log(`已恢复历史记录: $&#123;item.savedAt&#125;`);
                dialog.remove(); // 关闭弹窗
            &#125;;

            dialog.appendChild(button);
        &#125;);

        // 关闭按钮
        const closeButton = document.createElement(&quot;button&quot;);
        closeButton.innerText = &quot;关闭&quot;;
        closeButton.style.marginTop = &quot;10px&quot;;
        closeButton.style.width = &quot;100%&quot;;
        closeButton.onclick = () =&gt; dialog.remove();
        dialog.appendChild(closeButton);

        // 将弹窗插入到页面
        document.body.appendChild(dialog);
    &#125;
</code></pre>
<p>但是因为 <code>showHistory</code> 函数是异步（允许它之后的代码先运行）的，而你在调用 <code>showHistory</code> 函数时期望立即获得结果。你需要确保在 <code>request.onsuccess</code> 事件处理程序中处理结果。</p>
<h5 id="Q10-异步执行的函数如何获取返回值？"><a href="#Q10-异步执行的函数如何获取返回值？" class="headerlink" title="Q10.异步执行的函数如何获取返回值？"></a>Q10.异步执行的函数如何获取返回值？</h5><blockquote>
<p>在 JavaScript 中，异步函数的返回值无法直接通过同步方式获取，因为异步操作（如网络请求、定时器等）需要时间完成。因此，需要通过以下几种方法来获取异步函数的返回值：</p>
<ol>
<li><strong><code>Promise</code> 和 <code>then()</code></strong></li>
</ol>
<p>当异步函数返回一个 <strong>Promise</strong> 对象时，可以通过 <code>.then()</code> 方法来处理返回值。</p>
<p>示例代码</p>
<pre><code class="javascript">function asyncFunction() &#123;
    return new Promise((resolve) =&gt; &#123;
        setTimeout(() =&gt; &#123;
            resolve(&quot;异步返回值&quot;);
        &#125;, 1000); // 模拟异步操作，1秒后返回
    &#125;);
&#125;

// 使用 then() 获取返回值
asyncFunction().then((result) =&gt; &#123;
    console.log(&quot;获取到的返回值:&quot;, result);
&#125;);
</code></pre>
<ol start="2">
<li><strong><code>async/await</code></strong></li>
</ol>
<p><code>async/await</code> 是对 <code>Promise</code> 的语法糖，使得异步代码更像同步代码，更易于理解和编写。</p>
<p>示例代码</p>
<pre><code class="javascript">async function asyncFunction() &#123;
    return new Promise((resolve) =&gt; &#123;
        setTimeout(() =&gt; &#123;
            resolve(&quot;异步返回值&quot;);
        &#125;, 1000); // 模拟异步操作
    &#125;);
&#125;

// 使用 async/await 获取返回值
async function getValue() &#123;
    const result = await asyncFunction();
    console.log(&quot;获取到的返回值:&quot;, result);
&#125;

getValue();
</code></pre>
<p>注意：</p>
<ul>
<li><code>await</code> 只能在 <strong><code>async</code> 函数</strong> 中使用。</li>
<li><code>await</code> 会暂停当前 <code>async</code> 函数的执行，直到异步操作完成。</li>
</ul>
<ol start="3">
<li><strong>回调函数</strong></li>
</ol>
<p>将一个回调函数作为参数传入异步函数，在异步操作完成后调用该回调函数并传入返回值。</p>
<p>示例代码</p>
<pre><code class="javascript">function asyncFunction(callback) &#123;
    setTimeout(() =&gt; &#123;
        const value = &quot;异步返回值&quot;;
        callback(value); // 调用回调函数，传入返回值
    &#125;, 1000);
&#125;

// 使用回调函数获取返回值
asyncFunction((result) =&gt; &#123;
    console.log(&quot;获取到的返回值:&quot;, result);
&#125;);
</code></pre>
<ol start="4">
<li><strong>结合 <code>async/await</code> 和 <code>Promise</code> 的例子</strong></li>
</ol>
<p>当你调用一个异步函数，返回的是 <strong>Promise</strong>，你可以用 <code>async/await</code> 来等待它的完成。</p>
<p>示例代码</p>
<pre><code class="javascript">function fetchData() &#123;
    return new Promise((resolve) =&gt; &#123;
        setTimeout(() =&gt; resolve(&quot;返回数据成功&quot;), 1000);
    &#125;);
&#125;

async function getData() &#123;
    const result = await fetchData();
    console.log(&quot;最终获取的数据:&quot;, result);
&#125;

getData();
</code></pre>
<ol start="5">
<li><strong>立即执行异步函数 (IIFE)</strong></li>
</ol>
<p>有时你需要在代码块内立即调用 <code>async</code> 函数，可以使用 **立即执行函数表达式 (IIFE)**。</p>
<p>示例代码</p>
<pre><code class="javascript">(async () =&gt; &#123;
    const result = await asyncFunction();
    console.log(&quot;立即执行异步函数的返回值:&quot;, result);
&#125;)();
</code></pre>
</blockquote>
<h4 id="删除历史记录"><a href="#删除历史记录" class="headerlink" title="删除历史记录"></a>删除历史记录</h4><p>使用 delate 方法删除历史记录：</p>
<pre><code class="js">const request = indexedDB.open(&quot;VditorHistoryDB&quot;, dbVersion);
request.onsuccess = (event) =&gt; &#123;
    const db = event.target.result;
    const transaction = db.transaction(&quot;history&quot;, &quot;readwrite&quot;);
    const store = transaction.objectStore(&quot;history&quot;);
    const deleteRequest = store.delete(recordId); // 替换 recordId 为你要删除的记录的 ID

    deleteRequest.onsuccess = () =&gt; &#123;
        console.log(&quot;记录已删除&quot;);
    &#125;;

    deleteRequest.onerror = (event) =&gt; &#123;
        console.error(&quot;删除记录失败&quot;, event.target.error);
    &#125;;
&#125;;
</code></pre>
<p>2024&#x2F;12&#x2F;19</p>
<hr>
<h2 id="三、完成"><a href="#三、完成" class="headerlink" title="三、完成"></a>三、完成</h2><p>大概耗时十天时间，我们从无到有完成了这个脚本的编写。</p>
<p>事实上，我认为这次尝试，是利用 AI 进行学习的一种方式。</p>
<p>过去人们大部分情况下只能从前到后，一步步到达想要的结果，但是 AI 让我们可以从后向前，并且在这个过程中一点点弄清楚这个东西的原理，这一点是以往人所达不到的。</p>
<p>最后我希望我自己可以继续维护这个脚本，不断为其添加新的功能。</p>

<link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v2/dist/waline.css"
  />

<div id="waline"></div>
  <script type="module">
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';



    init({
      el: '#waline',
      serverURL: 'https://waline-ccr39.netlify.app/.netlify/functions/comment',
       reaction: [
        'https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_heart_eyes.png',
        'https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_dog_joy.png',
        'https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_dog_consider.png',
        'https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_sob.png',


  ],
      emoji: [
        '//unpkg.com/@waline/emojis@1.1.0/bilibili',
        '//unpkg.com/@waline/emojis@1.1.0/weibo',
        '//unpkg.com/@waline/emojis@1.1.0/qq',
      ]
    });
  </script>


        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://s2.loli.net/2022/12/11/rdgBz4h93ApRGmL.jpg"></li>
                <li class="wechat-code"><img src="https://s2.loli.net/2022/12/11/VJB3RydclkMYuH9.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
        
          
            <div class="post-nepre full next">
          
            <a href="/%E6%8A%80%E6%9C%AF/git-3/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://i0.hdslb.com/bfs/album/f6df0a683b73352e3b78523dbe9ccc07e5560899.png" data-src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/new_dyn/4919526aef1bd06c192b54a9a7ab1e051865926893.jpg" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://images.weserv.nl/?url=https://article.biliimg.com/bfs/new_dyn/4919526aef1bd06c192b54a9a7ab1e051865926893.jpg">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                Git入门（三）提交到远程库</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "nJIfytgko1rH9zkhJaosZRZ3-MdYXbMMI",
        appKey: "fAj8OKoTBsGObZsLQJmP66FJ",
        path: window.location.pathname,
        placeholder: "你是我一生只会遇见一次的惊喜 ..."
      })
  }
</script>




      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="https://ccr39.github.io/" class="profile gravatar"><img src="https://i0.hdslb.com/bfs/album/31885206e51d953c6cdd9e7fcc4e65e31d884f2e.jpg" itemprop="image" alt="ccr39" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="https://ccr39.github.io/" itemprop="url" rel="author">ccr39</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>I am ordinary yet unique.</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>


  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>


    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 ccr39<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->

<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2025</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://ccr39.github.io" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">CCR39</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<!-- <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> -->
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script>
   var OriginTitle = document.title;
 var titleTime;
 document.addEventListener('visibilitychange', function () {
     if (document.hidden) {
         $('[rel="icon"]').attr('href', "/img/trhx2.png");
         document.title = '不要走嘛QAQ';
         clearTimeout(titleTime);
     }
     else {
         $('[rel="icon"]').attr('href', "/img/trhx2.png");
         document.title = 'ヾ(Ő∀Ő3)ノ你回来啦！' + OriginTitle;
         titleTime = setTimeout(function () {
             document.title = OriginTitle;
         }, 2000);
     }
 });
</script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://jsdelivr.2heng.xin/gh/moezx/cdn@3.1.3","name":"The Pet Girl of Sakurasou.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://jsdelivr.2heng.xin/gh/moezx/cdn@3.1.3","name":"The Pet Girl of Sakurasou.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <!-- <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://i0.hdslb.com/bfs/album/31885206e51d953c6cdd9e7fcc4e65e31d884f2e.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">CCR39のLazyNest</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/ccr39" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://weibo.com/p/1005057384082037/home?from=page_100505&mod=TAB&is_all=1#place" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/%E6%8A%80%E6%9C%AF/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/%E7%94%9F%E6%B4%BB/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%B5%84%E6%BA%90/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/%E6%82%A6%E8%AF%BB/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/%E5%9B%BE%E9%9B%86/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2025 ccr39-blog</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  
<style>
  .aplayer{background:#fff;font-family:Arial,Helvetica,sans-serif;margin:5px;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);border-radius:2px;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:normal;position:relative}.aplayer *{box-sizing:content-box}.aplayer svg{width:100%;height:100%}.aplayer svg circle,.aplayer svg path{fill:#fff}.aplayer.aplayer-withlist .aplayer-info{border-bottom:1px solid #e9e9e9}.aplayer.aplayer-withlist .aplayer-list{display:block}.aplayer.aplayer-withlist .aplayer-icon-order,.aplayer.aplayer-withlist .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu{display:inline}.aplayer.aplayer-withlrc .aplayer-pic{height:90px;width:90px}.aplayer.aplayer-withlrc .aplayer-info{margin-left:90px;height:90px;padding:10px 7px 0}.aplayer.aplayer-withlrc .aplayer-lrc{display:block}.aplayer.aplayer-narrow{width:66px}.aplayer.aplayer-narrow .aplayer-info,.aplayer.aplayer-narrow .aplayer-list{display:none}.aplayer.aplayer-narrow .aplayer-body,.aplayer.aplayer-narrow .aplayer-pic{height:66px;width:66px}.aplayer.aplayer-fixed{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:999999;overflow:visible;max-width:400px;box-shadow:none}.aplayer.aplayer-fixed .aplayer-list{margin-bottom:65px;border:1px solid #eee;border-bottom:none}.aplayer.aplayer-fixed .aplayer-body{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:999999;background:#fff;padding-right:18px;transition:all .3s ease;max-width:400px}.aplayer.aplayer-fixed .aplayer-lrc{display:block;position:fixed;bottom:10px;left:0;right:0;margin:0;z-index:999998;pointer-events:none;text-shadow:-1px -1px 0 #fff}.aplayer.aplayer-fixed .aplayer-lrc:after,.aplayer.aplayer-fixed .aplayer-lrc:before{display:none}.aplayer.aplayer-fixed .aplayer-info{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:0 0;transform-origin:0 0;transition:all .3s ease;border-bottom:none;border-top:1px solid #e9e9e9}.aplayer.aplayer-fixed .aplayer-info .aplayer-music{width:calc(100% - 105px)}.aplayer.aplayer-fixed .aplayer-miniswitcher{display:block}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-info{display:block;-webkit-transform:scaleX(0);transform:scaleX(0)}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{width:66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-miniswitcher .aplayer-icon{-webkit-transform:rotateY(0);transform:rotateY(0)}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-lrc,.aplayer.aplayer-fixed .aplayer-icon-play{display:inline-block}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-menu,.aplayer.aplayer-fixed .aplayer-icon-play{position:absolute;bottom:27px;width:20px;height:20px}.aplayer.aplayer-fixed .aplayer-icon-back{right:75px}.aplayer.aplayer-fixed .aplayer-icon-play{right:50px}.aplayer.aplayer-fixed .aplayer-icon-forward{right:25px}.aplayer.aplayer-fixed .aplayer-icon-menu{right:0}.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order,.aplayer.aplayer-mobile .aplayer-icon-volume-down{display:none}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-loading-icon{display:block}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-body{position:relative}.aplayer .aplayer-icon{width:15px;height:15px;border:none;background-color:transparent;outline:none;cursor:pointer;opacity:.8;vertical-align:middle;padding:0;font-size:12px;margin:0;display:inline-block}.aplayer .aplayer-icon path{transition:all .2s ease-in-out}.aplayer .aplayer-icon-back,.aplayer .aplayer-icon-forward,.aplayer .aplayer-icon-lrc,.aplayer .aplayer-icon-order,.aplayer .aplayer-icon-play{display:none}.aplayer .aplayer-icon-lrc-inactivity svg{opacity:.4}.aplayer .aplayer-icon-forward{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.aplayer .aplayer-lrc-content{display:none}.aplayer .aplayer-pic{position:relative;float:left;height:66px;width:66px;background-size:cover;background-position:50%;transition:all .3s ease;cursor:pointer}.aplayer .aplayer-pic:hover .aplayer-button{opacity:1}.aplayer .aplayer-pic .aplayer-button{position:absolute;border-radius:50%;opacity:.8;text-shadow:0 1px 1px rgba(0,0,0,.2);box-shadow:0 1px 1px rgba(0,0,0,.2);background:rgba(0,0,0,.2);transition:all .1s ease}.aplayer .aplayer-pic .aplayer-button path{fill:#fff}.aplayer .aplayer-pic .aplayer-hide{display:none}.aplayer .aplayer-pic .aplayer-play{width:26px;height:26px;border:2px solid #fff;bottom:50%;right:50%;margin:0 -15px -15px 0}.aplayer .aplayer-pic .aplayer-play svg{position:absolute;top:3px;left:4px;height:20px;width:20px}.aplayer .aplayer-pic .aplayer-pause{width:16px;height:16px;border:2px solid #fff;bottom:4px;right:4px}.aplayer .aplayer-pic .aplayer-pause svg{position:absolute;top:2px;left:2px;height:12px;width:12px}.aplayer .aplayer-info{margin-left:66px;padding:14px 7px 0 10px;height:66px;box-sizing:border-box}.aplayer .aplayer-info .aplayer-music{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0 0 13px 5px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default;padding-bottom:2px;height:20px}.aplayer .aplayer-info .aplayer-music .aplayer-title{font-size:14px}.aplayer .aplayer-info .aplayer-music .aplayer-author{font-size:12px;color:#666}.aplayer .aplayer-info .aplayer-controller{position:relative;display:flex}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap{margin:0 0 0 5px;padding:4px 0;cursor:pointer!important;flex:1}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap:hover .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar{position:relative;height:2px;width:100%;background:#cdcdcd}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:#aaa;height:2px;transition:all .5s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played{position:absolute;left:0;top:0;bottom:0;height:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:10px;width:10px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.aplayer .aplayer-info .aplayer-controller .aplayer-time{position:relative;right:0;bottom:4px;height:17px;color:#999;font-size:11px;padding-left:7px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-time-inner{vertical-align:middle}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon{cursor:pointer;transition:all .2s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:#666}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-loop{margin-right:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon:hover path{fill:#000}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-mode{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap{position:relative;display:inline-block;margin-left:3px;cursor:pointer!important}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap:hover .aplayer-volume-bar-wrap{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap{position:absolute;bottom:15px;right:-3px;width:25px;height:0;z-index:999999;overflow:hidden;transition:all .2s ease-in-out}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap.aplayer-volume-bar-wrap-active{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar{position:absolute;bottom:0;right:10px;width:5px;height:35px;background:#aaa;border-radius:2.5px;overflow:hidden}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar .aplayer-volume{position:absolute;bottom:0;right:0;width:5px;transition:all .1s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon svg{position:absolute;-webkit-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite}.aplayer .aplayer-lrc{display:none;position:relative;height:30px;text-align:center;overflow:hidden;margin:-10px 0 7px}.aplayer .aplayer-lrc:before{top:0;height:10%;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#00ffffff",GradientType=0)}.aplayer .aplayer-lrc:after,.aplayer .aplayer-lrc:before{position:absolute;z-index:1;display:block;overflow:hidden;width:100%;content:" "}.aplayer .aplayer-lrc:after{bottom:0;height:33%;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00ffffff",endColorstr="#ccffffff",GradientType=0)}.aplayer .aplayer-lrc p{font-size:12px;color:#666;line-height:16px!important;height:16px!important;padding:0!important;margin:0!important;transition:all .5s ease-out;opacity:.4;overflow:hidden}.aplayer .aplayer-lrc p.aplayer-lrc-current{opacity:1;overflow:visible;height:auto!important;min-height:16px}.aplayer .aplayer-lrc.aplayer-lrc-hide{display:none}.aplayer .aplayer-lrc .aplayer-lrc-contents{width:100%;transition:all .5s ease-out;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default}.aplayer .aplayer-list{overflow:auto;transition:all .5s ease;will-change:height;display:none;overflow:hidden}.aplayer .aplayer-list.aplayer-list-hide{max-height:0!important}.aplayer .aplayer-list ol{list-style-type:none;margin:0;padding:0;overflow-y:auto}.aplayer .aplayer-list ol::-webkit-scrollbar{width:5px}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb{border-radius:3px;background-color:#eee}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb:hover{background-color:#ccc}.aplayer .aplayer-list ol li{position:relative;height:32px;line-height:32px;padding:0 15px;font-size:12px;border-top:1px solid #e9e9e9;cursor:pointer;transition:all .2s ease;overflow:hidden;margin:0}.aplayer .aplayer-list ol li:first-child{border-top:none}.aplayer .aplayer-list ol li:hover{background:#efefef}.aplayer .aplayer-list ol li.aplayer-list-light{background:#e9e9e9}.aplayer .aplayer-list ol li.aplayer-list-light .aplayer-list-cur{display:inline-block}.aplayer .aplayer-list ol li .aplayer-list-cur{display:none;width:3px;height:22px;position:absolute;left:0;top:5px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-index{color:#666;margin-right:12px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-author{color:#666;float:right;cursor:pointer}.aplayer .aplayer-notice{opacity:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:12px;border-radius:4px;padding:5px 10px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none;background-color:#f4f4f5;color:#909399}.aplayer .aplayer-miniswitcher{display:none;position:absolute;top:0;right:0;bottom:0;height:100%;background:#e6e6e6;width:18px;border-radius:0 2px 2px 0}.aplayer .aplayer-miniswitcher .aplayer-icon{height:100%;width:100%;-webkit-transform:rotateY(180deg);transform:rotateY(180deg);transition:all .3s ease}.aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#666}.aplayer .aplayer-miniswitcher .aplayer-icon:hover path{fill:#000}@-webkit-keyframes aplayer-roll{0%{left:0}to{left:-100%}}@keyframes aplayer-roll{0%{left:0}to{left:-100%}}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}

/*# sourceMappingURL=APlayer.min.css.map*/
</style>
<script>
  !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("APlayer",[],t):"object"==typeof exports?exports.APlayer=t():e.APlayer=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=41)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=/mobile/i.test(window.navigator.userAgent),a={secondToTime:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n);return(t>0?[t,n,i]:[n,i]).map(function(e){return e<10?"0"+e:""+e}).join(":")},getElementViewLeft:function(e){var t=e.offsetLeft,n=e.offsetParent,i=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==n&&n!==e;)t+=n.offsetLeft,n=n.offsetParent;else for(;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t-i},getElementViewTop:function(e,t){for(var n,i=e.offsetTop,a=e.offsetParent;null!==a;)i+=a.offsetTop,a=a.offsetParent;return n=document.body.scrollTop+document.documentElement.scrollTop,t?i:i-n},isMobile:i,storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},nameMap:{dragStart:i?"touchstart":"mousedown",dragMove:i?"touchmove":"mousemove",dragEnd:i?"touchend":"mouseup"},randomOrder:function(e){return function(e){for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[n];e[n]=e[t],e[t]=i}return e}([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(e))).map(function(e,t){return t}))}};t.default=a},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";e=e||{};var t="",n=i.$each,a=e.audio,r=(e.$value,e.$index,i.$escape),o=e.theme,s=e.index;return n(a,function(e,n){t+='\n<li>\n    <span class="aplayer-list-cur" style="background-color: ',t+=r(e.theme||o),t+=';"></span>\n    <span class="aplayer-list-index">',t+=r(n+s),t+='</span>\n    <span class="aplayer-list-title">',t+=r(e.name),t+='</span>\n    <span class="aplayer-list-author">',t+=r(e.artist),t+="</span>\n</li>\n"}),t}},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(33)),a=g(n(32)),r=g(n(31)),o=g(n(30)),s=g(n(29)),l=g(n(28)),u=g(n(27)),c=g(n(26)),p=g(n(25)),d=g(n(24)),h=g(n(23)),y=g(n(22)),f=g(n(21)),v=g(n(20)),m=g(n(19));function g(e){return e&&e.__esModule?e:{default:e}}var w={play:i.default,pause:a.default,volumeUp:r.default,volumeDown:o.default,volumeOff:s.default,orderRandom:l.default,orderList:u.default,menu:c.default,loopAll:p.default,loopOne:d.default,loopNone:h.default,loading:y.default,right:f.default,skip:v.default,lrc:m.default};t.default=w},function(e,t,n){"use strict";var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";var i,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(a="function"==typeof(i=function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var e=function(e,t,n,i){return n>i?t:e+(t-e)*((a=n/i)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1);var a},t=function(t,n,i,a){n=n||500;var r=(a=a||window).scrollTop||window.pageYOffset;if("number"==typeof t)var o=parseInt(t);else var o=function(e,t){return"HTML"===e.nodeName?-t:e.getBoundingClientRect().top+t}(t,r);var s=Date.now(),l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)};!function u(){var c=Date.now()-s;a!==window?a.scrollTop=e(r,o,c,n):window.scroll(0,e(r,o,c,n)),c>n?"function"==typeof i&&i(t):l(u)}()},n=function(e){if(!e.defaultPrevented){e.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash);var n=document.getElementById(this.hash.substring(1));if(!n)return;t(n,500,function(e){location.replace("#"+e.id)})}};return document.addEventListener("DOMContentLoaded",function(){for(var e,t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),i=t.length;e=t[--i];)e.addEventListener("click",n,!1)}),t}})?i.call(t,n,t,e):i)||(e.exports=a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=s(n(1)),r=s(n(0)),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.index=0,this.audios=this.player.options.audio,this.bindEvents()}return i(e,[{key:"bindEvents",value:function(){var e=this;this.player.template.list.addEventListener("click",function(t){var n=void 0;n="LI"===t.target.tagName.toUpperCase()?t.target:t.target.parentElement;var i=parseInt(n.getElementsByClassName("aplayer-list-index")[0].innerHTML)-1;i!==e.index?(e.switch(i),e.player.play()):e.player.toggle()})}},{key:"show",value:function(){this.player.events.trigger("listshow"),this.player.template.list.classList.remove("aplayer-list-hide"),this.player.template.listOl.scrollTop=33*this.index}},{key:"hide",value:function(){this.player.events.trigger("listhide"),this.player.template.list.classList.add("aplayer-list-hide")}},{key:"toggle",value:function(){this.player.template.list.classList.contains("aplayer-list-hide")?this.show():this.hide()}},{key:"add",value:function(e){this.player.events.trigger("listadd",{audios:e}),"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.map(function(e){return e.name=e.name||e.title||"Audio name",e.artist=e.artist||e.author||"Audio artist",e.cover=e.cover||e.pic,e.type=e.type||"normal",e});var t=!(this.audios.length>1),n=0===this.audios.length;this.player.template.listOl.innerHTML+=(0,a.default)({theme:this.player.options.theme,audio:e,index:this.audios.length+1}),this.audios=this.audios.concat(e),t&&this.audios.length>1&&this.player.container.classList.add("aplayer-withlist"),this.player.randomOrder=r.default.randomOrder(this.audios.length),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur"),this.player.template.listCurs[this.audios.length-1].style.backgroundColor=e.theme||this.player.options.theme,n&&("random"===this.player.options.order?this.switch(this.player.randomOrder[0]):this.switch(0))}},{key:"remove",value:function(e){if(this.player.events.trigger("listremove",{index:e}),this.audios[e])if(this.audios.length>1){var t=this.player.container.querySelectorAll(".aplayer-list li");t[e].remove(),this.audios.splice(e,1),this.player.lrc&&this.player.lrc.remove(e),e===this.index&&(this.audios[e]?this.switch(e):this.switch(e-1)),this.index>e&&this.index--;for(var n=e;n<t.length;n++)t[n].getElementsByClassName("aplayer-list-index")[0].textContent=n;1===this.audios.length&&this.player.container.classList.remove("aplayer-withlist"),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur")}else this.clear()}},{key:"switch",value:function(e){if(this.player.events.trigger("listswitch",{index:e}),void 0!==e&&this.audios[e]){this.index=e;var t=this.audios[this.index];this.player.template.pic.style.backgroundImage=t.cover?"url('"+t.cover+"')":"",this.player.theme(this.audios[this.index].theme||this.player.options.theme,this.index,!1),this.player.template.title.innerHTML=t.name,this.player.template.author.innerHTML=t.artist?" - "+t.artist:"";var n=this.player.container.getElementsByClassName("aplayer-list-light")[0];n&&n.classList.remove("aplayer-list-light"),this.player.container.querySelectorAll(".aplayer-list li")[this.index].classList.add("aplayer-list-light"),(0,o.default)(33*this.index,500,null,this.player.template.listOl),this.player.setAudio(t),this.player.lrc&&this.player.lrc.switch(this.index),this.player.lrc&&this.player.lrc.update(0),1!==this.player.duration&&(this.player.template.dtime.innerHTML=r.default.secondToTime(this.player.duration))}}},{key:"clear",value:function(){this.player.events.trigger("listclear"),this.index=0,this.player.container.classList.remove("aplayer-withlist"),this.player.pause(),this.audios=[],this.player.lrc&&this.player.lrc.clear(),this.player.audio.src="",this.player.template.listOl.innerHTML="",this.player.template.pic.style.backgroundImage="",this.player.theme(this.player.options.theme,this.index,!1),this.player.template.title.innerHTML="No audio",this.player.template.author.innerHTML="",this.player.bar.set("loaded",0,"width"),this.player.template.dtime.innerHTML=r.default.secondToTime(0)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={},this.audioEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["destroy","listshow","listhide","listadd","listremove","listswitch","listclear","noticeshow","noticehide","lrcshow","lrchide"]}return i(e,[{key:"on",value:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:"trigger",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)}},{key:"type",value:function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.audioEvents.indexOf(e)?"audio":(console.error("Unknown event name: "+e),null)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=["loading"],this.init()}return i(e,[{key:"init",value:function(){var e=this;this.types.forEach(function(t){e["init"+t+"Checker"]()})}},{key:"initloadingChecker",value:function(){var e=this,t=0,n=0,i=!1;this.loadingChecker=setInterval(function(){e.enableloadingChecker&&(n=e.player.audio.currentTime,i||n!==t||e.player.audio.paused||(e.player.container.classList.add("aplayer-loading"),i=!0),i&&n>t&&!e.player.audio.paused&&(e.player.container.classList.remove("aplayer-loading"),i=!1),t=n)},100)}},{key:"enable",value:function(e){this["enable"+e+"Checker"]=!0,"fps"===e&&this.initfpsChecker()}},{key:"disable",value:function(e){this["enable"+e+"Checker"]=!1}},{key:"destroy",value:function(){var e=this;this.types.forEach(function(t){e["enable"+t+"Checker"]=!1,e[t+"Checker"]&&clearInterval(e[t+"Checker"])})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=o(n(0)),r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.initPlayButton(),this.initPlayBar(),this.initOrderButton(),this.initLoopButton(),this.initMenuButton(),a.default.isMobile||this.initVolumeButton(),this.initMiniSwitcher(),this.initSkipButton(),this.initLrcButton()}return i(e,[{key:"initPlayButton",value:function(){var e=this;this.player.template.pic.addEventListener("click",function(){e.player.toggle()})}},{key:"initPlayBar",value:function(){var e=this,t=function(t){var n=((t.clientX||t.changedTouches[0].clientX)-a.default.getElementViewLeft(e.player.template.barWrap))/e.player.template.barWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),e.player.bar.set("played",n,"width"),e.player.lrc&&e.player.lrc.update(n*e.player.duration),e.player.template.ptime.innerHTML=a.default.secondToTime(n*e.player.duration)},n=function n(i){document.removeEventListener(a.default.nameMap.dragEnd,n),document.removeEventListener(a.default.nameMap.dragMove,t);var r=((i.clientX||i.changedTouches[0].clientX)-a.default.getElementViewLeft(e.player.template.barWrap))/e.player.template.barWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),e.player.bar.set("played",r,"width"),e.player.seek(e.player.bar.get("played","width")*e.player.duration),e.player.disableTimeupdate=!1};this.player.template.barWrap.addEventListener(a.default.nameMap.dragStart,function(){e.player.disableTimeupdate=!0,document.addEventListener(a.default.nameMap.dragMove,t),document.addEventListener(a.default.nameMap.dragEnd,n)})}},{key:"initVolumeButton",value:function(){var e=this;this.player.template.volumeButton.addEventListener("click",function(){e.player.audio.muted?(e.player.audio.muted=!1,e.player.switchVolumeIcon(),e.player.bar.set("volume",e.player.volume(),"height")):(e.player.audio.muted=!0,e.player.switchVolumeIcon(),e.player.bar.set("volume",0,"height"))});var t=function(t){var n=1-((t.clientY||t.changedTouches[0].clientY)-a.default.getElementViewTop(e.player.template.volumeBar,e.player.options.fixed))/e.player.template.volumeBar.clientHeight;n=Math.max(n,0),n=Math.min(n,1),e.player.volume(n)},n=function n(i){e.player.template.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active"),document.removeEventListener(a.default.nameMap.dragEnd,n),document.removeEventListener(a.default.nameMap.dragMove,t);var r=1-((i.clientY||i.changedTouches[0].clientY)-a.default.getElementViewTop(e.player.template.volumeBar,e.player.options.fixed))/e.player.template.volumeBar.clientHeight;r=Math.max(r,0),r=Math.min(r,1),e.player.volume(r)};this.player.template.volumeBarWrap.addEventListener(a.default.nameMap.dragStart,function(){e.player.template.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active"),document.addEventListener(a.default.nameMap.dragMove,t),document.addEventListener(a.default.nameMap.dragEnd,n)})}},{key:"initOrderButton",value:function(){var e=this;this.player.template.order.addEventListener("click",function(){"list"===e.player.options.order?(e.player.options.order="random",e.player.template.order.innerHTML=r.default.orderRandom):"random"===e.player.options.order&&(e.player.options.order="list",e.player.template.order.innerHTML=r.default.orderList)})}},{key:"initLoopButton",value:function(){var e=this;this.player.template.loop.addEventListener("click",function(){e.player.list.audios.length>1?"one"===e.player.options.loop?(e.player.options.loop="none",e.player.template.loop.innerHTML=r.default.loopNone):"none"===e.player.options.loop?(e.player.options.loop="all",e.player.template.loop.innerHTML=r.default.loopAll):"all"===e.player.options.loop&&(e.player.options.loop="one",e.player.template.loop.innerHTML=r.default.loopOne):"one"===e.player.options.loop||"all"===e.player.options.loop?(e.player.options.loop="none",e.player.template.loop.innerHTML=r.default.loopNone):"none"===e.player.options.loop&&(e.player.options.loop="all",e.player.template.loop.innerHTML=r.default.loopAll)})}},{key:"initMenuButton",value:function(){var e=this;this.player.template.menu.addEventListener("click",function(){e.player.list.toggle()})}},{key:"initMiniSwitcher",value:function(){var e=this;this.player.template.miniSwitcher.addEventListener("click",function(){e.player.setMode("mini"===e.player.mode?"normal":"mini")})}},{key:"initSkipButton",value:function(){var e=this;this.player.template.skipBackButton.addEventListener("click",function(){e.player.skipBack()}),this.player.template.skipForwardButton.addEventListener("click",function(){e.player.skipForward()}),this.player.template.skipPlayButton.addEventListener("click",function(){e.player.toggle()})}},{key:"initLrcButton",value:function(){var e=this;this.player.template.lrcButton.addEventListener("click",function(){e.player.template.lrcButton.classList.contains("aplayer-icon-lrc-inactivity")?(e.player.template.lrcButton.classList.remove("aplayer-icon-lrc-inactivity"),e.player.lrc&&e.player.lrc.show()):(e.player.template.lrcButton.classList.add("aplayer-icon-lrc-inactivity"),e.player.lrc&&e.player.lrc.hide())})}}]),e}();t.default=s},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";e=e||{};var t="",n=i.$each,a=e.lyrics,r=(e.$value,e.$index,i.$escape);return n(a,function(e,n){t+="\n    <p",0===n&&(t+=' class="aplayer-lrc-current"'),t+=">",t+=r(e[1]),t+="</p>\n"}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(10),o=(i=r)&&i.__esModule?i:{default:i};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.async=t.async,this.player=t.player,this.parsed=[],this.index=0,this.current=[]}return a(e,[{key:"show",value:function(){this.player.events.trigger("lrcshow"),this.player.template.lrcWrap.classList.remove("aplayer-lrc-hide")}},{key:"hide",value:function(){this.player.events.trigger("lrchide"),this.player.template.lrcWrap.classList.add("aplayer-lrc-hide")}},{key:"toggle",value:function(){this.player.template.lrcWrap.classList.contains("aplayer-lrc-hide")?this.show():this.hide()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.player.audio.currentTime;if(this.index>this.current.length-1||e<this.current[this.index][0]||!this.current[this.index+1]||e>=this.current[this.index+1][0])for(var t=0;t<this.current.length;t++)e>=this.current[t][0]&&(!this.current[t+1]||e<this.current[t+1][0])&&(this.index=t,this.container.style.transform="translateY("+16*-this.index+"px)",this.container.style.webkitTransform="translateY("+16*-this.index+"px)",this.container.getElementsByClassName("aplayer-lrc-current")[0].classList.remove("aplayer-lrc-current"),this.container.getElementsByTagName("p")[t].classList.add("aplayer-lrc-current"))}},{key:"switch",value:function(e){var t=this;if(!this.parsed[e])if(this.async){this.parsed[e]=[["00:00","Loading"]];var n=new XMLHttpRequest;n.onreadystatechange=function(){e===t.player.list.index&&4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?t.parsed[e]=t.parse(n.responseText):(t.player.notice("LRC file request fails: status "+n.status),t.parsed[e]=[["00:00","Not available"]]),t.container.innerHTML=(0,o.default)({lyrics:t.parsed[e]}),t.update(0),t.current=t.parsed[e])};var i=this.player.list.audios[e].lrc;n.open("get",i,!0),n.send(null)}else this.player.list.audios[e].lrc?this.parsed[e]=this.parse(this.player.list.audios[e].lrc):this.parsed[e]=[["00:00","Not available"]];this.container.innerHTML=(0,o.default)({lyrics:this.parsed[e]}),this.update(0),this.current=this.parsed[e]}},{key:"parse",value:function(e){if(e){for(var t=(e=e.replace(/([^\]^\n])\[/g,function(e,t){return t+"\n["})).split("\n"),n=[],i=t.length,a=0;a<i;a++){var r=t[a].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),o=t[a].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(r)for(var s=r.length,l=0;l<s;l++){var u=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(r[l]),c=60*u[1]+parseInt(u[2])+(u[4]?parseInt(u[4])/(2===(u[4]+"").length?100:1e3):0);n.push([c,o])}}return(n=n.filter(function(e){return e[1]})).sort(function(e,t){return e[0]-t[0]}),n}return[]}},{key:"remove",value:function(e){this.parsed.splice(e,1)}},{key:"clear",value:function(){this.parsed=[],this.container.innerHTML=""}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageName=t.options.storageName,this.data=JSON.parse(o.default.storage.get(this.storageName)),this.data||(this.data={}),this.data.volume=this.data.volume||t.options.volume}return a(e,[{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t,o.default.storage.set(this.storageName,JSON.stringify(this.data))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.elements.volume=t.volume,this.elements.played=t.played,this.elements.loaded=t.loaded}return i(e,[{key:"set",value:function(e,t,n){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[n]=100*t+"%"}},{key:"get",value:function(e,t){return parseFloat(this.elements[e].style[t])/100}}]),e}();t.default=a},function(e,t,n){"use strict";(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(e){}}).call(this,n(4))},function(e,t,n){"use strict";(function(t){var i=n(14),a=Object.create(i?t:window),r=/["&'<>]/;a.$escape=function(e){return function(e){var t=""+e,n=r.exec(t);if(!n)return e;var i="",a=void 0,o=void 0,s=void 0;for(a=n.index,o=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==a&&(i+=t.substring(o,a)),o=a+1,i+=s}return o!==a?i+t.substring(o,a):i}(function e(t){"string"!=typeof t&&(t=void 0===t||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},a.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var a in e)t(e[a],a)},e.exports=a}).call(this,n(4))},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";var t="",a=(e=e||{}).options,r=e.cover,o=i.$escape,s=e.icons,l=(arguments[1],function(e){return t+=e}),u=e.getObject;e.theme,e.audio,e.index;return a.fixed?(t+='\n<div class="aplayer-list',a.listFolded&&(t+=" aplayer-list-hide"),t+='"',a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n    <ol",a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n        ",l(n(1)(u({theme:a.theme,audio:a.audio,index:1}))),t+='\n    </ol>\n</div>\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(t+="background-image: url(&quot;",t+=o(r),t+="&quot;);"),t+="background-color: ",t+=o(a.theme),t+=';">\n        <div class="aplayer-button aplayer-play">',t+=s.play,t+='</div>\n    </div>\n    <div class="aplayer-info" style="display: none;">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',t+=o(a.theme),t+=';">\n                        <span class="aplayer-thumb" style="background: ',t+=o(a.theme),t+=';">\n                            <span class="aplayer-loading-icon">',t+=s.loading,t+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',t+=s.skip,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',t+=s.play,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',t+=s.skip,t+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',t+=s.volumeDown,t+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',t+=o(a.theme),t+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?t+=s.orderList:"random"===a.order&&(t+=s.orderRandom),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?t+=s.loopOne:"all"===a.loop?t+=s.loopAll:"none"===a.loop&&(t+=s.loopNone),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',t+=s.menu,t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',t+=s.lrc,t+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',t+=s.right,t+='</button></div>\n</div>\n<div class="aplayer-lrc">\n    <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n</div>\n'):(t+='\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(t+="background-image: url(&quot;",t+=o(r),t+="&quot;);"),t+="background-color: ",t+=o(a.theme),t+=';">\n        <div class="aplayer-button aplayer-play">',t+=s.play,t+='</div>\n    </div>\n    <div class="aplayer-info">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-lrc">\n            <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',t+=o(a.theme),t+=';">\n                        <span class="aplayer-thumb" style="background: ',t+=o(a.theme),t+=';">\n                            <span class="aplayer-loading-icon">',t+=s.loading,t+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',t+=s.skip,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',t+=s.play,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',t+=s.skip,t+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',t+=s.volumeDown,t+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',t+=o(a.theme),t+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?t+=s.orderList:"random"===a.order&&(t+=s.orderRandom),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?t+=s.loopOne:"all"===a.loop?t+=s.loopAll:"none"===a.loop&&(t+=s.loopNone),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',t+=s.menu,t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',t+=s.lrc,t+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',t+=s.right,t+='</button></div>\n</div>\n<div class="aplayer-list',a.listFolded&&(t+=" aplayer-list-hide"),t+='"',a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n    <ol",a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n        ",l(n(1)(u({theme:a.theme,audio:a.audio,index:1}))),t+="\n    </ol>\n</div>\n"),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=o(n(3)),r=o(n(16));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.options=t.options,this.randomOrder=t.randomOrder,this.init()}return i(e,[{key:"init",value:function(){var e="";this.options.audio.length&&(e="random"===this.options.order?this.options.audio[this.randomOrder[0]].cover:this.options.audio[0].cover),this.container.innerHTML=(0,r.default)({options:this.options,icons:a.default,cover:e,getObject:function(e){return e}}),this.lrc=this.container.querySelector(".aplayer-lrc-contents"),this.lrcWrap=this.container.querySelector(".aplayer-lrc"),this.ptime=this.container.querySelector(".aplayer-ptime"),this.info=this.container.querySelector(".aplayer-info"),this.time=this.container.querySelector(".aplayer-time"),this.barWrap=this.container.querySelector(".aplayer-bar-wrap"),this.button=this.container.querySelector(".aplayer-button"),this.body=this.container.querySelector(".aplayer-body"),this.list=this.container.querySelector(".aplayer-list"),this.listOl=this.container.querySelector(".aplayer-list ol"),this.listCurs=this.container.querySelectorAll(".aplayer-list-cur"),this.played=this.container.querySelector(".aplayer-played"),this.loaded=this.container.querySelector(".aplayer-loaded"),this.thumb=this.container.querySelector(".aplayer-thumb"),this.volume=this.container.querySelector(".aplayer-volume"),this.volumeBar=this.container.querySelector(".aplayer-volume-bar"),this.volumeButton=this.container.querySelector(".aplayer-time button"),this.volumeBarWrap=this.container.querySelector(".aplayer-volume-bar-wrap"),this.loop=this.container.querySelector(".aplayer-icon-loop"),this.order=this.container.querySelector(".aplayer-icon-order"),this.menu=this.container.querySelector(".aplayer-icon-menu"),this.pic=this.container.querySelector(".aplayer-pic"),this.title=this.container.querySelector(".aplayer-title"),this.author=this.container.querySelector(".aplayer-author"),this.dtime=this.container.querySelector(".aplayer-dtime"),this.notice=this.container.querySelector(".aplayer-notice"),this.miniSwitcher=this.container.querySelector(".aplayer-miniswitcher"),this.skipBackButton=this.container.querySelector(".aplayer-icon-back"),this.skipForwardButton=this.container.querySelector(".aplayer-icon-forward"),this.skipPlayButton=this.container.querySelector(".aplayer-icon-play"),this.lrcButton=this.container.querySelector(".aplayer-icon-lrc")}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={container:e.element||document.getElementsByClassName("aplayer")[0],mini:e.narrow||e.fixed||!1,fixed:!1,autoplay:!1,mutex:!0,lrcType:e.showlrc||e.lrc||0,preload:"auto",theme:"#b7daff",loop:"all",order:"list",volume:.7,listFolded:e.fixed,listMaxHeight:e.listmaxheight||"250px",audio:e.music||[],storageName:"aplayer-setting"};for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return"[object Array]"!==Object.prototype.toString.call(e.audio)&&(e.audio=[e.audio]),e.audio.map(function(e){return e.name=e.name||e.title||"Audio name",e.artist=e.artist||e.author||"Audio artist",e.cover=e.cover||e.pic,e.type=e.type||"normal",e}),e.audio.length<=1&&"one"===e.loop&&(e.loop="all"),e}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 33 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 22 32"><path d="M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 31"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(e,t,n){"use strict";var i,a,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var u,c=[],p=!1,d=-1;function h(){p&&u&&(p=!1,u.length?c=u.concat(c):d=-1,c.length&&y())}function y(){if(!p){var e=l(h);p=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,p=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||p||l(y)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,t){!function(e,n){if(!e.setImmediate){var i,a,r,o,s,l=1,u={},c=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){y(e.data)},i=function(e){r.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,i=function(e){var t=p.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(y,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&y(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,i(l),l++},d.clearImmediate=h}function h(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(4),n(34))},function(e,t,n){"use strict";var i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(35),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=setTimeout;function a(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,i)}else(1===e._state?s:l)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":n(t))||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof i)return void c((a=i,o=t,function(){a.apply(o,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){l(e,t)}var a,o}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(a);return o(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},r.all=function(e){return new r(function(t,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return t([]);var r=a.length;function o(e,s){try{if(s&&("object"===(void 0===s?"undefined":n(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(t){o(e,t)},i)}a[e]=s,0==--r&&t(a)}catch(e){i(e)}}for(var s=0;s<a.length;s++)o(s,a[s])})},r.resolve=function(e){return e&&"object"===(void 0===e?"undefined":n(e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,a=e.length;i<a;i++)e[i].then(t,n)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=r}).call(this,n(36).setImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=v(n(37)),r=v(n(0)),o=v(n(3)),s=v(n(18)),l=v(n(17)),u=v(n(13)),c=v(n(12)),p=v(n(11)),d=v(n(9)),h=v(n(8)),y=v(n(7)),f=v(n(6));function v(e){return e&&e.__esModule?e:{default:e}}var m=[],g=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=(0,s.default)(t),this.container=this.options.container,this.paused=!0,this.playedPromise=a.default.resolve(),this.mode="normal",this.randomOrder=r.default.randomOrder(this.options.audio.length),this.container.classList.add("aplayer"),this.options.lrcType&&!this.options.fixed&&this.container.classList.add("aplayer-withlrc"),this.options.audio.length>1&&this.container.classList.add("aplayer-withlist"),r.default.isMobile&&this.container.classList.add("aplayer-mobile"),this.arrow=this.container.offsetWidth<=300,this.arrow&&this.container.classList.add("aplayer-arrow"),this.container=this.options.container,2===this.options.lrcType||!0===this.options.lrcType)for(var n=this.container.getElementsByClassName("aplayer-lrc-content"),i=0;i<n.length;i++)this.options.audio[i]&&(this.options.audio[i].lrc=n[i].innerHTML);this.template=new l.default({container:this.container,options:this.options,randomOrder:this.randomOrder}),this.options.fixed&&(this.container.classList.add("aplayer-fixed"),this.template.body.style.width=this.template.body.offsetWidth-18+"px"),this.options.mini&&(this.setMode("mini"),this.template.info.style.display="block"),this.template.info.offsetWidth<200&&this.template.time.classList.add("aplayer-time-narrow"),this.options.lrcType&&(this.lrc=new p.default({container:this.template.lrc,async:3===this.options.lrcType,player:this})),this.events=new y.default,this.storage=new c.default(this),this.bar=new u.default(this.template),this.controller=new d.default(this),this.timer=new h.default(this),this.list=new f.default(this),this.initAudio(),this.bindEvents(),"random"===this.options.order?this.list.switch(this.randomOrder[0]):this.list.switch(0),this.options.autoplay&&this.play(),m.push(this)}return i(e,[{key:"initAudio",value:function(){var e=this;this.audio=document.createElement("audio"),this.audio.preload=this.options.preload;for(var t=function(t){e.audio.addEventListener(e.events.audioEvents[t],function(n){e.events.trigger(e.events.audioEvents[t],n)})},n=0;n<this.events.audioEvents.length;n++)t(n);this.volume(this.storage.get("volume"),!0)}},{key:"bindEvents",value:function(){var e=this;this.on("play",function(){e.paused&&e.setUIPlaying()}),this.on("pause",function(){e.paused||e.setUIPaused()}),this.on("timeupdate",function(){if(!e.disableTimeupdate){e.bar.set("played",e.audio.currentTime/e.duration,"width"),e.lrc&&e.lrc.update();var t=r.default.secondToTime(e.audio.currentTime);e.template.ptime.innerHTML!==t&&(e.template.ptime.innerHTML=t)}}),this.on("durationchange",function(){1!==e.duration&&(e.template.dtime.innerHTML=r.default.secondToTime(e.duration))}),this.on("progress",function(){var t=e.audio.buffered.length?e.audio.buffered.end(e.audio.buffered.length-1)/e.duration:0;e.bar.set("loaded",t,"width")});var t=void 0;this.on("error",function(){e.list.audios.length>1?(e.notice("An audio error has occurred, player will skip forward in 2 seconds."),t=setTimeout(function(){e.skipForward(),e.paused||e.play()},2e3)):1===e.list.audios.length&&e.notice("An audio error has occurred.")}),this.events.on("listswitch",function(){t&&clearTimeout(t)}),this.on("ended",function(){"none"===e.options.loop?"list"===e.options.order?e.list.index<e.list.audios.length-1?(e.list.switch((e.list.index+1)%e.list.audios.length),e.play()):(e.list.switch((e.list.index+1)%e.list.audios.length),e.pause()):"random"===e.options.order&&(e.randomOrder.indexOf(e.list.index)<e.randomOrder.length-1?(e.list.switch(e.nextIndex()),e.play()):(e.list.switch(e.nextIndex()),e.pause())):"one"===e.options.loop?(e.list.switch(e.list.index),e.play()):"all"===e.options.loop&&(e.skipForward(),e.play())})}},{key:"setAudio",value:function(e){this.hls&&(this.hls.destroy(),this.hls=null);var t=e.type;this.options.customAudioType&&this.options.customAudioType[t]?"[object Function]"===Object.prototype.toString.call(this.options.customAudioType[t])?this.options.customAudioType[t](this.audio,e,this):console.error("Illegal customType: "+t):(t&&"auto"!==t||(t=/m3u8(#|\?|$)/i.exec(e.url)?"hls":"normal"),"hls"===t?Hls.isSupported()?(this.hls=new Hls,this.hls.loadSource(e.url),this.hls.attachMedia(this.audio)):this.audio.canPlayType("application/x-mpegURL")||this.audio.canPlayType("application/vnd.apple.mpegURL")?this.audio.src=e.url:this.notice("Error: HLS is not supported."):"normal"===t&&(this.audio.src=e.url)),this.seek(0),this.paused||this.audio.play()}},{key:"theme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list.audios[this.list.index].theme||this.options.theme,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list.index;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.list.audios[t]&&(this.list.audios[t].theme=e),this.template.listCurs[t]&&(this.template.listCurs[t].style.backgroundColor=e),t===this.list.index&&(this.template.pic.style.backgroundColor=e,this.template.played.style.background=e,this.template.thumb.style.background=e,this.template.volume.style.background=e)}},{key:"seek",value:function(e){e=Math.max(e,0),e=Math.min(e,this.duration),this.audio.currentTime=e,this.bar.set("played",e/this.duration,"width"),this.template.ptime.innerHTML=r.default.secondToTime(e)}},{key:"setUIPlaying",value:function(){var e=this;if(this.paused&&(this.paused=!1,this.template.button.classList.remove("aplayer-play"),this.template.button.classList.add("aplayer-pause"),this.template.button.innerHTML="",setTimeout(function(){e.template.button.innerHTML=o.default.pause},100),this.template.skipPlayButton.innerHTML=o.default.pause),this.timer.enable("loading"),this.options.mutex)for(var t=0;t<m.length;t++)this!==m[t]&&m[t].pause()}},{key:"play",value:function(){var e=this;this.setUIPlaying();var t=this.audio.play();t&&t.catch(function(t){console.warn(t),"NotAllowedError"===t.name&&e.setUIPaused()})}},{key:"setUIPaused",value:function(){var e=this;this.paused||(this.paused=!0,this.template.button.classList.remove("aplayer-pause"),this.template.button.classList.add("aplayer-play"),this.template.button.innerHTML="",setTimeout(function(){e.template.button.innerHTML=o.default.play},100),this.template.skipPlayButton.innerHTML=o.default.play),this.container.classList.remove("aplayer-loading"),this.timer.disable("loading")}},{key:"pause",value:function(){this.setUIPaused(),this.audio.pause()}},{key:"switchVolumeIcon",value:function(){this.volume()>=.95?this.template.volumeButton.innerHTML=o.default.volumeUp:this.volume()>0?this.template.volumeButton.innerHTML=o.default.volumeDown:this.template.volumeButton.innerHTML=o.default.volumeOff}},{key:"volume",value:function(e,t){return e=parseFloat(e),isNaN(e)||(e=Math.max(e,0),e=Math.min(e,1),this.bar.set("volume",e,"height"),t||this.storage.set("volume",e),this.audio.volume=e,this.audio.muted&&(this.audio.muted=!1),this.switchVolumeIcon()),this.audio.muted?0:this.audio.volume}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"toggle",value:function(){this.template.button.classList.contains("aplayer-play")?this.play():this.template.button.classList.contains("aplayer-pause")&&this.pause()}},{key:"switchAudio",value:function(e){this.list.switch(e)}},{key:"addAudio",value:function(e){this.list.add(e)}},{key:"removeAudio",value:function(e){this.list.remove(e)}},{key:"destroy",value:function(){m.splice(m.indexOf(this),1),this.pause(),this.container.innerHTML="",this.audio.src="",this.timer.destroy(),this.events.trigger("destroy")}},{key:"setMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.mode=e,"mini"===e?this.container.classList.add("aplayer-narrow"):"normal"===e&&this.container.classList.remove("aplayer-narrow")}},{key:"notice",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=i,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("noticeshow",{text:e}),n&&(this.noticeTime=setTimeout(function(){t.template.notice.style.opacity=0,t.events.trigger("noticehide")},n))}},{key:"prevIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return this.list.index-1<0?this.list.audios.length-1:this.list.index-1;if("random"===this.options.order){var e=this.randomOrder.indexOf(this.list.index);return 0===e?this.randomOrder[this.randomOrder.length-1]:this.randomOrder[e-1]}}},{key:"nextIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return(this.list.index+1)%this.list.audios.length;if("random"===this.options.order){var e=this.randomOrder.indexOf(this.list.index);return e===this.randomOrder.length-1?this.randomOrder[0]:this.randomOrder[e+1]}}},{key:"skipBack",value:function(){this.list.switch(this.prevIndex())}},{key:"skipForward",value:function(){this.list.switch(this.nextIndex())}},{key:"duration",get:function(){return isNaN(this.audio.duration)?0:this.audio.duration}}],[{key:"version",get:function(){return"1.10.1"}}]),e}();t.default=g},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(40);var i,a=n(38),r=(i=a)&&i.__esModule?i:{default:i};console.log("\n %c APlayer v1.10.1 af84efb %c http://aplayer.js.org \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),t.default=r.default}]).default});
//# sourceMappingURL=APlayer.min.js.map

</script>
<!-- require MetingJS -->
<script>
  "use strict";function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class MetingJSElement extends HTMLElement{connectedCallback(){window.APlayer&&window.fetch&&(this._init(),this._parse())}disconnectedCallback(){this.lock||this.aplayer.destroy()}_camelize(a){return a.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(a,b)=>b.toUpperCase())}_init(){let a={};for(let b=0;b<this.attributes.length;b+=1)a[this._camelize(this.attributes[b].name)]=this.attributes[b].value;let b=["server","type","id","api","auth","auto","lock","name","title","artist","author","url","cover","pic","lyric","lrc"];this.meta={};for(var c=0;c<b.length;c++){let d=b[c];this.meta[d]=a[d],delete a[d]}this.config=a,this.api=this.meta.api||window.meting_api||"https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r",this.meta.auto&&this._parse_link()}_parse_link(){let a=[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+).html","tencent","song"],["y.qq.com.*album/(\\w+).html","tencent","album"],["y.qq.com.*singer/(\\w+).html","tencent","artist"],["y.qq.com.*playsquare/(\\w+).html","tencent","playlist"],["y.qq.com.*playlist/(\\w+).html","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]];for(var b=0;b<a.length;b++){let c=a[b],d=new RegExp(c[0]),e=d.exec(this.meta.auto);if(null!==e)return this.meta.server=c[1],this.meta.type=c[2],void(this.meta.id=e[1])}}_parse(){if(this.meta.url){let a={name:this.meta.name||this.meta.title||"Audio name",artist:this.meta.artist||this.meta.author||"Audio artist",url:this.meta.url,cover:this.meta.cover||this.meta.pic,lrc:this.meta.lrc||this.meta.lyric||"",type:this.meta.type||"auto"};return a.lrc||(this.meta.lrcType=0),this.innerText&&(a.lrc=this.innerText,this.meta.lrcType=2),void this._loadPlayer([a])}let a=this.api.replace(":server",this.meta.server).replace(":type",this.meta.type).replace(":id",this.meta.id).replace(":auth",this.meta.auth).replace(":r",Math.random());fetch(a).then(a=>a.json()).then(a=>this._loadPlayer(a))}_loadPlayer(a){let b={audio:a,mutex:!0,lrcType:this.meta.lrcType||3,storageName:"metingjs"};if(a.length){let a=_objectSpread({},b,this.config);for(let b in a)("true"===a[b]||"false"===a[b])&&(a[b]="true"===a[b]);let c=document.createElement("div");a.container=c,this.appendChild(c),this.aplayer=new APlayer(a)}}}console.log("\n %c MetingJS v2.0.1 %c https://github.com/metowolf/MetingJS \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),window.customElements&&!window.customElements.get("meting-js")&&(window.MetingJSElement=MetingJSElement,window.customElements.define("meting-js",MetingJSElement));
</script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="7802292660"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.3"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script> -->
  
<div class="skin-menu no-select" id="mainskin" style="position: fixed">
 <div class="theme-controls row-container">
  <ul class="menu-list">
   <li id="white-bg"> <i class="fa fa-television" aria-hidden="true"></i></li>
   <li id="sakura-bg"> <i class="iconfont icon-sakura"></i></li>
   <li id="gribs-bg"> <i class="fa fa-slack" aria-hidden="true"></i></li>
   <li id="KAdots-bg"> <i class="iconfont icon-dots"></i></li>
   <li id="totem-bg"> <i class="fa fa-optin-monster" aria-hidden="true"></i></li>
   <li id="pixiv-bg"> <i class="iconfont icon-pixiv"></i></li>
   <li id="bing-bg"> <i class="iconfont icon-bing"></i></li>
   <li id="dark-bg"> <i class="fa fa-moon-o" aria-hidden="true"></i></li>
  </ul>
 </div>
</div>
<canvas id="night-mode-cover"></canvas>
 
  

<div class="changeSkin-gear no-select">
  <div class="keys" id="setbtn"> 
   <span id="open-skinMenu"> 切换主题 | SCHEME TOOL  
     <i class="iconfont icon-gear inline-block rotating"></i> 
   </span>
  </div>
</div>

  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://i0.hdslb.com/bfs/album/31885206e51d953c6cdd9e7fcc4e65e31d884f2e.jpg">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">CCR39のLazyNest</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/ccr39" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://weibo.com/p/1005057384082037/home?from=page_100505&mod=TAB&is_all=1#place" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            首页
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            归档
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/%E6%8A%80%E6%9C%AF/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  技术
                </a>
              </li>
            
              <li>
                <a href="/categories/%E7%94%9F%E6%B4%BB/">
                  <i class="fa fa-file-text-o" aria-hidden="true"></i>
                  生活
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%B5%84%E6%BA%90/">
                  <i class="fa fa-cloud-download" aria-hidden="true"></i>
                  资源
                </a>
              </li>
            
              <li>
                <a href="/categories/%E8%BD%AC%E8%BD%BD/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  转载
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            清单
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/%E6%82%A6%E8%AF%BB/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  书单
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  番组
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  歌单
                </a>
              </li>
            
              <li>
                <a href="/tags/%E5%9B%BE%E9%9B%86/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  图集
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            留言板
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            友人帐
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/donate/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-heart faa-pulse" aria-hidden="true"></i>
            赞赏
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            关于
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  我？
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  主题
                </a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2025 ccr39-blog</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  
<style>
  .aplayer{background:#fff;font-family:Arial,Helvetica,sans-serif;margin:5px;box-shadow:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);border-radius:2px;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:normal;position:relative}.aplayer *{box-sizing:content-box}.aplayer svg{width:100%;height:100%}.aplayer svg circle,.aplayer svg path{fill:#fff}.aplayer.aplayer-withlist .aplayer-info{border-bottom:1px solid #e9e9e9}.aplayer.aplayer-withlist .aplayer-list{display:block}.aplayer.aplayer-withlist .aplayer-icon-order,.aplayer.aplayer-withlist .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu{display:inline}.aplayer.aplayer-withlrc .aplayer-pic{height:90px;width:90px}.aplayer.aplayer-withlrc .aplayer-info{margin-left:90px;height:90px;padding:10px 7px 0}.aplayer.aplayer-withlrc .aplayer-lrc{display:block}.aplayer.aplayer-narrow{width:66px}.aplayer.aplayer-narrow .aplayer-info,.aplayer.aplayer-narrow .aplayer-list{display:none}.aplayer.aplayer-narrow .aplayer-body,.aplayer.aplayer-narrow .aplayer-pic{height:66px;width:66px}.aplayer.aplayer-fixed{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:999999;overflow:visible;max-width:400px;box-shadow:none}.aplayer.aplayer-fixed .aplayer-list{margin-bottom:65px;border:1px solid #eee;border-bottom:none}.aplayer.aplayer-fixed .aplayer-body{position:fixed;bottom:0;left:0;right:0;margin:0;z-index:999999;background:#fff;padding-right:18px;transition:all .3s ease;max-width:400px}.aplayer.aplayer-fixed .aplayer-lrc{display:block;position:fixed;bottom:10px;left:0;right:0;margin:0;z-index:999998;pointer-events:none;text-shadow:-1px -1px 0 #fff}.aplayer.aplayer-fixed .aplayer-lrc:after,.aplayer.aplayer-fixed .aplayer-lrc:before{display:none}.aplayer.aplayer-fixed .aplayer-info{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:0 0;transform-origin:0 0;transition:all .3s ease;border-bottom:none;border-top:1px solid #e9e9e9}.aplayer.aplayer-fixed .aplayer-info .aplayer-music{width:calc(100% - 105px)}.aplayer.aplayer-fixed .aplayer-miniswitcher{display:block}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-info{display:block;-webkit-transform:scaleX(0);transform:scaleX(0)}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{width:66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-miniswitcher .aplayer-icon{-webkit-transform:rotateY(0);transform:rotateY(0)}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-lrc,.aplayer.aplayer-fixed .aplayer-icon-play{display:inline-block}.aplayer.aplayer-fixed .aplayer-icon-back,.aplayer.aplayer-fixed .aplayer-icon-forward,.aplayer.aplayer-fixed .aplayer-icon-menu,.aplayer.aplayer-fixed .aplayer-icon-play{position:absolute;bottom:27px;width:20px;height:20px}.aplayer.aplayer-fixed .aplayer-icon-back{right:75px}.aplayer.aplayer-fixed .aplayer-icon-play{right:50px}.aplayer.aplayer-fixed .aplayer-icon-forward{right:25px}.aplayer.aplayer-fixed .aplayer-icon-menu{right:0}.aplayer.aplayer-arrow .aplayer-icon-loop,.aplayer.aplayer-arrow .aplayer-icon-order,.aplayer.aplayer-mobile .aplayer-icon-volume-down{display:none}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-loading-icon{display:block}.aplayer.aplayer-loading .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-body{position:relative}.aplayer .aplayer-icon{width:15px;height:15px;border:none;background-color:transparent;outline:none;cursor:pointer;opacity:.8;vertical-align:middle;padding:0;font-size:12px;margin:0;display:inline-block}.aplayer .aplayer-icon path{transition:all .2s ease-in-out}.aplayer .aplayer-icon-back,.aplayer .aplayer-icon-forward,.aplayer .aplayer-icon-lrc,.aplayer .aplayer-icon-order,.aplayer .aplayer-icon-play{display:none}.aplayer .aplayer-icon-lrc-inactivity svg{opacity:.4}.aplayer .aplayer-icon-forward{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.aplayer .aplayer-lrc-content{display:none}.aplayer .aplayer-pic{position:relative;float:left;height:66px;width:66px;background-size:cover;background-position:50%;transition:all .3s ease;cursor:pointer}.aplayer .aplayer-pic:hover .aplayer-button{opacity:1}.aplayer .aplayer-pic .aplayer-button{position:absolute;border-radius:50%;opacity:.8;text-shadow:0 1px 1px rgba(0,0,0,.2);box-shadow:0 1px 1px rgba(0,0,0,.2);background:rgba(0,0,0,.2);transition:all .1s ease}.aplayer .aplayer-pic .aplayer-button path{fill:#fff}.aplayer .aplayer-pic .aplayer-hide{display:none}.aplayer .aplayer-pic .aplayer-play{width:26px;height:26px;border:2px solid #fff;bottom:50%;right:50%;margin:0 -15px -15px 0}.aplayer .aplayer-pic .aplayer-play svg{position:absolute;top:3px;left:4px;height:20px;width:20px}.aplayer .aplayer-pic .aplayer-pause{width:16px;height:16px;border:2px solid #fff;bottom:4px;right:4px}.aplayer .aplayer-pic .aplayer-pause svg{position:absolute;top:2px;left:2px;height:12px;width:12px}.aplayer .aplayer-info{margin-left:66px;padding:14px 7px 0 10px;height:66px;box-sizing:border-box}.aplayer .aplayer-info .aplayer-music{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin:0 0 13px 5px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default;padding-bottom:2px;height:20px}.aplayer .aplayer-info .aplayer-music .aplayer-title{font-size:14px}.aplayer .aplayer-info .aplayer-music .aplayer-author{font-size:12px;color:#666}.aplayer .aplayer-info .aplayer-controller{position:relative;display:flex}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap{margin:0 0 0 5px;padding:4px 0;cursor:pointer!important;flex:1}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap:hover .aplayer-bar .aplayer-played .aplayer-thumb{-webkit-transform:scale(1);transform:scale(1)}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar{position:relative;height:2px;width:100%;background:#cdcdcd}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-loaded{position:absolute;left:0;top:0;bottom:0;background:#aaa;height:2px;transition:all .5s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played{position:absolute;left:0;top:0;bottom:0;height:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-bar-wrap .aplayer-bar .aplayer-played .aplayer-thumb{position:absolute;top:0;right:5px;margin-top:-4px;margin-right:-10px;height:10px;width:10px;border-radius:50%;cursor:pointer;transition:all .3s ease-in-out;-webkit-transform:scale(0);transform:scale(0)}.aplayer .aplayer-info .aplayer-controller .aplayer-time{position:relative;right:0;bottom:4px;height:17px;color:#999;font-size:11px;padding-left:7px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-time-inner{vertical-align:middle}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon{cursor:pointer;transition:all .2s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon path{fill:#666}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-loop{margin-right:2px}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon:hover path{fill:#000}.aplayer .aplayer-info .aplayer-controller .aplayer-time .aplayer-icon.aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-menu,.aplayer .aplayer-info .aplayer-controller .aplayer-time.aplayer-time-narrow .aplayer-icon-mode{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap{position:relative;display:inline-block;margin-left:3px;cursor:pointer!important}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap:hover .aplayer-volume-bar-wrap{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap{position:absolute;bottom:15px;right:-3px;width:25px;height:0;z-index:999999;overflow:hidden;transition:all .2s ease-in-out}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap.aplayer-volume-bar-wrap-active{height:40px}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar{position:absolute;bottom:0;right:10px;width:5px;height:35px;background:#aaa;border-radius:2.5px;overflow:hidden}.aplayer .aplayer-info .aplayer-controller .aplayer-volume-wrap .aplayer-volume-bar-wrap .aplayer-volume-bar .aplayer-volume{position:absolute;bottom:0;right:0;width:5px;transition:all .1s ease}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon{display:none}.aplayer .aplayer-info .aplayer-controller .aplayer-loading-icon svg{position:absolute;-webkit-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite}.aplayer .aplayer-lrc{display:none;position:relative;height:30px;text-align:center;overflow:hidden;margin:-10px 0 7px}.aplayer .aplayer-lrc:before{top:0;height:10%;background:linear-gradient(180deg,#fff 0,hsla(0,0%,100%,0));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#00ffffff",GradientType=0)}.aplayer .aplayer-lrc:after,.aplayer .aplayer-lrc:before{position:absolute;z-index:1;display:block;overflow:hidden;width:100%;content:" "}.aplayer .aplayer-lrc:after{bottom:0;height:33%;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0,hsla(0,0%,100%,.8));filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#00ffffff",endColorstr="#ccffffff",GradientType=0)}.aplayer .aplayer-lrc p{font-size:12px;color:#666;line-height:16px!important;height:16px!important;padding:0!important;margin:0!important;transition:all .5s ease-out;opacity:.4;overflow:hidden}.aplayer .aplayer-lrc p.aplayer-lrc-current{opacity:1;overflow:visible;height:auto!important;min-height:16px}.aplayer .aplayer-lrc.aplayer-lrc-hide{display:none}.aplayer .aplayer-lrc .aplayer-lrc-contents{width:100%;transition:all .5s ease-out;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;cursor:default}.aplayer .aplayer-list{overflow:auto;transition:all .5s ease;will-change:height;display:none;overflow:hidden}.aplayer .aplayer-list.aplayer-list-hide{max-height:0!important}.aplayer .aplayer-list ol{list-style-type:none;margin:0;padding:0;overflow-y:auto}.aplayer .aplayer-list ol::-webkit-scrollbar{width:5px}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb{border-radius:3px;background-color:#eee}.aplayer .aplayer-list ol::-webkit-scrollbar-thumb:hover{background-color:#ccc}.aplayer .aplayer-list ol li{position:relative;height:32px;line-height:32px;padding:0 15px;font-size:12px;border-top:1px solid #e9e9e9;cursor:pointer;transition:all .2s ease;overflow:hidden;margin:0}.aplayer .aplayer-list ol li:first-child{border-top:none}.aplayer .aplayer-list ol li:hover{background:#efefef}.aplayer .aplayer-list ol li.aplayer-list-light{background:#e9e9e9}.aplayer .aplayer-list ol li.aplayer-list-light .aplayer-list-cur{display:inline-block}.aplayer .aplayer-list ol li .aplayer-list-cur{display:none;width:3px;height:22px;position:absolute;left:0;top:5px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-index{color:#666;margin-right:12px;cursor:pointer}.aplayer .aplayer-list ol li .aplayer-list-author{color:#666;float:right;cursor:pointer}.aplayer .aplayer-notice{opacity:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:12px;border-radius:4px;padding:5px 10px;transition:all .3s ease-in-out;overflow:hidden;color:#fff;pointer-events:none;background-color:#f4f4f5;color:#909399}.aplayer .aplayer-miniswitcher{display:none;position:absolute;top:0;right:0;bottom:0;height:100%;background:#e6e6e6;width:18px;border-radius:0 2px 2px 0}.aplayer .aplayer-miniswitcher .aplayer-icon{height:100%;width:100%;-webkit-transform:rotateY(180deg);transform:rotateY(180deg);transition:all .3s ease}.aplayer .aplayer-miniswitcher .aplayer-icon path{fill:#666}.aplayer .aplayer-miniswitcher .aplayer-icon:hover path{fill:#000}@-webkit-keyframes aplayer-roll{0%{left:0}to{left:-100%}}@keyframes aplayer-roll{0%{left:0}to{left:-100%}}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}

/*# sourceMappingURL=APlayer.min.css.map*/
</style>
<script>
  !function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("APlayer",[],t):"object"==typeof exports?exports.APlayer=t():e.APlayer=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=41)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=/mobile/i.test(window.navigator.userAgent),a={secondToTime:function(e){var t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n);return(t>0?[t,n,i]:[n,i]).map(function(e){return e<10?"0"+e:""+e}).join(":")},getElementViewLeft:function(e){var t=e.offsetLeft,n=e.offsetParent,i=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==n&&n!==e;)t+=n.offsetLeft,n=n.offsetParent;else for(;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t-i},getElementViewTop:function(e,t){for(var n,i=e.offsetTop,a=e.offsetParent;null!==a;)i+=a.offsetTop,a=a.offsetParent;return n=document.body.scrollTop+document.documentElement.scrollTop,t?i:i-n},isMobile:i,storage:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)}},nameMap:{dragStart:i?"touchstart":"mousedown",dragMove:i?"touchmove":"mousemove",dragEnd:i?"touchend":"mouseup"},randomOrder:function(e){return function(e){for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[n];e[n]=e[t],e[t]=i}return e}([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(e))).map(function(e,t){return t}))}};t.default=a},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";e=e||{};var t="",n=i.$each,a=e.audio,r=(e.$value,e.$index,i.$escape),o=e.theme,s=e.index;return n(a,function(e,n){t+='\n<li>\n    <span class="aplayer-list-cur" style="background-color: ',t+=r(e.theme||o),t+=';"></span>\n    <span class="aplayer-list-index">',t+=r(n+s),t+='</span>\n    <span class="aplayer-list-title">',t+=r(e.name),t+='</span>\n    <span class="aplayer-list-author">',t+=r(e.artist),t+="</span>\n</li>\n"}),t}},function(e,t,n){"use strict";e.exports=n(15)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(33)),a=g(n(32)),r=g(n(31)),o=g(n(30)),s=g(n(29)),l=g(n(28)),u=g(n(27)),c=g(n(26)),p=g(n(25)),d=g(n(24)),h=g(n(23)),y=g(n(22)),f=g(n(21)),v=g(n(20)),m=g(n(19));function g(e){return e&&e.__esModule?e:{default:e}}var w={play:i.default,pause:a.default,volumeUp:r.default,volumeDown:o.default,volumeOff:s.default,orderRandom:l.default,orderList:u.default,menu:c.default,loopAll:p.default,loopOne:d.default,loopNone:h.default,loading:y.default,right:f.default,skip:v.default,lrc:m.default};t.default=w},function(e,t,n){"use strict";var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":a(window))&&(i=window)}e.exports=i},function(e,t,n){"use strict";var i,a,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(a="function"==typeof(i=function(){if("object"===("undefined"==typeof window?"undefined":r(window))&&void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var e=function(e,t,n,i){return n>i?t:e+(t-e)*((a=n/i)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1);var a},t=function(t,n,i,a){n=n||500;var r=(a=a||window).scrollTop||window.pageYOffset;if("number"==typeof t)var o=parseInt(t);else var o=function(e,t){return"HTML"===e.nodeName?-t:e.getBoundingClientRect().top+t}(t,r);var s=Date.now(),l=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)};!function u(){var c=Date.now()-s;a!==window?a.scrollTop=e(r,o,c,n):window.scroll(0,e(r,o,c,n)),c>n?"function"==typeof i&&i(t):l(u)}()},n=function(e){if(!e.defaultPrevented){e.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash);var n=document.getElementById(this.hash.substring(1));if(!n)return;t(n,500,function(e){location.replace("#"+e.id)})}};return document.addEventListener("DOMContentLoaded",function(){for(var e,t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),i=t.length;e=t[--i];)e.addEventListener("click",n,!1)}),t}})?i.call(t,n,t,e):i)||(e.exports=a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=s(n(1)),r=s(n(0)),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.index=0,this.audios=this.player.options.audio,this.bindEvents()}return i(e,[{key:"bindEvents",value:function(){var e=this;this.player.template.list.addEventListener("click",function(t){var n=void 0;n="LI"===t.target.tagName.toUpperCase()?t.target:t.target.parentElement;var i=parseInt(n.getElementsByClassName("aplayer-list-index")[0].innerHTML)-1;i!==e.index?(e.switch(i),e.player.play()):e.player.toggle()})}},{key:"show",value:function(){this.player.events.trigger("listshow"),this.player.template.list.classList.remove("aplayer-list-hide"),this.player.template.listOl.scrollTop=33*this.index}},{key:"hide",value:function(){this.player.events.trigger("listhide"),this.player.template.list.classList.add("aplayer-list-hide")}},{key:"toggle",value:function(){this.player.template.list.classList.contains("aplayer-list-hide")?this.show():this.hide()}},{key:"add",value:function(e){this.player.events.trigger("listadd",{audios:e}),"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.map(function(e){return e.name=e.name||e.title||"Audio name",e.artist=e.artist||e.author||"Audio artist",e.cover=e.cover||e.pic,e.type=e.type||"normal",e});var t=!(this.audios.length>1),n=0===this.audios.length;this.player.template.listOl.innerHTML+=(0,a.default)({theme:this.player.options.theme,audio:e,index:this.audios.length+1}),this.audios=this.audios.concat(e),t&&this.audios.length>1&&this.player.container.classList.add("aplayer-withlist"),this.player.randomOrder=r.default.randomOrder(this.audios.length),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur"),this.player.template.listCurs[this.audios.length-1].style.backgroundColor=e.theme||this.player.options.theme,n&&("random"===this.player.options.order?this.switch(this.player.randomOrder[0]):this.switch(0))}},{key:"remove",value:function(e){if(this.player.events.trigger("listremove",{index:e}),this.audios[e])if(this.audios.length>1){var t=this.player.container.querySelectorAll(".aplayer-list li");t[e].remove(),this.audios.splice(e,1),this.player.lrc&&this.player.lrc.remove(e),e===this.index&&(this.audios[e]?this.switch(e):this.switch(e-1)),this.index>e&&this.index--;for(var n=e;n<t.length;n++)t[n].getElementsByClassName("aplayer-list-index")[0].textContent=n;1===this.audios.length&&this.player.container.classList.remove("aplayer-withlist"),this.player.template.listCurs=this.player.container.querySelectorAll(".aplayer-list-cur")}else this.clear()}},{key:"switch",value:function(e){if(this.player.events.trigger("listswitch",{index:e}),void 0!==e&&this.audios[e]){this.index=e;var t=this.audios[this.index];this.player.template.pic.style.backgroundImage=t.cover?"url('"+t.cover+"')":"",this.player.theme(this.audios[this.index].theme||this.player.options.theme,this.index,!1),this.player.template.title.innerHTML=t.name,this.player.template.author.innerHTML=t.artist?" - "+t.artist:"";var n=this.player.container.getElementsByClassName("aplayer-list-light")[0];n&&n.classList.remove("aplayer-list-light"),this.player.container.querySelectorAll(".aplayer-list li")[this.index].classList.add("aplayer-list-light"),(0,o.default)(33*this.index,500,null,this.player.template.listOl),this.player.setAudio(t),this.player.lrc&&this.player.lrc.switch(this.index),this.player.lrc&&this.player.lrc.update(0),1!==this.player.duration&&(this.player.template.dtime.innerHTML=r.default.secondToTime(this.player.duration))}}},{key:"clear",value:function(){this.player.events.trigger("listclear"),this.index=0,this.player.container.classList.remove("aplayer-withlist"),this.player.pause(),this.audios=[],this.player.lrc&&this.player.lrc.clear(),this.player.audio.src="",this.player.template.listOl.innerHTML="",this.player.template.pic.style.backgroundImage="",this.player.theme(this.player.options.theme,this.index,!1),this.player.template.title.innerHTML="No audio",this.player.template.author.innerHTML="",this.player.bar.set("loaded",0,"width"),this.player.template.dtime.innerHTML=r.default.secondToTime(0)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={},this.audioEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["destroy","listshow","listhide","listadd","listremove","listswitch","listclear","noticeshow","noticehide","lrcshow","lrchide"]}return i(e,[{key:"on",value:function(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}},{key:"trigger",value:function(e,t){if(this.events[e]&&this.events[e].length)for(var n=0;n<this.events[e].length;n++)this.events[e][n](t)}},{key:"type",value:function(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.audioEvents.indexOf(e)?"audio":(console.error("Unknown event name: "+e),null)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},this.types=["loading"],this.init()}return i(e,[{key:"init",value:function(){var e=this;this.types.forEach(function(t){e["init"+t+"Checker"]()})}},{key:"initloadingChecker",value:function(){var e=this,t=0,n=0,i=!1;this.loadingChecker=setInterval(function(){e.enableloadingChecker&&(n=e.player.audio.currentTime,i||n!==t||e.player.audio.paused||(e.player.container.classList.add("aplayer-loading"),i=!0),i&&n>t&&!e.player.audio.paused&&(e.player.container.classList.remove("aplayer-loading"),i=!1),t=n)},100)}},{key:"enable",value:function(e){this["enable"+e+"Checker"]=!0,"fps"===e&&this.initfpsChecker()}},{key:"disable",value:function(e){this["enable"+e+"Checker"]=!1}},{key:"destroy",value:function(){var e=this;this.types.forEach(function(t){e["enable"+t+"Checker"]=!1,e[t+"Checker"]&&clearInterval(e[t+"Checker"])})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=o(n(0)),r=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=t,this.initPlayButton(),this.initPlayBar(),this.initOrderButton(),this.initLoopButton(),this.initMenuButton(),a.default.isMobile||this.initVolumeButton(),this.initMiniSwitcher(),this.initSkipButton(),this.initLrcButton()}return i(e,[{key:"initPlayButton",value:function(){var e=this;this.player.template.pic.addEventListener("click",function(){e.player.toggle()})}},{key:"initPlayBar",value:function(){var e=this,t=function(t){var n=((t.clientX||t.changedTouches[0].clientX)-a.default.getElementViewLeft(e.player.template.barWrap))/e.player.template.barWrap.clientWidth;n=Math.max(n,0),n=Math.min(n,1),e.player.bar.set("played",n,"width"),e.player.lrc&&e.player.lrc.update(n*e.player.duration),e.player.template.ptime.innerHTML=a.default.secondToTime(n*e.player.duration)},n=function n(i){document.removeEventListener(a.default.nameMap.dragEnd,n),document.removeEventListener(a.default.nameMap.dragMove,t);var r=((i.clientX||i.changedTouches[0].clientX)-a.default.getElementViewLeft(e.player.template.barWrap))/e.player.template.barWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),e.player.bar.set("played",r,"width"),e.player.seek(e.player.bar.get("played","width")*e.player.duration),e.player.disableTimeupdate=!1};this.player.template.barWrap.addEventListener(a.default.nameMap.dragStart,function(){e.player.disableTimeupdate=!0,document.addEventListener(a.default.nameMap.dragMove,t),document.addEventListener(a.default.nameMap.dragEnd,n)})}},{key:"initVolumeButton",value:function(){var e=this;this.player.template.volumeButton.addEventListener("click",function(){e.player.audio.muted?(e.player.audio.muted=!1,e.player.switchVolumeIcon(),e.player.bar.set("volume",e.player.volume(),"height")):(e.player.audio.muted=!0,e.player.switchVolumeIcon(),e.player.bar.set("volume",0,"height"))});var t=function(t){var n=1-((t.clientY||t.changedTouches[0].clientY)-a.default.getElementViewTop(e.player.template.volumeBar,e.player.options.fixed))/e.player.template.volumeBar.clientHeight;n=Math.max(n,0),n=Math.min(n,1),e.player.volume(n)},n=function n(i){e.player.template.volumeBarWrap.classList.remove("aplayer-volume-bar-wrap-active"),document.removeEventListener(a.default.nameMap.dragEnd,n),document.removeEventListener(a.default.nameMap.dragMove,t);var r=1-((i.clientY||i.changedTouches[0].clientY)-a.default.getElementViewTop(e.player.template.volumeBar,e.player.options.fixed))/e.player.template.volumeBar.clientHeight;r=Math.max(r,0),r=Math.min(r,1),e.player.volume(r)};this.player.template.volumeBarWrap.addEventListener(a.default.nameMap.dragStart,function(){e.player.template.volumeBarWrap.classList.add("aplayer-volume-bar-wrap-active"),document.addEventListener(a.default.nameMap.dragMove,t),document.addEventListener(a.default.nameMap.dragEnd,n)})}},{key:"initOrderButton",value:function(){var e=this;this.player.template.order.addEventListener("click",function(){"list"===e.player.options.order?(e.player.options.order="random",e.player.template.order.innerHTML=r.default.orderRandom):"random"===e.player.options.order&&(e.player.options.order="list",e.player.template.order.innerHTML=r.default.orderList)})}},{key:"initLoopButton",value:function(){var e=this;this.player.template.loop.addEventListener("click",function(){e.player.list.audios.length>1?"one"===e.player.options.loop?(e.player.options.loop="none",e.player.template.loop.innerHTML=r.default.loopNone):"none"===e.player.options.loop?(e.player.options.loop="all",e.player.template.loop.innerHTML=r.default.loopAll):"all"===e.player.options.loop&&(e.player.options.loop="one",e.player.template.loop.innerHTML=r.default.loopOne):"one"===e.player.options.loop||"all"===e.player.options.loop?(e.player.options.loop="none",e.player.template.loop.innerHTML=r.default.loopNone):"none"===e.player.options.loop&&(e.player.options.loop="all",e.player.template.loop.innerHTML=r.default.loopAll)})}},{key:"initMenuButton",value:function(){var e=this;this.player.template.menu.addEventListener("click",function(){e.player.list.toggle()})}},{key:"initMiniSwitcher",value:function(){var e=this;this.player.template.miniSwitcher.addEventListener("click",function(){e.player.setMode("mini"===e.player.mode?"normal":"mini")})}},{key:"initSkipButton",value:function(){var e=this;this.player.template.skipBackButton.addEventListener("click",function(){e.player.skipBack()}),this.player.template.skipForwardButton.addEventListener("click",function(){e.player.skipForward()}),this.player.template.skipPlayButton.addEventListener("click",function(){e.player.toggle()})}},{key:"initLrcButton",value:function(){var e=this;this.player.template.lrcButton.addEventListener("click",function(){e.player.template.lrcButton.classList.contains("aplayer-icon-lrc-inactivity")?(e.player.template.lrcButton.classList.remove("aplayer-icon-lrc-inactivity"),e.player.lrc&&e.player.lrc.show()):(e.player.template.lrcButton.classList.add("aplayer-icon-lrc-inactivity"),e.player.lrc&&e.player.lrc.hide())})}}]),e}();t.default=s},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";e=e||{};var t="",n=i.$each,a=e.lyrics,r=(e.$value,e.$index,i.$escape);return n(a,function(e,n){t+="\n    <p",0===n&&(t+=' class="aplayer-lrc-current"'),t+=">",t+=r(e[1]),t+="</p>\n"}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(10),o=(i=r)&&i.__esModule?i:{default:i};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.async=t.async,this.player=t.player,this.parsed=[],this.index=0,this.current=[]}return a(e,[{key:"show",value:function(){this.player.events.trigger("lrcshow"),this.player.template.lrcWrap.classList.remove("aplayer-lrc-hide")}},{key:"hide",value:function(){this.player.events.trigger("lrchide"),this.player.template.lrcWrap.classList.add("aplayer-lrc-hide")}},{key:"toggle",value:function(){this.player.template.lrcWrap.classList.contains("aplayer-lrc-hide")?this.show():this.hide()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.player.audio.currentTime;if(this.index>this.current.length-1||e<this.current[this.index][0]||!this.current[this.index+1]||e>=this.current[this.index+1][0])for(var t=0;t<this.current.length;t++)e>=this.current[t][0]&&(!this.current[t+1]||e<this.current[t+1][0])&&(this.index=t,this.container.style.transform="translateY("+16*-this.index+"px)",this.container.style.webkitTransform="translateY("+16*-this.index+"px)",this.container.getElementsByClassName("aplayer-lrc-current")[0].classList.remove("aplayer-lrc-current"),this.container.getElementsByTagName("p")[t].classList.add("aplayer-lrc-current"))}},{key:"switch",value:function(e){var t=this;if(!this.parsed[e])if(this.async){this.parsed[e]=[["00:00","Loading"]];var n=new XMLHttpRequest;n.onreadystatechange=function(){e===t.player.list.index&&4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?t.parsed[e]=t.parse(n.responseText):(t.player.notice("LRC file request fails: status "+n.status),t.parsed[e]=[["00:00","Not available"]]),t.container.innerHTML=(0,o.default)({lyrics:t.parsed[e]}),t.update(0),t.current=t.parsed[e])};var i=this.player.list.audios[e].lrc;n.open("get",i,!0),n.send(null)}else this.player.list.audios[e].lrc?this.parsed[e]=this.parse(this.player.list.audios[e].lrc):this.parsed[e]=[["00:00","Not available"]];this.container.innerHTML=(0,o.default)({lyrics:this.parsed[e]}),this.update(0),this.current=this.parsed[e]}},{key:"parse",value:function(e){if(e){for(var t=(e=e.replace(/([^\]^\n])\[/g,function(e,t){return t+"\n["})).split("\n"),n=[],i=t.length,a=0;a<i;a++){var r=t[a].match(/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g),o=t[a].replace(/.*\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/g,"").replace(/<(\d{2}):(\d{2})(\.(\d{2,3}))?>/g,"").replace(/^\s+|\s+$/g,"");if(r)for(var s=r.length,l=0;l<s;l++){var u=/\[(\d{2}):(\d{2})(\.(\d{2,3}))?]/.exec(r[l]),c=60*u[1]+parseInt(u[2])+(u[4]?parseInt(u[4])/(2===(u[4]+"").length?100:1e3):0);n.push([c,o])}}return(n=n.filter(function(e){return e[1]})).sort(function(e,t){return e[0]-t[0]}),n}return[]}},{key:"remove",value:function(e){this.parsed.splice(e,1)}},{key:"clear",value:function(){this.parsed=[],this.container.innerHTML=""}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.storageName=t.options.storageName,this.data=JSON.parse(o.default.storage.get(this.storageName)),this.data||(this.data={}),this.data.volume=this.data.volume||t.options.volume}return a(e,[{key:"get",value:function(e){return this.data[e]}},{key:"set",value:function(e,t){this.data[e]=t,o.default.storage.set(this.storageName,JSON.stringify(this.data))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={},this.elements.volume=t.volume,this.elements.played=t.played,this.elements.loaded=t.loaded}return i(e,[{key:"set",value:function(e,t,n){t=Math.max(t,0),t=Math.min(t,1),this.elements[e].style[n]=100*t+"%"}},{key:"get",value:function(e,t){return parseFloat(this.elements[e].style[t])/100}}]),e}();t.default=a},function(e,t,n){"use strict";(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(e){}}).call(this,n(4))},function(e,t,n){"use strict";(function(t){var i=n(14),a=Object.create(i?t:window),r=/["&'<>]/;a.$escape=function(e){return function(e){var t=""+e,n=r.exec(t);if(!n)return e;var i="",a=void 0,o=void 0,s=void 0;for(a=n.index,o=0;a<t.length;a++){switch(t.charCodeAt(a)){case 34:s="&#34;";break;case 38:s="&#38;";break;case 39:s="&#39;";break;case 60:s="&#60;";break;case 62:s="&#62;";break;default:continue}o!==a&&(i+=t.substring(o,a)),o=a+1,i+=s}return o!==a?i+t.substring(o,a):i}(function e(t){"string"!=typeof t&&(t=void 0===t||null===t?"":"function"==typeof t?e(t.call(t)):JSON.stringify(t));return t}(e))},a.$each=function(e,t){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t(e[n],n);else for(var a in e)t(e[a],a)},e.exports=a}).call(this,n(4))},function(e,t,n){var i=n(2);e.exports=function(e){"use strict";var t="",a=(e=e||{}).options,r=e.cover,o=i.$escape,s=e.icons,l=(arguments[1],function(e){return t+=e}),u=e.getObject;e.theme,e.audio,e.index;return a.fixed?(t+='\n<div class="aplayer-list',a.listFolded&&(t+=" aplayer-list-hide"),t+='"',a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n    <ol",a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n        ",l(n(1)(u({theme:a.theme,audio:a.audio,index:1}))),t+='\n    </ol>\n</div>\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(t+="background-image: url(&quot;",t+=o(r),t+="&quot;);"),t+="background-color: ",t+=o(a.theme),t+=';">\n        <div class="aplayer-button aplayer-play">',t+=s.play,t+='</div>\n    </div>\n    <div class="aplayer-info" style="display: none;">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',t+=o(a.theme),t+=';">\n                        <span class="aplayer-thumb" style="background: ',t+=o(a.theme),t+=';">\n                            <span class="aplayer-loading-icon">',t+=s.loading,t+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',t+=s.skip,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',t+=s.play,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',t+=s.skip,t+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',t+=s.volumeDown,t+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',t+=o(a.theme),t+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?t+=s.orderList:"random"===a.order&&(t+=s.orderRandom),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?t+=s.loopOne:"all"===a.loop?t+=s.loopAll:"none"===a.loop&&(t+=s.loopNone),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',t+=s.menu,t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',t+=s.lrc,t+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',t+=s.right,t+='</button></div>\n</div>\n<div class="aplayer-lrc">\n    <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n</div>\n'):(t+='\n<div class="aplayer-body">\n    <div class="aplayer-pic" style="',r&&(t+="background-image: url(&quot;",t+=o(r),t+="&quot;);"),t+="background-color: ",t+=o(a.theme),t+=';">\n        <div class="aplayer-button aplayer-play">',t+=s.play,t+='</div>\n    </div>\n    <div class="aplayer-info">\n        <div class="aplayer-music">\n            <span class="aplayer-title">No audio</span>\n            <span class="aplayer-author"></span>\n        </div>\n        <div class="aplayer-lrc">\n            <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n        </div>\n        <div class="aplayer-controller">\n            <div class="aplayer-bar-wrap">\n                <div class="aplayer-bar">\n                    <div class="aplayer-loaded" style="width: 0"></div>\n                    <div class="aplayer-played" style="width: 0; background: ',t+=o(a.theme),t+=';">\n                        <span class="aplayer-thumb" style="background: ',t+=o(a.theme),t+=';">\n                            <span class="aplayer-loading-icon">',t+=s.loading,t+='</span>\n                        </span>\n                    </div>\n                </div>\n            </div>\n            <div class="aplayer-time">\n                <span class="aplayer-time-inner">\n                    <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                </span>\n                <span class="aplayer-icon aplayer-icon-back">\n                    ',t+=s.skip,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-play">\n                    ',t+=s.play,t+='\n                </span>\n                <span class="aplayer-icon aplayer-icon-forward">\n                    ',t+=s.skip,t+='\n                </span>\n                <div class="aplayer-volume-wrap">\n                    <button type="button" class="aplayer-icon aplayer-icon-volume-down">\n                        ',t+=s.volumeDown,t+='\n                    </button>\n                    <div class="aplayer-volume-bar-wrap">\n                        <div class="aplayer-volume-bar">\n                            <div class="aplayer-volume" style="height: 80%; background: ',t+=o(a.theme),t+=';"></div>\n                        </div>\n                    </div>\n                </div>\n                <button type="button" class="aplayer-icon aplayer-icon-order">\n                    ',"list"===a.order?t+=s.orderList:"random"===a.order&&(t+=s.orderRandom),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-loop">\n                    ',"one"===a.loop?t+=s.loopOne:"all"===a.loop?t+=s.loopAll:"none"===a.loop&&(t+=s.loopNone),t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-menu">\n                    ',t+=s.menu,t+='\n                </button>\n                <button type="button" class="aplayer-icon aplayer-icon-lrc">\n                    ',t+=s.lrc,t+='\n                </button>\n            </div>\n        </div>\n    </div>\n    <div class="aplayer-notice"></div>\n    <div class="aplayer-miniswitcher"><button class="aplayer-icon">',t+=s.right,t+='</button></div>\n</div>\n<div class="aplayer-list',a.listFolded&&(t+=" aplayer-list-hide"),t+='"',a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n    <ol",a.listMaxHeight&&(t+=' style="max-height: ',t+=o(a.listMaxHeight),t+='"'),t+=">\n        ",l(n(1)(u({theme:a.theme,audio:a.audio,index:1}))),t+="\n    </ol>\n</div>\n"),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=o(n(3)),r=o(n(16));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.options=t.options,this.randomOrder=t.randomOrder,this.init()}return i(e,[{key:"init",value:function(){var e="";this.options.audio.length&&(e="random"===this.options.order?this.options.audio[this.randomOrder[0]].cover:this.options.audio[0].cover),this.container.innerHTML=(0,r.default)({options:this.options,icons:a.default,cover:e,getObject:function(e){return e}}),this.lrc=this.container.querySelector(".aplayer-lrc-contents"),this.lrcWrap=this.container.querySelector(".aplayer-lrc"),this.ptime=this.container.querySelector(".aplayer-ptime"),this.info=this.container.querySelector(".aplayer-info"),this.time=this.container.querySelector(".aplayer-time"),this.barWrap=this.container.querySelector(".aplayer-bar-wrap"),this.button=this.container.querySelector(".aplayer-button"),this.body=this.container.querySelector(".aplayer-body"),this.list=this.container.querySelector(".aplayer-list"),this.listOl=this.container.querySelector(".aplayer-list ol"),this.listCurs=this.container.querySelectorAll(".aplayer-list-cur"),this.played=this.container.querySelector(".aplayer-played"),this.loaded=this.container.querySelector(".aplayer-loaded"),this.thumb=this.container.querySelector(".aplayer-thumb"),this.volume=this.container.querySelector(".aplayer-volume"),this.volumeBar=this.container.querySelector(".aplayer-volume-bar"),this.volumeButton=this.container.querySelector(".aplayer-time button"),this.volumeBarWrap=this.container.querySelector(".aplayer-volume-bar-wrap"),this.loop=this.container.querySelector(".aplayer-icon-loop"),this.order=this.container.querySelector(".aplayer-icon-order"),this.menu=this.container.querySelector(".aplayer-icon-menu"),this.pic=this.container.querySelector(".aplayer-pic"),this.title=this.container.querySelector(".aplayer-title"),this.author=this.container.querySelector(".aplayer-author"),this.dtime=this.container.querySelector(".aplayer-dtime"),this.notice=this.container.querySelector(".aplayer-notice"),this.miniSwitcher=this.container.querySelector(".aplayer-miniswitcher"),this.skipBackButton=this.container.querySelector(".aplayer-icon-back"),this.skipForwardButton=this.container.querySelector(".aplayer-icon-forward"),this.skipPlayButton=this.container.querySelector(".aplayer-icon-play"),this.lrcButton=this.container.querySelector(".aplayer-icon-lrc")}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={container:e.element||document.getElementsByClassName("aplayer")[0],mini:e.narrow||e.fixed||!1,fixed:!1,autoplay:!1,mutex:!0,lrcType:e.showlrc||e.lrc||0,preload:"auto",theme:"#b7daff",loop:"all",order:"list",volume:.7,listFolded:e.fixed,listMaxHeight:e.listmaxheight||"250px",audio:e.music||[],storageName:"aplayer-setting"};for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n]);return"[object Array]"!==Object.prototype.toString.call(e.audio)&&(e.audio=[e.audio]),e.audio.map(function(e){return e.name=e.name||e.title||"Audio name",e.artist=e.artist||e.author||"Audio artist",e.cover=e.cover||e.pic,e.type=e.type||"normal",e}),e.audio.length<=1&&"one"===e.loop&&(e.loop="all"),e}},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M26.667 5.333h-21.333c-0 0-0.001 0-0.001 0-1.472 0-2.666 1.194-2.666 2.666 0 0 0 0.001 0 0.001v-0 16c0 0 0 0.001 0 0.001 0 1.472 1.194 2.666 2.666 2.666 0 0 0.001 0 0.001 0h21.333c0 0 0.001 0 0.001 0 1.472 0 2.666-1.194 2.666-2.666 0-0 0-0.001 0-0.001v0-16c0-0 0-0.001 0-0.001 0-1.472-1.194-2.666-2.666-2.666-0 0-0.001 0-0.001 0h0zM5.333 16h5.333v2.667h-5.333v-2.667zM18.667 24h-13.333v-2.667h13.333v2.667zM26.667 24h-5.333v-2.667h5.333v2.667zM26.667 18.667h-13.333v-2.667h13.333v2.667z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M25.468 6.947c-0.326-0.172-0.724-0.151-1.030 0.057l-6.438 4.38v-3.553c0-0.371-0.205-0.71-0.532-0.884-0.326-0.172-0.724-0.151-1.030 0.057l-12 8.164c-0.274 0.186-0.438 0.496-0.438 0.827s0.164 0.641 0.438 0.827l12 8.168c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-3.556l6.438 4.382c0.169 0.115 0.365 0.174 0.562 0.174 0.16 0 0.321-0.038 0.468-0.116 0.327-0.173 0.532-0.514 0.532-0.884v-16.333c0-0.371-0.205-0.71-0.532-0.884z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22 16l-10.105-10.6-1.895 1.987 8.211 8.613-8.211 8.612 1.895 1.988 8.211-8.613z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M4 16c0-6.6 5.4-12 12-12s12 5.4 12 12c0 1.2-0.8 2-2 2s-2-0.8-2-2c0-4.4-3.6-8-8-8s-8 3.6-8 8 3.6 8 8 8c1.2 0 2 0.8 2 2s-0.8 2-2 2c-6.6 0-12-5.4-12-12z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M2.667 7.027l1.707-1.693 22.293 22.293-1.693 1.707-4-4h-11.64v4l-5.333-5.333 5.333-5.333v4h8.973l-8.973-8.973v0.973h-2.667v-3.64l-4-4zM22.667 17.333h2.667v5.573l-2.667-2.667v-2.907zM22.667 6.667v-4l5.333 5.333-5.333 5.333v-4h-10.907l-2.667-2.667h13.573z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 33 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333zM17.333 20v-8h-1.333l-2.667 1.333v1.333h2v5.333h2z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 29 32"><path d="M9.333 9.333h13.333v4l5.333-5.333-5.333-5.333v4h-16v8h2.667v-5.333zM22.667 22.667h-13.333v-4l-5.333 5.333 5.333 5.333v-4h16v-8h-2.667v5.333z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 22 32"><path d="M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 32 32"><path d="M22.667 4l7 6-7 6 7 6-7 6v-4h-3.653l-3.76-3.76 2.827-2.827 2.587 2.587h2v-8h-2l-12 12h-6v-4h4.347l12-12h3.653v-4zM2.667 8h6l3.76 3.76-2.827 2.827-2.587-2.587h-4.347v-4z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 28 32"><path d="M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 17 32"><path d="M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"></path></svg>'},function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 16 31"><path d="M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"></path></svg>'},function(e,t,n){"use strict";var i,a,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{a="function"==typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var u,c=[],p=!1,d=-1;function h(){p&&u&&(p=!1,u.length?c=u.concat(c):d=-1,c.length&&y())}function y(){if(!p){var e=l(h);p=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,p=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||p||l(y)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";(function(e,t){!function(e,n){if(!e.setImmediate){var i,a,r,o,s,l=1,u={},c=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){y(e.data)},i=function(e){r.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,i=function(e){var t=p.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(y,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&y(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(o+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,i(l),l++},d.clearImmediate=h}function h(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(this,n(4),n(34))},function(e,t,n){"use strict";var i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(35),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=setTimeout;function a(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,i)}else(1===e._state?s:l)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===(void 0===t?"undefined":n(t))||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void u(e);if("function"==typeof i)return void c((a=i,o=t,function(){a.apply(o,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){l(e,t)}var a,o}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var n=new this.constructor(a);return o(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},r.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},r.all=function(e){return new r(function(t,i){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var a=Array.prototype.slice.call(e);if(0===a.length)return t([]);var r=a.length;function o(e,s){try{if(s&&("object"===(void 0===s?"undefined":n(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(t){o(e,t)},i)}a[e]=s,0==--r&&t(a)}catch(e){i(e)}}for(var s=0;s<a.length;s++)o(s,a[s])})},r.resolve=function(e){return e&&"object"===(void 0===e?"undefined":n(e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var i=0,a=e.length;i<a;i++)e[i].then(t,n)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=r}).call(this,n(36).setImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=v(n(37)),r=v(n(0)),o=v(n(3)),s=v(n(18)),l=v(n(17)),u=v(n(13)),c=v(n(12)),p=v(n(11)),d=v(n(9)),h=v(n(8)),y=v(n(7)),f=v(n(6));function v(e){return e&&e.__esModule?e:{default:e}}var m=[],g=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=(0,s.default)(t),this.container=this.options.container,this.paused=!0,this.playedPromise=a.default.resolve(),this.mode="normal",this.randomOrder=r.default.randomOrder(this.options.audio.length),this.container.classList.add("aplayer"),this.options.lrcType&&!this.options.fixed&&this.container.classList.add("aplayer-withlrc"),this.options.audio.length>1&&this.container.classList.add("aplayer-withlist"),r.default.isMobile&&this.container.classList.add("aplayer-mobile"),this.arrow=this.container.offsetWidth<=300,this.arrow&&this.container.classList.add("aplayer-arrow"),this.container=this.options.container,2===this.options.lrcType||!0===this.options.lrcType)for(var n=this.container.getElementsByClassName("aplayer-lrc-content"),i=0;i<n.length;i++)this.options.audio[i]&&(this.options.audio[i].lrc=n[i].innerHTML);this.template=new l.default({container:this.container,options:this.options,randomOrder:this.randomOrder}),this.options.fixed&&(this.container.classList.add("aplayer-fixed"),this.template.body.style.width=this.template.body.offsetWidth-18+"px"),this.options.mini&&(this.setMode("mini"),this.template.info.style.display="block"),this.template.info.offsetWidth<200&&this.template.time.classList.add("aplayer-time-narrow"),this.options.lrcType&&(this.lrc=new p.default({container:this.template.lrc,async:3===this.options.lrcType,player:this})),this.events=new y.default,this.storage=new c.default(this),this.bar=new u.default(this.template),this.controller=new d.default(this),this.timer=new h.default(this),this.list=new f.default(this),this.initAudio(),this.bindEvents(),"random"===this.options.order?this.list.switch(this.randomOrder[0]):this.list.switch(0),this.options.autoplay&&this.play(),m.push(this)}return i(e,[{key:"initAudio",value:function(){var e=this;this.audio=document.createElement("audio"),this.audio.preload=this.options.preload;for(var t=function(t){e.audio.addEventListener(e.events.audioEvents[t],function(n){e.events.trigger(e.events.audioEvents[t],n)})},n=0;n<this.events.audioEvents.length;n++)t(n);this.volume(this.storage.get("volume"),!0)}},{key:"bindEvents",value:function(){var e=this;this.on("play",function(){e.paused&&e.setUIPlaying()}),this.on("pause",function(){e.paused||e.setUIPaused()}),this.on("timeupdate",function(){if(!e.disableTimeupdate){e.bar.set("played",e.audio.currentTime/e.duration,"width"),e.lrc&&e.lrc.update();var t=r.default.secondToTime(e.audio.currentTime);e.template.ptime.innerHTML!==t&&(e.template.ptime.innerHTML=t)}}),this.on("durationchange",function(){1!==e.duration&&(e.template.dtime.innerHTML=r.default.secondToTime(e.duration))}),this.on("progress",function(){var t=e.audio.buffered.length?e.audio.buffered.end(e.audio.buffered.length-1)/e.duration:0;e.bar.set("loaded",t,"width")});var t=void 0;this.on("error",function(){e.list.audios.length>1?(e.notice("An audio error has occurred, player will skip forward in 2 seconds."),t=setTimeout(function(){e.skipForward(),e.paused||e.play()},2e3)):1===e.list.audios.length&&e.notice("An audio error has occurred.")}),this.events.on("listswitch",function(){t&&clearTimeout(t)}),this.on("ended",function(){"none"===e.options.loop?"list"===e.options.order?e.list.index<e.list.audios.length-1?(e.list.switch((e.list.index+1)%e.list.audios.length),e.play()):(e.list.switch((e.list.index+1)%e.list.audios.length),e.pause()):"random"===e.options.order&&(e.randomOrder.indexOf(e.list.index)<e.randomOrder.length-1?(e.list.switch(e.nextIndex()),e.play()):(e.list.switch(e.nextIndex()),e.pause())):"one"===e.options.loop?(e.list.switch(e.list.index),e.play()):"all"===e.options.loop&&(e.skipForward(),e.play())})}},{key:"setAudio",value:function(e){this.hls&&(this.hls.destroy(),this.hls=null);var t=e.type;this.options.customAudioType&&this.options.customAudioType[t]?"[object Function]"===Object.prototype.toString.call(this.options.customAudioType[t])?this.options.customAudioType[t](this.audio,e,this):console.error("Illegal customType: "+t):(t&&"auto"!==t||(t=/m3u8(#|\?|$)/i.exec(e.url)?"hls":"normal"),"hls"===t?Hls.isSupported()?(this.hls=new Hls,this.hls.loadSource(e.url),this.hls.attachMedia(this.audio)):this.audio.canPlayType("application/x-mpegURL")||this.audio.canPlayType("application/vnd.apple.mpegURL")?this.audio.src=e.url:this.notice("Error: HLS is not supported."):"normal"===t&&(this.audio.src=e.url)),this.seek(0),this.paused||this.audio.play()}},{key:"theme",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.list.audios[this.list.index].theme||this.options.theme,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list.index;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&this.list.audios[t]&&(this.list.audios[t].theme=e),this.template.listCurs[t]&&(this.template.listCurs[t].style.backgroundColor=e),t===this.list.index&&(this.template.pic.style.backgroundColor=e,this.template.played.style.background=e,this.template.thumb.style.background=e,this.template.volume.style.background=e)}},{key:"seek",value:function(e){e=Math.max(e,0),e=Math.min(e,this.duration),this.audio.currentTime=e,this.bar.set("played",e/this.duration,"width"),this.template.ptime.innerHTML=r.default.secondToTime(e)}},{key:"setUIPlaying",value:function(){var e=this;if(this.paused&&(this.paused=!1,this.template.button.classList.remove("aplayer-play"),this.template.button.classList.add("aplayer-pause"),this.template.button.innerHTML="",setTimeout(function(){e.template.button.innerHTML=o.default.pause},100),this.template.skipPlayButton.innerHTML=o.default.pause),this.timer.enable("loading"),this.options.mutex)for(var t=0;t<m.length;t++)this!==m[t]&&m[t].pause()}},{key:"play",value:function(){var e=this;this.setUIPlaying();var t=this.audio.play();t&&t.catch(function(t){console.warn(t),"NotAllowedError"===t.name&&e.setUIPaused()})}},{key:"setUIPaused",value:function(){var e=this;this.paused||(this.paused=!0,this.template.button.classList.remove("aplayer-pause"),this.template.button.classList.add("aplayer-play"),this.template.button.innerHTML="",setTimeout(function(){e.template.button.innerHTML=o.default.play},100),this.template.skipPlayButton.innerHTML=o.default.play),this.container.classList.remove("aplayer-loading"),this.timer.disable("loading")}},{key:"pause",value:function(){this.setUIPaused(),this.audio.pause()}},{key:"switchVolumeIcon",value:function(){this.volume()>=.95?this.template.volumeButton.innerHTML=o.default.volumeUp:this.volume()>0?this.template.volumeButton.innerHTML=o.default.volumeDown:this.template.volumeButton.innerHTML=o.default.volumeOff}},{key:"volume",value:function(e,t){return e=parseFloat(e),isNaN(e)||(e=Math.max(e,0),e=Math.min(e,1),this.bar.set("volume",e,"height"),t||this.storage.set("volume",e),this.audio.volume=e,this.audio.muted&&(this.audio.muted=!1),this.switchVolumeIcon()),this.audio.muted?0:this.audio.volume}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"toggle",value:function(){this.template.button.classList.contains("aplayer-play")?this.play():this.template.button.classList.contains("aplayer-pause")&&this.pause()}},{key:"switchAudio",value:function(e){this.list.switch(e)}},{key:"addAudio",value:function(e){this.list.add(e)}},{key:"removeAudio",value:function(e){this.list.remove(e)}},{key:"destroy",value:function(){m.splice(m.indexOf(this),1),this.pause(),this.container.innerHTML="",this.audio.src="",this.timer.destroy(),this.events.trigger("destroy")}},{key:"setMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";this.mode=e,"mini"===e?this.container.classList.add("aplayer-narrow"):"normal"===e&&this.container.classList.remove("aplayer-narrow")}},{key:"notice",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;this.template.notice.innerHTML=e,this.template.notice.style.opacity=i,this.noticeTime&&clearTimeout(this.noticeTime),this.events.trigger("noticeshow",{text:e}),n&&(this.noticeTime=setTimeout(function(){t.template.notice.style.opacity=0,t.events.trigger("noticehide")},n))}},{key:"prevIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return this.list.index-1<0?this.list.audios.length-1:this.list.index-1;if("random"===this.options.order){var e=this.randomOrder.indexOf(this.list.index);return 0===e?this.randomOrder[this.randomOrder.length-1]:this.randomOrder[e-1]}}},{key:"nextIndex",value:function(){if(!(this.list.audios.length>1))return 0;if("list"===this.options.order)return(this.list.index+1)%this.list.audios.length;if("random"===this.options.order){var e=this.randomOrder.indexOf(this.list.index);return e===this.randomOrder.length-1?this.randomOrder[0]:this.randomOrder[e+1]}}},{key:"skipBack",value:function(){this.list.switch(this.prevIndex())}},{key:"skipForward",value:function(){this.list.switch(this.nextIndex())}},{key:"duration",get:function(){return isNaN(this.audio.duration)?0:this.audio.duration}}],[{key:"version",get:function(){return"1.10.1"}}]),e}();t.default=g},,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(40);var i,a=n(38),r=(i=a)&&i.__esModule?i:{default:i};console.log("\n %c APlayer v1.10.1 af84efb %c http://aplayer.js.org \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),t.default=r.default}]).default});
//# sourceMappingURL=APlayer.min.js.map

</script>
<!-- require MetingJS -->
<script>
  "use strict";function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}class MetingJSElement extends HTMLElement{connectedCallback(){window.APlayer&&window.fetch&&(this._init(),this._parse())}disconnectedCallback(){this.lock||this.aplayer.destroy()}_camelize(a){return a.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(a,b)=>b.toUpperCase())}_init(){let a={};for(let b=0;b<this.attributes.length;b+=1)a[this._camelize(this.attributes[b].name)]=this.attributes[b].value;let b=["server","type","id","api","auth","auto","lock","name","title","artist","author","url","cover","pic","lyric","lrc"];this.meta={};for(var c=0;c<b.length;c++){let d=b[c];this.meta[d]=a[d],delete a[d]}this.config=a,this.api=this.meta.api||window.meting_api||"https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r",this.meta.auto&&this._parse_link()}_parse_link(){let a=[["music.163.com.*song.*id=(\\d+)","netease","song"],["music.163.com.*album.*id=(\\d+)","netease","album"],["music.163.com.*artist.*id=(\\d+)","netease","artist"],["music.163.com.*playlist.*id=(\\d+)","netease","playlist"],["music.163.com.*discover/toplist.*id=(\\d+)","netease","playlist"],["y.qq.com.*song/(\\w+).html","tencent","song"],["y.qq.com.*album/(\\w+).html","tencent","album"],["y.qq.com.*singer/(\\w+).html","tencent","artist"],["y.qq.com.*playsquare/(\\w+).html","tencent","playlist"],["y.qq.com.*playlist/(\\w+).html","tencent","playlist"],["xiami.com.*song/(\\w+)","xiami","song"],["xiami.com.*album/(\\w+)","xiami","album"],["xiami.com.*artist/(\\w+)","xiami","artist"],["xiami.com.*collect/(\\w+)","xiami","playlist"]];for(var b=0;b<a.length;b++){let c=a[b],d=new RegExp(c[0]),e=d.exec(this.meta.auto);if(null!==e)return this.meta.server=c[1],this.meta.type=c[2],void(this.meta.id=e[1])}}_parse(){if(this.meta.url){let a={name:this.meta.name||this.meta.title||"Audio name",artist:this.meta.artist||this.meta.author||"Audio artist",url:this.meta.url,cover:this.meta.cover||this.meta.pic,lrc:this.meta.lrc||this.meta.lyric||"",type:this.meta.type||"auto"};return a.lrc||(this.meta.lrcType=0),this.innerText&&(a.lrc=this.innerText,this.meta.lrcType=2),void this._loadPlayer([a])}let a=this.api.replace(":server",this.meta.server).replace(":type",this.meta.type).replace(":id",this.meta.id).replace(":auth",this.meta.auth).replace(":r",Math.random());fetch(a).then(a=>a.json()).then(a=>this._loadPlayer(a))}_loadPlayer(a){let b={audio:a,mutex:!0,lrcType:this.meta.lrcType||3,storageName:"metingjs"};if(a.length){let a=_objectSpread({},b,this.config);for(let b in a)("true"===a[b]||"false"===a[b])&&(a[b]="true"===a[b]);let c=document.createElement("div");a.container=c,this.appendChild(c),this.aplayer=new APlayer(a)}}}console.log("\n %c MetingJS v2.0.1 %c https://github.com/metowolf/MetingJS \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;"),window.customElements&&!window.customElements.get("meting-js")&&(window.MetingJSElement=MetingJSElement,window.customElements.define("meting-js",MetingJSElement));
</script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="7802292660"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.3"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script> 

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"mobile":{"show":true},"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"https://unpkg.com/ccr39-assets@6.6.9/index.json"},"display":{"superSample":2,"width":300,"height":300,"position":"right","hOffset":"100%","vOffset":-50},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>